var $I=Object.create;var ka=Object.defineProperty;var HI=Object.getOwnPropertyDescriptor;var GI=Object.getOwnPropertyNames;var BI=Object.getPrototypeOf,JI=Object.prototype.hasOwnProperty;var n=(t,e)=>ka(t,"name",{value:e,configurable:!0}),U=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var He=(t,e)=>()=>(t&&(e=t(t=0)),e);var u=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),IE=(t,e)=>{for(var r in e)ka(t,r,{get:e[r],enumerable:!0})},qE=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of GI(e))!JI.call(t,s)&&s!==r&&ka(t,s,{get:()=>e[s],enumerable:!(i=HI(e,s))||i.enumerable});return t};var KI=(t,e,r)=>(r=t!=null?$I(BI(t)):{},qE(e||!t||!t.__esModule?ka(r,"default",{value:t,enumerable:!0}):r,t)),b=t=>qE(ka({},"__esModule",{value:!0}),t);var x={};IE(x,{__assign:()=>Q_,__asyncDelegator:()=>Bq,__asyncGenerator:()=>Gq,__asyncValues:()=>Jq,__await:()=>_c,__awaiter:()=>Uq,__classPrivateFieldGet:()=>Zq,__classPrivateFieldIn:()=>tC,__classPrivateFieldSet:()=>eC,__createBinding:()=>Z_,__decorate:()=>Cq,__esDecorate:()=>Mq,__exportStar:()=>jq,__extends:()=>Iq,__generator:()=>Wq,__importDefault:()=>Xq,__importStar:()=>Qq,__makeTemplateObject:()=>Kq,__metadata:()=>zq,__param:()=>kq,__propKey:()=>Fq,__read:()=>xv,__rest:()=>qq,__runInitializers:()=>Dq,__setFunctionName:()=>Lq,__spread:()=>Vq,__spreadArray:()=>Hq,__spreadArrays:()=>$q,__values:()=>X_});function Iq(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Y_(t,e);function r(){this.constructor=t}n(r,"__"),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function qq(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(r[i[s]]=t[i[s]]);return r}function Cq(t,e,r,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,r):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,i);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(o=(s<3?a(o):s>3?a(e,r,o):a(e,r))||o);return s>3&&o&&Object.defineProperty(e,r,o),o}function kq(t,e){return function(r,i){e(r,i,t)}}function Mq(t,e,r,i,s,o){function a(ie){if(ie!==void 0&&typeof ie!="function")throw new TypeError("Function expected");return ie}n(a,"accept");for(var c=i.kind,l=c==="getter"?"get":c==="setter"?"set":"value",p=!e&&t?i.static?t:t.prototype:null,f=e||(p?Object.getOwnPropertyDescriptor(p,i.name):{}),m,h=!1,_=r.length-1;_>=0;_--){var w={};for(var g in i)w[g]=g==="access"?{}:i[g];for(var g in i.access)w.access[g]=i.access[g];w.addInitializer=function(ie){if(h)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(ie||null))};var S=(0,r[_])(c==="accessor"?{get:f.get,set:f.set}:f[l],w);if(c==="accessor"){if(S===void 0)continue;if(S===null||typeof S!="object")throw new TypeError("Object expected");(m=a(S.get))&&(f.get=m),(m=a(S.set))&&(f.set=m),(m=a(S.init))&&s.push(m)}else(m=a(S))&&(c==="field"?s.push(m):f[l]=m)}p&&Object.defineProperty(p,i.name,f),h=!0}function Dq(t,e,r){for(var i=arguments.length>2,s=0;s<e.length;s++)r=i?e[s].call(t,r):e[s].call(t);return i?r:void 0}function Fq(t){return typeof t=="symbol"?t:"".concat(t)}function Lq(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function zq(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Uq(t,e,r,i){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return n(s,"adopt"),new(r||(r=Promise))(function(o,a){function c(f){try{p(i.next(f))}catch(m){a(m)}}n(c,"fulfilled");function l(f){try{p(i.throw(f))}catch(m){a(m)}}n(l,"rejected");function p(f){f.done?o(f.value):s(f.value).then(c,l)}n(p,"step"),p((i=i.apply(t,e||[])).next())})}function Wq(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,s,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(p){return function(f){return l([p,f])}}function l(p){if(i)throw new TypeError("Generator is already executing.");for(;a&&(a=0,p[0]&&(r=0)),r;)try{if(i=1,s&&(o=p[0]&2?s.return:p[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,p[1])).done)return o;switch(s=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,s=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){r.label=p[1];break}if(p[0]===6&&r.label<o[1]){r.label=o[1],o=p;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(p);break}o[2]&&r.ops.pop(),r.trys.pop();continue}p=e.call(t,r)}catch(f){p=[6,f],s=0}finally{i=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function jq(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Z_(e,t,r)}function X_(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xv(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var i=r.call(t),s,o=[],a;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)o.push(s.value)}catch(c){a={error:c}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o}function Vq(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(xv(arguments[e]));return t}function $q(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var i=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,c=o.length;a<c;a++,s++)i[s]=o[a];return i}function Hq(t,e,r){if(r||arguments.length===2)for(var i=0,s=e.length,o;i<s;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))}function _c(t){return this instanceof _c?(this.v=t,this):new _c(t)}function Gq(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(t,e||[]),s,o=[];return s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s;function a(h){i[h]&&(s[h]=function(_){return new Promise(function(w,g){o.push([h,_,w,g])>1||c(h,_)})})}function c(h,_){try{l(i[h](_))}catch(w){m(o[0][3],w)}}function l(h){h.value instanceof _c?Promise.resolve(h.value.v).then(p,f):m(o[0][2],h)}function p(h){c("next",h)}function f(h){c("throw",h)}function m(h,_){h(_),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Bq(t){var e,r;return e={},i("next"),i("throw",function(s){throw s}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(s,o){e[s]=t[s]?function(a){return(r=!r)?{value:_c(t[s](a)),done:!1}:o?o(a):a}:o}}function Jq(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof X_=="function"?X_(t):t[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(o){r[o]=t[o]&&function(a){return new Promise(function(c,l){a=t[o](a),s(c,l,a.done,a.value)})}}function s(o,a,c,l){Promise.resolve(l).then(function(p){o({value:p,done:c})},a)}}function Kq(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Qq(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Z_(e,t,r);return Yq(e,t),e}function Xq(t){return t&&t.__esModule?t:{default:t}}function Zq(t,e,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(t):i?i.value:e.get(t)}function eC(t,e,r,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r}function tC(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}var Y_,Q_,Z_,Yq,A=He(()=>{Y_=n(function(t,e){return Y_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},Y_(t,e)},"extendStatics");n(Iq,"__extends");Q_=n(function(){return Q_=Object.assign||n(function(e){for(var r,i=1,s=arguments.length;i<s;i++){r=arguments[i];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},"__assign"),Q_.apply(this,arguments)},"__assign");n(qq,"__rest");n(Cq,"__decorate");n(kq,"__param");n(Mq,"__esDecorate");n(Dq,"__runInitializers");n(Fq,"__propKey");n(Lq,"__setFunctionName");n(zq,"__metadata");n(Uq,"__awaiter");n(Wq,"__generator");Z_=Object.create?function(t,e,r,i){i===void 0&&(i=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,s)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]};n(jq,"__exportStar");n(X_,"__values");n(xv,"__read");n(Vq,"__spread");n($q,"__spreadArrays");n(Hq,"__spreadArray");n(_c,"__await");n(Gq,"__asyncGenerator");n(Bq,"__asyncDelegator");n(Jq,"__asyncValues");n(Kq,"__makeTemplateObject");Yq=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};n(Qq,"__importStar");n(Xq,"__importDefault");n(Zq,"__classPrivateFieldGet");n(eC,"__classPrivateFieldSet");n(tC,"__classPrivateFieldIn")});var Av=u(lt=>{"use strict";Object.defineProperty(lt,"__esModule",{value:!0});lt.isArnBucketName=lt.isDnsCompatibleBucketName=lt.S3_HOSTNAME_PATTERN=lt.DOT_PATTERN=lt.resolveParamsForS3=void 0;var rC=n(async t=>{let e=t?.Bucket||"";if(typeof t.Bucket=="string"&&(t.Bucket=e.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),(0,lt.isArnBucketName)(e)){if(t.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!(0,lt.isDnsCompatibleBucketName)(e)||e.indexOf(".")!==-1&&!String(t.Endpoint).startsWith("http:")||e.toLowerCase()!==e||e.length<3)&&(t.ForcePathStyle=!0);return t.DisableMultiRegionAccessPoints&&(t.disableMultiRegionAccessPoints=!0,t.DisableMRAP=!0),t},"resolveParamsForS3");lt.resolveParamsForS3=rC;var iC=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,nC=/(\d+\.){3}\d+/,sC=/\.\./;lt.DOT_PATTERN=/\./;lt.S3_HOSTNAME_PATTERN=/^(.+\.)?s3(-fips)?(\.dualstack)?[.-]([a-z0-9-]+)\./;var oC=n(t=>iC.test(t)&&!nC.test(t)&&!sC.test(t),"isDnsCompatibleBucketName");lt.isDnsCompatibleBucketName=oC;var aC=n(t=>{let[e,r,i,s,o,a]=t.split(":"),c=e==="arn"&&t.split(":").length>=6,l=[e,r,i,o,a].filter(Boolean).length===5;if(c&&!l)throw new Error(`Invalid ARN: ${t} was an invalid ARN.`);return e==="arn"&&!!r&&!!i&&!!o&&!!a},"isArnBucketName");lt.isArnBucketName=aC});var Tv=u(ey=>{"use strict";Object.defineProperty(ey,"__esModule",{value:!0});var cC=(A(),b(x));cC.__exportStar(Av(),ey)});var Ov=u(uu=>{"use strict";Object.defineProperty(uu,"__esModule",{value:!0});uu.createConfigValueProvider=void 0;var dC=n((t,e,r)=>{let i=n(async()=>{var s;let o=(s=r[t])!==null&&s!==void 0?s:r[e];return typeof o=="function"?o():o},"configProvider");return t==="endpoint"||e==="endpoint"?async()=>{let s=await i();if(s&&typeof s=="object"){if("url"in s)return s.url.href;if("hostname"in s){let{protocol:o,hostname:a,port:c,path:l}=s;return`${o}//${a}${c?":"+c:""}${l}`}}return s}:i},"createConfigValueProvider");uu.createConfigValueProvider=dC});var ty=u(kn=>{"use strict";Object.defineProperty(kn,"__esModule",{value:!0});kn.resolveParams=kn.getEndpointFromInstructions=void 0;var uC=Tv(),lC=Ov(),pC=n(async(t,e,r,i)=>{let s=await(0,kn.resolveParams)(t,e,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(s,i)},"getEndpointFromInstructions");kn.getEndpointFromInstructions=pC;var fC=n(async(t,e,r)=>{var i;let s={},o=((i=e?.getEndpointParameterInstructions)===null||i===void 0?void 0:i.call(e))||{};for(let[a,c]of Object.entries(o))switch(c.type){case"staticContextParams":s[a]=c.value;break;case"contextParams":s[a]=t[c.name];break;case"clientContextParams":case"builtInParams":s[a]=await(0,lC.createConfigValueProvider)(c.name,a,r)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(c))}return Object.keys(o).length===0&&Object.assign(s,r),String(r.serviceId).toLowerCase()==="s3"&&await(0,uC.resolveParamsForS3)(s),s},"resolveParams");kn.resolveParams=fC});var Pv=u(lu=>{"use strict";Object.defineProperty(lu,"__esModule",{value:!0});lu.parseQueryString=void 0;function mC(t){let e={};if(t=t.replace(/^\?/,""),t)for(let r of t.split("&")){let[i,s=null]=r.split("=");i=decodeURIComponent(i),s&&(s=decodeURIComponent(s)),i in e?Array.isArray(e[i])?e[i].push(s):e[i]=[e[i],s]:e[i]=s}return e}n(mC,"parseQueryString");lu.parseQueryString=mC});var Mn=u(yc=>{"use strict";Object.defineProperty(yc,"__esModule",{value:!0});yc.parseUrl=void 0;var hC=Pv(),_C=n(t=>{if(typeof t=="string")return(0,yc.parseUrl)(new URL(t));let{hostname:e,pathname:r,port:i,protocol:s,search:o}=t,a;return o&&(a=(0,hC.parseQueryString)(o)),{hostname:e,port:i?parseInt(i):void 0,protocol:s,path:r,query:a}},"parseUrl");yc.parseUrl=_C});var ry=u(pu=>{"use strict";Object.defineProperty(pu,"__esModule",{value:!0});pu.toEndpointV1=void 0;var Rv=Mn(),yC=n(t=>typeof t=="object"?"url"in t?(0,Rv.parseUrl)(t.url):t:(0,Rv.parseUrl)(t),"toEndpointV1");pu.toEndpointV1=yC});var qv=u(fu=>{"use strict";Object.defineProperty(fu,"__esModule",{value:!0});var Iv=(A(),b(x));Iv.__exportStar(ty(),fu);Iv.__exportStar(ry(),fu)});var iy=u(mu=>{"use strict";Object.defineProperty(mu,"__esModule",{value:!0});mu.endpointMiddleware=void 0;var gC=ty(),wC=n(({config:t,instructions:e})=>(r,i)=>async s=>{var o,a;let c=await(0,gC.getEndpointFromInstructions)(s.input,{getEndpointParameterInstructions(){return e}},{...t},i);i.endpointV2=c,i.authSchemes=(o=c.properties)===null||o===void 0?void 0:o.authSchemes;let l=(a=i.authSchemes)===null||a===void 0?void 0:a[0];return l&&(i.signing_region=l.signingRegion,i.signing_service=l.signingName),r({...s})},"endpointMiddleware");mu.endpointMiddleware=wC});var ny=u(hu=>{"use strict";Object.defineProperty(hu,"__esModule",{value:!0});hu.deserializerMiddleware=void 0;var EC=n((t,e)=>(r,i)=>async s=>{let{response:o}=await r(s);try{let a=await e(o,t);return{response:o,output:a}}catch(a){throw Object.defineProperty(a,"$response",{value:o}),a}},"deserializerMiddleware");hu.deserializerMiddleware=EC});var sy=u(_u=>{"use strict";Object.defineProperty(_u,"__esModule",{value:!0});_u.serializerMiddleware=void 0;var vC=n((t,e)=>(r,i)=>async s=>{var o;let a=!((o=i.endpointV2)===null||o===void 0)&&o.url&&t.urlParser?async()=>t.urlParser(i.endpointV2.url):t.endpoint;if(!a)throw new Error("No valid endpoint provider available.");let c=await e(s.input,{...t,endpoint:a});return r({...s,request:c})},"serializerMiddleware");_u.serializerMiddleware=vC});var Cv=u(fr=>{"use strict";Object.defineProperty(fr,"__esModule",{value:!0});fr.getSerdePlugin=fr.serializerMiddlewareOption=fr.deserializerMiddlewareOption=void 0;var SC=ny(),NC=sy();fr.deserializerMiddlewareOption={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0};fr.serializerMiddlewareOption={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function bC(t,e,r){return{applyToStack:i=>{i.add((0,SC.deserializerMiddleware)(t,r),fr.deserializerMiddlewareOption),i.add((0,NC.serializerMiddleware)(t,e),fr.serializerMiddlewareOption)}}}n(bC,"getSerdePlugin");fr.getSerdePlugin=bC});var me=u(gc=>{"use strict";Object.defineProperty(gc,"__esModule",{value:!0});var oy=(A(),b(x));oy.__exportStar(ny(),gc);oy.__exportStar(Cv(),gc);oy.__exportStar(sy(),gc)});var kv=u(Dn=>{"use strict";Object.defineProperty(Dn,"__esModule",{value:!0});Dn.getEndpointPlugin=Dn.endpointMiddlewareOptions=void 0;var xC=me(),AC=iy();Dn.endpointMiddlewareOptions={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:xC.serializerMiddlewareOption.name};var TC=n((t,e)=>({applyToStack:r=>{r.addRelativeTo((0,AC.endpointMiddleware)({config:t,instructions:e}),Dn.endpointMiddlewareOptions)}}),"getEndpointPlugin");Dn.getEndpointPlugin=TC});var Mv=u(yu=>{"use strict";Object.defineProperty(yu,"__esModule",{value:!0});yu.normalizeProvider=void 0;var OC=n(t=>{if(typeof t=="function")return t;let e=Promise.resolve(t);return()=>e},"normalizeProvider");yu.normalizeProvider=OC});var Fn=u(ay=>{"use strict";Object.defineProperty(ay,"__esModule",{value:!0});var PC=(A(),b(x));PC.__exportStar(Mv(),ay)});var Dv=u(gu=>{"use strict";Object.defineProperty(gu,"__esModule",{value:!0});gu.resolveEndpointConfig=void 0;var cy=Fn(),RC=ry(),IC=n(t=>{var e,r,i;let s=(e=t.tls)!==null&&e!==void 0?e:!0,{endpoint:o}=t,a=o!=null?async()=>(0,RC.toEndpointV1)(await(0,cy.normalizeProvider)(o)()):void 0;return{...t,endpoint:a,tls:s,isCustomEndpoint:!!o,useDualstackEndpoint:(0,cy.normalizeProvider)((r=t.useDualstackEndpoint)!==null&&r!==void 0?r:!1),useFipsEndpoint:(0,cy.normalizeProvider)((i=t.useFipsEndpoint)!==null&&i!==void 0?i:!1)}},"resolveEndpointConfig");gu.resolveEndpointConfig=IC});var Lv=u(Fv=>{"use strict";Object.defineProperty(Fv,"__esModule",{value:!0})});var ne=u(Ln=>{"use strict";Object.defineProperty(Ln,"__esModule",{value:!0});var wc=(A(),b(x));wc.__exportStar(qv(),Ln);wc.__exportStar(iy(),Ln);wc.__exportStar(kv(),Ln);wc.__exportStar(Dv(),Ln);wc.__exportStar(Lv(),Ln)});var zv=u(Eu=>{"use strict";Object.defineProperty(Eu,"__esModule",{value:!0});Eu.NoOpLogger=void 0;var wu=class{trace(){}debug(){}info(){}warn(){}error(){}};n(wu,"NoOpLogger");Eu.NoOpLogger=wu});var jv=u(Ps=>{"use strict";Object.defineProperty(Ps,"__esModule",{value:!0});Ps.constructStack=void 0;var qC=n(()=>{let t=[],e=[],r=new Set,i=n(f=>f.sort((m,h)=>Uv[h.step]-Uv[m.step]||Wv[h.priority||"normal"]-Wv[m.priority||"normal"]),"sort"),s=n(f=>{let m=!1,h=n(_=>_.name&&_.name===f?(m=!0,r.delete(f),!1):!0,"filterCb");return t=t.filter(h),e=e.filter(h),m},"removeByName"),o=n(f=>{let m=!1,h=n(_=>_.middleware===f?(m=!0,_.name&&r.delete(_.name),!1):!0,"filterCb");return t=t.filter(h),e=e.filter(h),m},"removeByReference"),a=n(f=>(t.forEach(m=>{f.add(m.middleware,{...m})}),e.forEach(m=>{f.addRelativeTo(m.middleware,{...m})}),f),"cloneTo"),c=n(f=>{let m=[];return f.before.forEach(h=>{h.before.length===0&&h.after.length===0?m.push(h):m.push(...c(h))}),m.push(f),f.after.reverse().forEach(h=>{h.before.length===0&&h.after.length===0?m.push(h):m.push(...c(h))}),m},"expandRelativeMiddlewareList"),l=n((f=!1)=>{let m=[],h=[],_={};return t.forEach(g=>{let S={...g,before:[],after:[]};S.name&&(_[S.name]=S),m.push(S)}),e.forEach(g=>{let S={...g,before:[],after:[]};S.name&&(_[S.name]=S),h.push(S)}),h.forEach(g=>{if(g.toMiddleware){let S=_[g.toMiddleware];if(S===void 0){if(f)return;throw new Error(`${g.toMiddleware} is not found when adding ${g.name||"anonymous"} middleware ${g.relation} ${g.toMiddleware}`)}g.relation==="after"&&S.after.push(g),g.relation==="before"&&S.before.push(g)}}),i(m).map(c).reduce((g,S)=>(g.push(...S),g),[])},"getMiddlewareList"),p={add:(f,m={})=>{let{name:h,override:_}=m,w={step:"initialize",priority:"normal",middleware:f,...m};if(h){if(r.has(h)){if(!_)throw new Error(`Duplicate middleware name '${h}'`);let g=t.findIndex(ie=>ie.name===h),S=t[g];if(S.step!==w.step||S.priority!==w.priority)throw new Error(`"${h}" middleware with ${S.priority} priority in ${S.step} step cannot be overridden by same-name middleware with ${w.priority} priority in ${w.step} step.`);t.splice(g,1)}r.add(h)}t.push(w)},addRelativeTo:(f,m)=>{let{name:h,override:_}=m,w={middleware:f,...m};if(h){if(r.has(h)){if(!_)throw new Error(`Duplicate middleware name '${h}'`);let g=e.findIndex(ie=>ie.name===h),S=e[g];if(S.toMiddleware!==w.toMiddleware||S.relation!==w.relation)throw new Error(`"${h}" middleware ${S.relation} "${S.toMiddleware}" middleware cannot be overridden by same-name middleware ${w.relation} "${w.toMiddleware}" middleware.`);e.splice(g,1)}r.add(h)}e.push(w)},clone:()=>a((0,Ps.constructStack)()),use:f=>{f.applyToStack(p)},remove:f=>typeof f=="string"?s(f):o(f),removeByTag:f=>{let m=!1,h=n(_=>{let{tags:w,name:g}=_;return w&&w.includes(f)?(g&&r.delete(g),m=!0,!1):!0},"filterCb");return t=t.filter(h),e=e.filter(h),m},concat:f=>{let m=a((0,Ps.constructStack)());return m.use(f),m},applyToStack:a,identify:()=>l(!0).map(f=>f.name+": "+(f.tags||[]).join(",")),resolve:(f,m)=>{for(let h of l().map(_=>_.middleware).reverse())f=h(f,m);return f}};return p},"constructStack");Ps.constructStack=qC;var Uv={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Wv={high:3,normal:2,low:1}});var uy=u(dy=>{"use strict";Object.defineProperty(dy,"__esModule",{value:!0});var CC=(A(),b(x));CC.__exportStar(jv(),dy)});var Vv=u(Su=>{"use strict";Object.defineProperty(Su,"__esModule",{value:!0});Su.Client=void 0;var kC=uy(),vu=class{constructor(e){this.middlewareStack=(0,kC.constructStack)(),this.config=e}send(e,r,i){let s=typeof r!="function"?r:void 0,o=typeof r=="function"?r:i,a=e.resolveMiddleware(this.middlewareStack,this.config,s);if(o)a(e).then(c=>o(null,c.output),c=>o(c)).catch(()=>{});else return a(e).then(c=>c.output)}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}};n(vu,"Client");Su.Client=vu});var $v=u(bu=>{"use strict";Object.defineProperty(bu,"__esModule",{value:!0});bu.Command=void 0;var MC=uy(),Nu=class{constructor(){this.middlewareStack=(0,MC.constructStack)()}};n(Nu,"Command");bu.Command=Nu});var Hv=u(xu=>{"use strict";Object.defineProperty(xu,"__esModule",{value:!0});xu.SENSITIVE_STRING=void 0;xu.SENSITIVE_STRING="***SensitiveInformation***"});var py=u(v=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});v.logger=v.strictParseByte=v.strictParseShort=v.strictParseInt32=v.strictParseInt=v.strictParseLong=v.limitedParseFloat32=v.limitedParseFloat=v.handleFloat=v.limitedParseDouble=v.strictParseFloat32=v.strictParseFloat=v.strictParseDouble=v.expectUnion=v.expectString=v.expectObject=v.expectNonNull=v.expectByte=v.expectShort=v.expectInt32=v.expectInt=v.expectLong=v.expectFloat32=v.expectNumber=v.expectBoolean=v.parseBoolean=void 0;var DC=n(t=>{switch(t){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${t}"`)}},"parseBoolean");v.parseBoolean=DC;var FC=n(t=>{if(t!=null){if(typeof t=="number"){if((t===0||t===1)&&v.logger.warn(Au(`Expected boolean, got ${typeof t}: ${t}`)),t===0)return!1;if(t===1)return!0}if(typeof t=="string"){let e=t.toLowerCase();if((e==="false"||e==="true")&&v.logger.warn(Au(`Expected boolean, got ${typeof t}: ${t}`)),e==="false")return!1;if(e==="true")return!0}if(typeof t=="boolean")return t;throw new TypeError(`Expected boolean, got ${typeof t}: ${t}`)}},"expectBoolean");v.expectBoolean=FC;var LC=n(t=>{if(t!=null){if(typeof t=="string"){let e=parseFloat(t);if(!Number.isNaN(e))return String(e)!==String(t)&&v.logger.warn(Au(`Expected number but observed string: ${t}`)),e}if(typeof t=="number")return t;throw new TypeError(`Expected number, got ${typeof t}: ${t}`)}},"expectNumber");v.expectNumber=LC;var zC=Math.ceil(2**127*(2-2**-23)),UC=n(t=>{let e=(0,v.expectNumber)(t);if(e!==void 0&&!Number.isNaN(e)&&e!==1/0&&e!==-1/0&&Math.abs(e)>zC)throw new TypeError(`Expected 32-bit float, got ${t}`);return e},"expectFloat32");v.expectFloat32=UC;var WC=n(t=>{if(t!=null){if(Number.isInteger(t)&&!Number.isNaN(t))return t;throw new TypeError(`Expected integer, got ${typeof t}: ${t}`)}},"expectLong");v.expectLong=WC;v.expectInt=v.expectLong;var jC=n(t=>ly(t,32),"expectInt32");v.expectInt32=jC;var VC=n(t=>ly(t,16),"expectShort");v.expectShort=VC;var $C=n(t=>ly(t,8),"expectByte");v.expectByte=$C;var ly=n((t,e)=>{let r=(0,v.expectLong)(t);if(r!==void 0&&HC(r,e)!==r)throw new TypeError(`Expected ${e}-bit integer, got ${t}`);return r},"expectSizedInt"),HC=n((t,e)=>{switch(e){case 32:return Int32Array.of(t)[0];case 16:return Int16Array.of(t)[0];case 8:return Int8Array.of(t)[0]}},"castInt"),GC=n((t,e)=>{if(t==null)throw e?new TypeError(`Expected a non-null value for ${e}`):new TypeError("Expected a non-null value");return t},"expectNonNull");v.expectNonNull=GC;var BC=n(t=>{if(t==null)return;if(typeof t=="object"&&!Array.isArray(t))return t;let e=Array.isArray(t)?"array":typeof t;throw new TypeError(`Expected object, got ${e}: ${t}`)},"expectObject");v.expectObject=BC;var JC=n(t=>{if(t!=null){if(typeof t=="string")return t;if(["boolean","number","bigint"].includes(typeof t))return v.logger.warn(Au(`Expected string, got ${typeof t}: ${t}`)),String(t);throw new TypeError(`Expected string, got ${typeof t}: ${t}`)}},"expectString");v.expectString=JC;var KC=n(t=>{if(t==null)return;let e=(0,v.expectObject)(t),r=Object.entries(e).filter(([,i])=>i!=null).map(([i])=>i);if(r.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(r.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${r} were not null.`);return e},"expectUnion");v.expectUnion=KC;var YC=n(t=>typeof t=="string"?(0,v.expectNumber)(Rs(t)):(0,v.expectNumber)(t),"strictParseDouble");v.strictParseDouble=YC;v.strictParseFloat=v.strictParseDouble;var QC=n(t=>typeof t=="string"?(0,v.expectFloat32)(Rs(t)):(0,v.expectFloat32)(t),"strictParseFloat32");v.strictParseFloat32=QC;var XC=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Rs=n(t=>{let e=t.match(XC);if(e===null||e[0].length!==t.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(t)},"parseNumber"),ZC=n(t=>typeof t=="string"?Gv(t):(0,v.expectNumber)(t),"limitedParseDouble");v.limitedParseDouble=ZC;v.handleFloat=v.limitedParseDouble;v.limitedParseFloat=v.limitedParseDouble;var e1=n(t=>typeof t=="string"?Gv(t):(0,v.expectFloat32)(t),"limitedParseFloat32");v.limitedParseFloat32=e1;var Gv=n(t=>{switch(t){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${t}`)}},"parseFloatString"),t1=n(t=>typeof t=="string"?(0,v.expectLong)(Rs(t)):(0,v.expectLong)(t),"strictParseLong");v.strictParseLong=t1;v.strictParseInt=v.strictParseLong;var r1=n(t=>typeof t=="string"?(0,v.expectInt32)(Rs(t)):(0,v.expectInt32)(t),"strictParseInt32");v.strictParseInt32=r1;var i1=n(t=>typeof t=="string"?(0,v.expectShort)(Rs(t)):(0,v.expectShort)(t),"strictParseShort");v.strictParseShort=i1;var n1=n(t=>typeof t=="string"?(0,v.expectByte)(Rs(t)):(0,v.expectByte)(t),"strictParseByte");v.strictParseByte=n1;var Au=n(t=>String(new TypeError(t).stack||t).split(`
`).slice(0,5).filter(e=>!e.includes("stackTraceWarning")).join(`
`),"stackTraceWarning");v.logger={warn:console.warn}});var Bv=u(Pt=>{"use strict";Object.defineProperty(Pt,"__esModule",{value:!0});Pt.parseEpochTimestamp=Pt.parseRfc7231DateTime=Pt.parseRfc3339DateTimeWithOffset=Pt.parseRfc3339DateTime=Pt.dateToUtcString=void 0;var Li=py(),s1=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],my=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function o1(t){let e=t.getUTCFullYear(),r=t.getUTCMonth(),i=t.getUTCDay(),s=t.getUTCDate(),o=t.getUTCHours(),a=t.getUTCMinutes(),c=t.getUTCSeconds(),l=s<10?`0${s}`:`${s}`,p=o<10?`0${o}`:`${o}`,f=a<10?`0${a}`:`${a}`,m=c<10?`0${c}`:`${c}`;return`${s1[i]}, ${l} ${my[r]} ${e} ${p}:${f}:${m} GMT`}n(o1,"dateToUtcString");Pt.dateToUtcString=o1;var a1=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),c1=n(t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let e=a1.exec(t);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");let[r,i,s,o,a,c,l,p]=e,f=(0,Li.strictParseShort)(Is(i)),m=mr(s,"month",1,12),h=mr(o,"day",1,31);return Ec(f,m,h,{hours:a,minutes:c,seconds:l,fractionalMilliseconds:p})},"parseRfc3339DateTime");Pt.parseRfc3339DateTime=c1;var d1=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),u1=n(t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let e=d1.exec(t);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");let[r,i,s,o,a,c,l,p,f]=e,m=(0,Li.strictParseShort)(Is(i)),h=mr(s,"month",1,12),_=mr(o,"day",1,31),w=Ec(m,h,_,{hours:a,minutes:c,seconds:l,fractionalMilliseconds:p});return f.toUpperCase()!="Z"&&w.setTime(w.getTime()-N1(f)),w},"parseRfc3339DateTimeWithOffset");Pt.parseRfc3339DateTimeWithOffset=u1;var l1=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),p1=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),f1=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),m1=n(t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let e=l1.exec(t);if(e){let[r,i,s,o,a,c,l,p]=e;return Ec((0,Li.strictParseShort)(Is(o)),fy(s),mr(i,"day",1,31),{hours:a,minutes:c,seconds:l,fractionalMilliseconds:p})}if(e=p1.exec(t),e){let[r,i,s,o,a,c,l,p]=e;return g1(Ec(_1(o),fy(s),mr(i,"day",1,31),{hours:a,minutes:c,seconds:l,fractionalMilliseconds:p}))}if(e=f1.exec(t),e){let[r,i,s,o,a,c,l,p]=e;return Ec((0,Li.strictParseShort)(Is(p)),fy(i),mr(s.trimLeft(),"day",1,31),{hours:o,minutes:a,seconds:c,fractionalMilliseconds:l})}throw new TypeError("Invalid RFC-7231 date-time value")},"parseRfc7231DateTime");Pt.parseRfc7231DateTime=m1;var h1=n(t=>{if(t==null)return;let e;if(typeof t=="number")e=t;else if(typeof t=="string")e=(0,Li.strictParseDouble)(t);else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(e)||e===1/0||e===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(e*1e3))},"parseEpochTimestamp");Pt.parseEpochTimestamp=h1;var Ec=n((t,e,r,i)=>{let s=e-1;return E1(t,s,r),new Date(Date.UTC(t,s,r,mr(i.hours,"hour",0,23),mr(i.minutes,"minute",0,59),mr(i.seconds,"seconds",0,60),S1(i.fractionalMilliseconds)))},"buildDate"),_1=n(t=>{let e=new Date().getUTCFullYear(),r=Math.floor(e/100)*100+(0,Li.strictParseShort)(Is(t));return r<e?r+100:r},"parseTwoDigitYear"),y1=50*365*24*60*60*1e3,g1=n(t=>t.getTime()-new Date().getTime()>y1?new Date(Date.UTC(t.getUTCFullYear()-100,t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds())):t,"adjustRfc850Year"),fy=n(t=>{let e=my.indexOf(t);if(e<0)throw new TypeError(`Invalid month: ${t}`);return e+1},"parseMonthByShortName"),w1=[31,28,31,30,31,30,31,31,30,31,30,31],E1=n((t,e,r)=>{let i=w1[e];if(e===1&&v1(t)&&(i=29),r>i)throw new TypeError(`Invalid day for ${my[e]} in ${t}: ${r}`)},"validateDayOfMonth"),v1=n(t=>t%4===0&&(t%100!==0||t%400===0),"isLeapYear"),mr=n((t,e,r,i)=>{let s=(0,Li.strictParseByte)(Is(t));if(s<r||s>i)throw new TypeError(`${e} must be between ${r} and ${i}, inclusive`);return s},"parseDateValue"),S1=n(t=>t==null?0:(0,Li.strictParseFloat32)("0."+t)*1e3,"parseMilliseconds"),N1=n(t=>{let e=t[0],r=1;if(e=="+")r=1;else if(e=="-")r=-1;else throw new TypeError(`Offset direction, ${e}, must be "+" or "-"`);let i=Number(t.substring(1,3)),s=Number(t.substring(4,6));return r*(i*60+s)*60*1e3},"parseOffsetToMilliseconds"),Is=n(t=>{let e=0;for(;e<t.length-1&&t.charAt(e)==="0";)e++;return e===0?t:t.slice(e)},"stripLeadingZeroes")});var hy=u(Cs=>{"use strict";Object.defineProperty(Cs,"__esModule",{value:!0});Cs.decorateServiceException=Cs.ServiceException=void 0;var qs=class extends Error{constructor(e){super(e.message),Object.setPrototypeOf(this,qs.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}};n(qs,"ServiceException");Cs.ServiceException=qs;var b1=n((t,e={})=>{Object.entries(e).filter(([,i])=>i!==void 0).forEach(([i,s])=>{(t[i]==null||t[i]==="")&&(t[i]=s)});let r=t.message||t.Message||"UnknownError";return t.message=r,delete t.Message,t},"decorateServiceException");Cs.decorateServiceException=b1});var Jv=u(Tu=>{"use strict";Object.defineProperty(Tu,"__esModule",{value:!0});Tu.throwDefaultError=void 0;var x1=hy(),A1=n(({output:t,parsedBody:e,exceptionCtor:r,errorCode:i})=>{let s=T1(t),o=s.httpStatusCode?s.httpStatusCode+"":void 0,a=new r({name:e?.code||e?.Code||i||o||"UnknownError",$fault:"client",$metadata:s});throw(0,x1.decorateServiceException)(a,e)},"throwDefaultError");Tu.throwDefaultError=A1;var T1=n(t=>{var e,r;return{httpStatusCode:t.statusCode,requestId:(r=(e=t.headers["x-amzn-requestid"])!==null&&e!==void 0?e:t.headers["x-amzn-request-id"])!==null&&r!==void 0?r:t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}},"deserializeMetadata")});var Kv=u(Ou=>{"use strict";Object.defineProperty(Ou,"__esModule",{value:!0});Ou.loadConfigsForDefaultMode=void 0;var O1=n(t=>{switch(t){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},"loadConfigsForDefaultMode");Ou.loadConfigsForDefaultMode=O1});var Qv=u(Pu=>{"use strict";Object.defineProperty(Pu,"__esModule",{value:!0});Pu.emitWarningIfUnsupportedVersion=void 0;var Yv=!1,P1=n(t=>{t&&!Yv&&parseInt(t.substring(1,t.indexOf(".")))<14&&(Yv=!0)},"emitWarningIfUnsupportedVersion");Pu.emitWarningIfUnsupportedVersion=P1});var _y=u(Ru=>{"use strict";Object.defineProperty(Ru,"__esModule",{value:!0});Ru.extendedEncodeURIComponent=void 0;function R1(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}n(R1,"extendedEncodeURIComponent");Ru.extendedEncodeURIComponent=R1});var Xv=u(Iu=>{"use strict";Object.defineProperty(Iu,"__esModule",{value:!0});Iu.getArrayIfSingleItem=void 0;var I1=n(t=>Array.isArray(t)?t:[t],"getArrayIfSingleItem");Iu.getArrayIfSingleItem=I1});var Zv=u(vc=>{"use strict";Object.defineProperty(vc,"__esModule",{value:!0});vc.getValueFromTextNode=void 0;var q1=n(t=>{let e="#text";for(let r in t)t.hasOwnProperty(r)&&t[r][e]!==void 0?t[r]=t[r][e]:typeof t[r]=="object"&&t[r]!==null&&(t[r]=(0,vc.getValueFromTextNode)(t[r]));return t},"getValueFromTextNode");vc.getValueFromTextNode=q1});var eS=u(hr=>{"use strict";Object.defineProperty(hr,"__esModule",{value:!0});hr.LazyJsonString=hr.StringWrapper=void 0;var C1=n(function(){let t=Object.getPrototypeOf(this).constructor,e=Function.bind.apply(String,[null,...arguments]),r=new e;return Object.setPrototypeOf(r,t.prototype),r},"StringWrapper");hr.StringWrapper=C1;hr.StringWrapper.prototype=Object.create(String.prototype,{constructor:{value:hr.StringWrapper,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(hr.StringWrapper,String);var zi=class extends hr.StringWrapper{deserializeJSON(){return JSON.parse(super.toString())}toJSON(){return super.toString()}static fromObject(e){return e instanceof zi?e:e instanceof String||typeof e=="string"?new zi(e):new zi(JSON.stringify(e))}};n(zi,"LazyJsonString");hr.LazyJsonString=zi});var rS=u(ks=>{"use strict";Object.defineProperty(ks,"__esModule",{value:!0});ks.convertMap=ks.map=void 0;function tS(t,e,r){let i,s,o;if(typeof e>"u"&&typeof r>"u")i={},o=t;else{if(i=t,typeof e=="function")return s=e,o=r,M1(i,s,o);o=e}for(let a of Object.keys(o)){if(!Array.isArray(o[a])){i[a]=o[a];continue}let[c,l]=o[a];if(typeof l=="function"){let p,f=c===void 0&&(p=l())!=null,m=typeof c=="function"&&!!c(void 0)||typeof c!="function"&&!!c;f?i[a]=p:m&&(i[a]=l())}else{let p=c===void 0&&l!=null,f=typeof c=="function"&&!!c(l)||typeof c!="function"&&!!c;(p||f)&&(i[a]=l)}}return i}n(tS,"map");ks.map=tS;var k1=n(t=>{let e={};for(let[r,i]of Object.entries(t||{}))e[r]=[,i];return e},"convertMap");ks.convertMap=k1;var M1=n((t,e,r)=>tS(t,Object.entries(r).reduce((i,[s,o])=>(Array.isArray(o)?i[s]=o:typeof o=="function"?i[s]=[e,o()]:i[s]=[e,o],i),{})),"mapWithFilter")});var nS=u(qu=>{"use strict";Object.defineProperty(qu,"__esModule",{value:!0});qu.resolvedPath=void 0;var iS=_y(),D1=n((t,e,r,i,s,o)=>{if(e!=null&&e[r]!==void 0){let a=i();if(a.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");t=t.replace(s,o?a.split("/").map(c=>(0,iS.extendedEncodeURIComponent)(c)).join("/"):(0,iS.extendedEncodeURIComponent)(a))}else throw new Error("No value provided for input HTTP label: "+r+".");return t},"resolvedPath");qu.resolvedPath=D1});var sS=u(Cu=>{"use strict";Object.defineProperty(Cu,"__esModule",{value:!0});Cu.serializeFloat=void 0;var F1=n(t=>{if(t!==t)return"NaN";switch(t){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return t}},"serializeFloat");Cu.serializeFloat=F1});var oS=u(ku=>{"use strict";Object.defineProperty(ku,"__esModule",{value:!0});ku.splitEvery=void 0;function L1(t,e,r){if(r<=0||!Number.isInteger(r))throw new Error("Invalid number of delimiters ("+r+") for splitEvery.");let i=t.split(e);if(r===1)return i;let s=[],o="";for(let a=0;a<i.length;a++)o===""?o=i[a]:o+=e+i[a],(a+1)%r===0&&(s.push(o),o="");return o!==""&&s.push(o),s}n(L1,"splitEvery");ku.splitEvery=L1});var C=u(Ae=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0});var Ce=(A(),b(x));Ce.__exportStar(zv(),Ae);Ce.__exportStar(Vv(),Ae);Ce.__exportStar($v(),Ae);Ce.__exportStar(Hv(),Ae);Ce.__exportStar(Bv(),Ae);Ce.__exportStar(Jv(),Ae);Ce.__exportStar(Kv(),Ae);Ce.__exportStar(Qv(),Ae);Ce.__exportStar(hy(),Ae);Ce.__exportStar(_y(),Ae);Ce.__exportStar(Xv(),Ae);Ce.__exportStar(Zv(),Ae);Ce.__exportStar(eS(),Ae);Ce.__exportStar(rS(),Ae);Ce.__exportStar(py(),Ae);Ce.__exportStar(nS(),Ae);Ce.__exportStar(sS(),Ae);Ce.__exportStar(oS(),Ae)});var Du=u(Mu=>{"use strict";Object.defineProperty(Mu,"__esModule",{value:!0});Mu.RDSDataServiceException=void 0;var z1=C(),Ms=class extends z1.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,Ms.prototype)}};n(Ms,"RDSDataServiceException");Mu.RDSDataServiceException=Ms});var ri=u(y=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});y.ExecuteSqlResponseFilterSensitiveLog=y.SqlStatementResultFilterSensitiveLog=y.ResultFrameFilterSensitiveLog=y.ExecuteStatementResponseFilterSensitiveLog=y._RecordFilterSensitiveLog=y.BatchExecuteStatementResponseFilterSensitiveLog=y.BatchExecuteStatementRequestFilterSensitiveLog=y.StructValueFilterSensitiveLog=y.ExecuteStatementRequestFilterSensitiveLog=y.ValueFilterSensitiveLog=y.UpdateResultFilterSensitiveLog=y.SqlParameterFilterSensitiveLog=y.FieldFilterSensitiveLog=y.ArrayValueFilterSensitiveLog=y.RollbackTransactionResponseFilterSensitiveLog=y.RollbackTransactionRequestFilterSensitiveLog=y.ResultSetOptionsFilterSensitiveLog=y.ResultSetMetadataFilterSensitiveLog=y.ExecuteSqlRequestFilterSensitiveLog=y.CommitTransactionResponseFilterSensitiveLog=y.CommitTransactionRequestFilterSensitiveLog=y.ColumnMetadataFilterSensitiveLog=y.BeginTransactionResponseFilterSensitiveLog=y.BeginTransactionRequestFilterSensitiveLog=y.Value=y.Field=y.ArrayValue=y.LongReturnType=y.RecordsFormatType=y.DecimalReturnType=y.NotFoundException=y.StatementTimeoutException=y.ServiceUnavailableError=y.InternalServerErrorException=y.ForbiddenException=y.TypeHint=y.BadRequestException=y.AccessDeniedException=void 0;var zn=Du(),Ds=class extends zn.RDSDataServiceException{constructor(e){super({name:"AccessDeniedException",$fault:"client",...e}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,Ds.prototype)}};n(Ds,"AccessDeniedException");y.AccessDeniedException=Ds;var Fs=class extends zn.RDSDataServiceException{constructor(e){super({name:"BadRequestException",$fault:"client",...e}),this.name="BadRequestException",this.$fault="client",Object.setPrototypeOf(this,Fs.prototype)}};n(Fs,"BadRequestException");y.BadRequestException=Fs;var U1;(function(t){t.DATE="DATE",t.DECIMAL="DECIMAL",t.JSON="JSON",t.TIME="TIME",t.TIMESTAMP="TIMESTAMP",t.UUID="UUID"})(U1=y.TypeHint||(y.TypeHint={}));var Ls=class extends zn.RDSDataServiceException{constructor(e){super({name:"ForbiddenException",$fault:"client",...e}),this.name="ForbiddenException",this.$fault="client",Object.setPrototypeOf(this,Ls.prototype)}};n(Ls,"ForbiddenException");y.ForbiddenException=Ls;var zs=class extends zn.RDSDataServiceException{constructor(e){super({name:"InternalServerErrorException",$fault:"server",...e}),this.name="InternalServerErrorException",this.$fault="server",Object.setPrototypeOf(this,zs.prototype)}};n(zs,"InternalServerErrorException");y.InternalServerErrorException=zs;var Us=class extends zn.RDSDataServiceException{constructor(e){super({name:"ServiceUnavailableError",$fault:"server",...e}),this.name="ServiceUnavailableError",this.$fault="server",Object.setPrototypeOf(this,Us.prototype)}};n(Us,"ServiceUnavailableError");y.ServiceUnavailableError=Us;var Ws=class extends zn.RDSDataServiceException{constructor(e){super({name:"StatementTimeoutException",$fault:"client",...e}),this.name="StatementTimeoutException",this.$fault="client",Object.setPrototypeOf(this,Ws.prototype),this.dbConnectionId=e.dbConnectionId}};n(Ws,"StatementTimeoutException");y.StatementTimeoutException=Ws;var js=class extends zn.RDSDataServiceException{constructor(e){super({name:"NotFoundException",$fault:"client",...e}),this.name="NotFoundException",this.$fault="client",Object.setPrototypeOf(this,js.prototype)}};n(js,"NotFoundException");y.NotFoundException=js;var W1;(function(t){t.DOUBLE_OR_LONG="DOUBLE_OR_LONG",t.STRING="STRING"})(W1=y.DecimalReturnType||(y.DecimalReturnType={}));var j1;(function(t){t.JSON="JSON",t.NONE="NONE"})(j1=y.RecordsFormatType||(y.RecordsFormatType={}));var V1;(function(t){t.LONG="LONG",t.STRING="STRING"})(V1=y.LongReturnType||(y.LongReturnType={}));var $1;(function(t){t.visit=(e,r)=>e.booleanValues!==void 0?r.booleanValues(e.booleanValues):e.longValues!==void 0?r.longValues(e.longValues):e.doubleValues!==void 0?r.doubleValues(e.doubleValues):e.stringValues!==void 0?r.stringValues(e.stringValues):e.arrayValues!==void 0?r.arrayValues(e.arrayValues):r._(e.$unknown[0],e.$unknown[1])})($1=y.ArrayValue||(y.ArrayValue={}));var H1;(function(t){t.visit=(e,r)=>e.isNull!==void 0?r.isNull(e.isNull):e.booleanValue!==void 0?r.booleanValue(e.booleanValue):e.longValue!==void 0?r.longValue(e.longValue):e.doubleValue!==void 0?r.doubleValue(e.doubleValue):e.stringValue!==void 0?r.stringValue(e.stringValue):e.blobValue!==void 0?r.blobValue(e.blobValue):e.arrayValue!==void 0?r.arrayValue(e.arrayValue):r._(e.$unknown[0],e.$unknown[1])})(H1=y.Field||(y.Field={}));var G1;(function(t){t.visit=(e,r)=>e.isNull!==void 0?r.isNull(e.isNull):e.bitValue!==void 0?r.bitValue(e.bitValue):e.bigIntValue!==void 0?r.bigIntValue(e.bigIntValue):e.intValue!==void 0?r.intValue(e.intValue):e.doubleValue!==void 0?r.doubleValue(e.doubleValue):e.realValue!==void 0?r.realValue(e.realValue):e.stringValue!==void 0?r.stringValue(e.stringValue):e.blobValue!==void 0?r.blobValue(e.blobValue):e.arrayValues!==void 0?r.arrayValues(e.arrayValues):e.structValue!==void 0?r.structValue(e.structValue):r._(e.$unknown[0],e.$unknown[1])})(G1=y.Value||(y.Value={}));var B1=n(t=>({...t}),"BeginTransactionRequestFilterSensitiveLog");y.BeginTransactionRequestFilterSensitiveLog=B1;var J1=n(t=>({...t}),"BeginTransactionResponseFilterSensitiveLog");y.BeginTransactionResponseFilterSensitiveLog=J1;var K1=n(t=>({...t}),"ColumnMetadataFilterSensitiveLog");y.ColumnMetadataFilterSensitiveLog=K1;var Y1=n(t=>({...t}),"CommitTransactionRequestFilterSensitiveLog");y.CommitTransactionRequestFilterSensitiveLog=Y1;var Q1=n(t=>({...t}),"CommitTransactionResponseFilterSensitiveLog");y.CommitTransactionResponseFilterSensitiveLog=Q1;var X1=n(t=>({...t}),"ExecuteSqlRequestFilterSensitiveLog");y.ExecuteSqlRequestFilterSensitiveLog=X1;var Z1=n(t=>({...t}),"ResultSetMetadataFilterSensitiveLog");y.ResultSetMetadataFilterSensitiveLog=Z1;var ek=n(t=>({...t}),"ResultSetOptionsFilterSensitiveLog");y.ResultSetOptionsFilterSensitiveLog=ek;var tk=n(t=>({...t}),"RollbackTransactionRequestFilterSensitiveLog");y.RollbackTransactionRequestFilterSensitiveLog=tk;var rk=n(t=>({...t}),"RollbackTransactionResponseFilterSensitiveLog");y.RollbackTransactionResponseFilterSensitiveLog=rk;var ik=n(t=>{if(t.booleanValues!==void 0)return{booleanValues:t.booleanValues};if(t.longValues!==void 0)return{longValues:t.longValues};if(t.doubleValues!==void 0)return{doubleValues:t.doubleValues};if(t.stringValues!==void 0)return{stringValues:t.stringValues};if(t.arrayValues!==void 0)return{arrayValues:t.arrayValues.map(e=>(0,y.ArrayValueFilterSensitiveLog)(e))};if(t.$unknown!==void 0)return{[t.$unknown[0]]:"UNKNOWN"}},"ArrayValueFilterSensitiveLog");y.ArrayValueFilterSensitiveLog=ik;var nk=n(t=>{if(t.isNull!==void 0)return{isNull:t.isNull};if(t.booleanValue!==void 0)return{booleanValue:t.booleanValue};if(t.longValue!==void 0)return{longValue:t.longValue};if(t.doubleValue!==void 0)return{doubleValue:t.doubleValue};if(t.stringValue!==void 0)return{stringValue:t.stringValue};if(t.blobValue!==void 0)return{blobValue:t.blobValue};if(t.arrayValue!==void 0)return{arrayValue:(0,y.ArrayValueFilterSensitiveLog)(t.arrayValue)};if(t.$unknown!==void 0)return{[t.$unknown[0]]:"UNKNOWN"}},"FieldFilterSensitiveLog");y.FieldFilterSensitiveLog=nk;var sk=n(t=>({...t,...t.value&&{value:(0,y.FieldFilterSensitiveLog)(t.value)}}),"SqlParameterFilterSensitiveLog");y.SqlParameterFilterSensitiveLog=sk;var ok=n(t=>({...t,...t.generatedFields&&{generatedFields:t.generatedFields.map(e=>(0,y.FieldFilterSensitiveLog)(e))}}),"UpdateResultFilterSensitiveLog");y.UpdateResultFilterSensitiveLog=ok;var ak=n(t=>{if(t.isNull!==void 0)return{isNull:t.isNull};if(t.bitValue!==void 0)return{bitValue:t.bitValue};if(t.bigIntValue!==void 0)return{bigIntValue:t.bigIntValue};if(t.intValue!==void 0)return{intValue:t.intValue};if(t.doubleValue!==void 0)return{doubleValue:t.doubleValue};if(t.realValue!==void 0)return{realValue:t.realValue};if(t.stringValue!==void 0)return{stringValue:t.stringValue};if(t.blobValue!==void 0)return{blobValue:t.blobValue};if(t.arrayValues!==void 0)return{arrayValues:t.arrayValues.map(e=>(0,y.ValueFilterSensitiveLog)(e))};if(t.structValue!==void 0)return{structValue:(0,y.StructValueFilterSensitiveLog)(t.structValue)};if(t.$unknown!==void 0)return{[t.$unknown[0]]:"UNKNOWN"}},"ValueFilterSensitiveLog");y.ValueFilterSensitiveLog=ak;var ck=n(t=>({...t,...t.parameters&&{parameters:t.parameters.map(e=>(0,y.SqlParameterFilterSensitiveLog)(e))}}),"ExecuteStatementRequestFilterSensitiveLog");y.ExecuteStatementRequestFilterSensitiveLog=ck;var dk=n(t=>({...t,...t.attributes&&{attributes:t.attributes.map(e=>(0,y.ValueFilterSensitiveLog)(e))}}),"StructValueFilterSensitiveLog");y.StructValueFilterSensitiveLog=dk;var uk=n(t=>({...t,...t.parameterSets&&{parameterSets:t.parameterSets.map(e=>e.map(r=>(0,y.SqlParameterFilterSensitiveLog)(r)))}}),"BatchExecuteStatementRequestFilterSensitiveLog");y.BatchExecuteStatementRequestFilterSensitiveLog=uk;var lk=n(t=>({...t,...t.updateResults&&{updateResults:t.updateResults.map(e=>(0,y.UpdateResultFilterSensitiveLog)(e))}}),"BatchExecuteStatementResponseFilterSensitiveLog");y.BatchExecuteStatementResponseFilterSensitiveLog=lk;var pk=n(t=>({...t,...t.values&&{values:t.values.map(e=>(0,y.ValueFilterSensitiveLog)(e))}}),"_RecordFilterSensitiveLog");y._RecordFilterSensitiveLog=pk;var fk=n(t=>({...t,...t.records&&{records:t.records.map(e=>e.map(r=>(0,y.FieldFilterSensitiveLog)(r)))},...t.generatedFields&&{generatedFields:t.generatedFields.map(e=>(0,y.FieldFilterSensitiveLog)(e))}}),"ExecuteStatementResponseFilterSensitiveLog");y.ExecuteStatementResponseFilterSensitiveLog=fk;var mk=n(t=>({...t,...t.records&&{records:t.records.map(e=>(0,y._RecordFilterSensitiveLog)(e))}}),"ResultFrameFilterSensitiveLog");y.ResultFrameFilterSensitiveLog=mk;var hk=n(t=>({...t}),"SqlStatementResultFilterSensitiveLog");y.SqlStatementResultFilterSensitiveLog=hk;var _k=n(t=>({...t}),"ExecuteSqlResponseFilterSensitiveLog");y.ExecuteSqlResponseFilterSensitiveLog=_k});var yy=u(Sc=>{"use strict";Object.defineProperty(Sc,"__esModule",{value:!0});Sc.FieldPosition=void 0;var yk;(function(t){t[t.HEADER=0]="HEADER",t[t.TRAILER=1]="TRAILER"})(yk=Sc.FieldPosition||(Sc.FieldPosition={}))});var aS=u(Lu=>{"use strict";Object.defineProperty(Lu,"__esModule",{value:!0});Lu.Field=void 0;var gk=yy(),Fu=class{constructor({name:e,kind:r=gk.FieldPosition.HEADER,values:i=[]}){this.name=e,this.kind=r,this.values=i}add(e){this.values.push(e)}set(e){this.values=e}remove(e){this.values=this.values.filter(r=>r!==e)}toString(){return this.values.map(e=>e.includes(",")||e.includes(" ")?`"${e}"`:e).join(", ")}get(){return this.values}};n(Fu,"Field");Lu.Field=Fu});var cS=u(Uu=>{"use strict";Object.defineProperty(Uu,"__esModule",{value:!0});Uu.Fields=void 0;var zu=class{constructor({fields:e=[],encoding:r="utf-8"}){this.entries={},e.forEach(this.setField.bind(this)),this.encoding=r}setField(e){this.entries[e.name]=e}getField(e){return this.entries[e]}removeField(e){delete this.entries[e]}getByType(e){return Object.values(this.entries).filter(r=>r.kind===e)}};n(zu,"Fields");Uu.Fields=zu});var uS=u(dS=>{"use strict";Object.defineProperty(dS,"__esModule",{value:!0})});var lS=u(Wu=>{"use strict";Object.defineProperty(Wu,"__esModule",{value:!0});Wu.HttpRequest=void 0;var Vs=class{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/"}static isInstance(e){if(!e)return!1;let r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){let e=new Vs({...this,headers:{...this.headers}});return e.query&&(e.query=wk(e.query)),e}};n(Vs,"HttpRequest");Wu.HttpRequest=Vs;function wk(t){return Object.keys(t).reduce((e,r)=>{let i=t[r];return{...e,[r]:Array.isArray(i)?[...i]:i}},{})}n(wk,"cloneQuery")});var pS=u(Vu=>{"use strict";Object.defineProperty(Vu,"__esModule",{value:!0});Vu.HttpResponse=void 0;var ju=class{constructor(e){this.statusCode=e.statusCode,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;let r=e;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};n(ju,"HttpResponse");Vu.HttpResponse=ju});var fS=u($u=>{"use strict";Object.defineProperty($u,"__esModule",{value:!0});$u.isValidHostname=void 0;function Ek(t){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(t)}n(Ek,"isValidHostname");$u.isValidHostname=Ek});var tt=u(ii=>{"use strict";Object.defineProperty(ii,"__esModule",{value:!0});var Un=(A(),b(x));Un.__exportStar(aS(),ii);Un.__exportStar(yy(),ii);Un.__exportStar(cS(),ii);Un.__exportStar(uS(),ii);Un.__exportStar(lS(),ii);Un.__exportStar(pS(),ii);Un.__exportStar(fS(),ii)});var jn=u(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.deserializeAws_restJson1RollbackTransactionCommand=se.deserializeAws_restJson1ExecuteStatementCommand=se.deserializeAws_restJson1ExecuteSqlCommand=se.deserializeAws_restJson1CommitTransactionCommand=se.deserializeAws_restJson1BeginTransactionCommand=se.deserializeAws_restJson1BatchExecuteStatementCommand=se.serializeAws_restJson1RollbackTransactionCommand=se.serializeAws_restJson1ExecuteStatementCommand=se.serializeAws_restJson1ExecuteSqlCommand=se.serializeAws_restJson1CommitTransactionCommand=se.serializeAws_restJson1BeginTransactionCommand=se.serializeAws_restJson1BatchExecuteStatementCommand=void 0;var $s=tt(),E=C(),ni=ri(),Hs=Du(),vk=n(async(t,e)=>{let{hostname:r,protocol:i="https",port:s,path:o}=await e.endpoint(),a={"content-type":"application/json"},c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/BatchExecute`,l;return l=JSON.stringify({...t.database!=null&&{database:t.database},...t.parameterSets!=null&&{parameterSets:Gk(t.parameterSets,e)},...t.resourceArn!=null&&{resourceArn:t.resourceArn},...t.schema!=null&&{schema:t.schema},...t.secretArn!=null&&{secretArn:t.secretArn},...t.sql!=null&&{sql:t.sql},...t.transactionId!=null&&{transactionId:t.transactionId}}),new $s.HttpRequest({protocol:i,hostname:r,port:s,method:"POST",headers:a,path:c,body:l})},"serializeAws_restJson1BatchExecuteStatementCommand");se.serializeAws_restJson1BatchExecuteStatementCommand=vk;var Sk=n(async(t,e)=>{let{hostname:r,protocol:i="https",port:s,path:o}=await e.endpoint(),a={"content-type":"application/json"},c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/BeginTransaction`,l;return l=JSON.stringify({...t.database!=null&&{database:t.database},...t.resourceArn!=null&&{resourceArn:t.resourceArn},...t.schema!=null&&{schema:t.schema},...t.secretArn!=null&&{secretArn:t.secretArn}}),new $s.HttpRequest({protocol:i,hostname:r,port:s,method:"POST",headers:a,path:c,body:l})},"serializeAws_restJson1BeginTransactionCommand");se.serializeAws_restJson1BeginTransactionCommand=Sk;var Nk=n(async(t,e)=>{let{hostname:r,protocol:i="https",port:s,path:o}=await e.endpoint(),a={"content-type":"application/json"},c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/CommitTransaction`,l;return l=JSON.stringify({...t.resourceArn!=null&&{resourceArn:t.resourceArn},...t.secretArn!=null&&{secretArn:t.secretArn},...t.transactionId!=null&&{transactionId:t.transactionId}}),new $s.HttpRequest({protocol:i,hostname:r,port:s,method:"POST",headers:a,path:c,body:l})},"serializeAws_restJson1CommitTransactionCommand");se.serializeAws_restJson1CommitTransactionCommand=Nk;var bk=n(async(t,e)=>{let{hostname:r,protocol:i="https",port:s,path:o}=await e.endpoint(),a={"content-type":"application/json"},c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/ExecuteSql`,l;return l=JSON.stringify({...t.awsSecretStoreArn!=null&&{awsSecretStoreArn:t.awsSecretStoreArn},...t.database!=null&&{database:t.database},...t.dbClusterOrInstanceArn!=null&&{dbClusterOrInstanceArn:t.dbClusterOrInstanceArn},...t.schema!=null&&{schema:t.schema},...t.sqlStatements!=null&&{sqlStatements:t.sqlStatements}}),new $s.HttpRequest({protocol:i,hostname:r,port:s,method:"POST",headers:a,path:c,body:l})},"serializeAws_restJson1ExecuteSqlCommand");se.serializeAws_restJson1ExecuteSqlCommand=bk;var xk=n(async(t,e)=>{let{hostname:r,protocol:i="https",port:s,path:o}=await e.endpoint(),a={"content-type":"application/json"},c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/Execute`,l;return l=JSON.stringify({...t.continueAfterTimeout!=null&&{continueAfterTimeout:t.continueAfterTimeout},...t.database!=null&&{database:t.database},...t.formatRecordsAs!=null&&{formatRecordsAs:t.formatRecordsAs},...t.includeResultMetadata!=null&&{includeResultMetadata:t.includeResultMetadata},...t.parameters!=null&&{parameters:_S(t.parameters,e)},...t.resourceArn!=null&&{resourceArn:t.resourceArn},...t.resultSetOptions!=null&&{resultSetOptions:$k(t.resultSetOptions,e)},...t.schema!=null&&{schema:t.schema},...t.secretArn!=null&&{secretArn:t.secretArn},...t.sql!=null&&{sql:t.sql},...t.transactionId!=null&&{transactionId:t.transactionId}}),new $s.HttpRequest({protocol:i,hostname:r,port:s,method:"POST",headers:a,path:c,body:l})},"serializeAws_restJson1ExecuteStatementCommand");se.serializeAws_restJson1ExecuteStatementCommand=xk;var Ak=n(async(t,e)=>{let{hostname:r,protocol:i="https",port:s,path:o}=await e.endpoint(),a={"content-type":"application/json"},c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/RollbackTransaction`,l;return l=JSON.stringify({...t.resourceArn!=null&&{resourceArn:t.resourceArn},...t.secretArn!=null&&{secretArn:t.secretArn},...t.transactionId!=null&&{transactionId:t.transactionId}}),new $s.HttpRequest({protocol:i,hostname:r,port:s,method:"POST",headers:a,path:c,body:l})},"serializeAws_restJson1RollbackTransactionCommand");se.serializeAws_restJson1RollbackTransactionCommand=Ak;var Tk=n(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return Ok(t,e);let r=vt({$metadata:St(t)}),i=(0,E.expectNonNull)((0,E.expectObject)(await Wn(t.body,e)),"body");return i.updateResults!=null&&(r.updateResults=lM(i.updateResults,e)),r},"deserializeAws_restJson1BatchExecuteStatementCommand");se.deserializeAws_restJson1BatchExecuteStatementCommand=Tk;var Ok=n(async(t,e)=>{let r={...t,body:await Qs(t.body,e)},i=Xs(t,r.body);switch(i){case"AccessDeniedException":case"com.amazonaws.rdsdata#AccessDeniedException":throw await Gs(r,e);case"BadRequestException":case"com.amazonaws.rdsdata#BadRequestException":throw await Bs(r,e);case"ForbiddenException":case"com.amazonaws.rdsdata#ForbiddenException":throw await Js(r,e);case"InternalServerErrorException":case"com.amazonaws.rdsdata#InternalServerErrorException":throw await Ks(r,e);case"ServiceUnavailableError":case"com.amazonaws.rdsdata#ServiceUnavailableError":throw await Ys(r,e);case"StatementTimeoutException":case"com.amazonaws.rdsdata#StatementTimeoutException":throw await Nc(r,e);default:let s=r.body;(0,E.throwDefaultError)({output:t,parsedBody:s,exceptionCtor:Hs.RDSDataServiceException,errorCode:i})}},"deserializeAws_restJson1BatchExecuteStatementCommandError"),Pk=n(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return Rk(t,e);let r=vt({$metadata:St(t)}),i=(0,E.expectNonNull)((0,E.expectObject)(await Wn(t.body,e)),"body");return i.transactionId!=null&&(r.transactionId=(0,E.expectString)(i.transactionId)),r},"deserializeAws_restJson1BeginTransactionCommand");se.deserializeAws_restJson1BeginTransactionCommand=Pk;var Rk=n(async(t,e)=>{let r={...t,body:await Qs(t.body,e)},i=Xs(t,r.body);switch(i){case"AccessDeniedException":case"com.amazonaws.rdsdata#AccessDeniedException":throw await Gs(r,e);case"BadRequestException":case"com.amazonaws.rdsdata#BadRequestException":throw await Bs(r,e);case"ForbiddenException":case"com.amazonaws.rdsdata#ForbiddenException":throw await Js(r,e);case"InternalServerErrorException":case"com.amazonaws.rdsdata#InternalServerErrorException":throw await Ks(r,e);case"ServiceUnavailableError":case"com.amazonaws.rdsdata#ServiceUnavailableError":throw await Ys(r,e);case"StatementTimeoutException":case"com.amazonaws.rdsdata#StatementTimeoutException":throw await Nc(r,e);default:let s=r.body;(0,E.throwDefaultError)({output:t,parsedBody:s,exceptionCtor:Hs.RDSDataServiceException,errorCode:i})}},"deserializeAws_restJson1BeginTransactionCommandError"),Ik=n(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return qk(t,e);let r=vt({$metadata:St(t)}),i=(0,E.expectNonNull)((0,E.expectObject)(await Wn(t.body,e)),"body");return i.transactionStatus!=null&&(r.transactionStatus=(0,E.expectString)(i.transactionStatus)),r},"deserializeAws_restJson1CommitTransactionCommand");se.deserializeAws_restJson1CommitTransactionCommand=Ik;var qk=n(async(t,e)=>{let r={...t,body:await Qs(t.body,e)},i=Xs(t,r.body);switch(i){case"AccessDeniedException":case"com.amazonaws.rdsdata#AccessDeniedException":throw await Gs(r,e);case"BadRequestException":case"com.amazonaws.rdsdata#BadRequestException":throw await Bs(r,e);case"ForbiddenException":case"com.amazonaws.rdsdata#ForbiddenException":throw await Js(r,e);case"InternalServerErrorException":case"com.amazonaws.rdsdata#InternalServerErrorException":throw await Ks(r,e);case"NotFoundException":case"com.amazonaws.rdsdata#NotFoundException":throw await mS(r,e);case"ServiceUnavailableError":case"com.amazonaws.rdsdata#ServiceUnavailableError":throw await Ys(r,e);case"StatementTimeoutException":case"com.amazonaws.rdsdata#StatementTimeoutException":throw await Nc(r,e);default:let s=r.body;(0,E.throwDefaultError)({output:t,parsedBody:s,exceptionCtor:Hs.RDSDataServiceException,errorCode:i})}},"deserializeAws_restJson1CommitTransactionCommandError"),Ck=n(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return kk(t,e);let r=vt({$metadata:St(t)}),i=(0,E.expectNonNull)((0,E.expectObject)(await Wn(t.body,e)),"body");return i.sqlStatementResults!=null&&(r.sqlStatementResults=aM(i.sqlStatementResults,e)),r},"deserializeAws_restJson1ExecuteSqlCommand");se.deserializeAws_restJson1ExecuteSqlCommand=Ck;var kk=n(async(t,e)=>{let r={...t,body:await Qs(t.body,e)},i=Xs(t,r.body);switch(i){case"AccessDeniedException":case"com.amazonaws.rdsdata#AccessDeniedException":throw await Gs(r,e);case"BadRequestException":case"com.amazonaws.rdsdata#BadRequestException":throw await Bs(r,e);case"ForbiddenException":case"com.amazonaws.rdsdata#ForbiddenException":throw await Js(r,e);case"InternalServerErrorException":case"com.amazonaws.rdsdata#InternalServerErrorException":throw await Ks(r,e);case"ServiceUnavailableError":case"com.amazonaws.rdsdata#ServiceUnavailableError":throw await Ys(r,e);default:let s=r.body;(0,E.throwDefaultError)({output:t,parsedBody:s,exceptionCtor:Hs.RDSDataServiceException,errorCode:i})}},"deserializeAws_restJson1ExecuteSqlCommandError"),Mk=n(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return Dk(t,e);let r=vt({$metadata:St(t)}),i=(0,E.expectNonNull)((0,E.expectObject)(await Wn(t.body,e)),"body");return i.columnMetadata!=null&&(r.columnMetadata=wS(i.columnMetadata,e)),i.formattedRecords!=null&&(r.formattedRecords=(0,E.expectString)(i.formattedRecords)),i.generatedFields!=null&&(r.generatedFields=gy(i.generatedFields,e)),i.numberOfRecordsUpdated!=null&&(r.numberOfRecordsUpdated=(0,E.expectLong)(i.numberOfRecordsUpdated)),i.records!=null&&(r.records=sM(i.records,e)),r},"deserializeAws_restJson1ExecuteStatementCommand");se.deserializeAws_restJson1ExecuteStatementCommand=Mk;var Dk=n(async(t,e)=>{let r={...t,body:await Qs(t.body,e)},i=Xs(t,r.body);switch(i){case"AccessDeniedException":case"com.amazonaws.rdsdata#AccessDeniedException":throw await Gs(r,e);case"BadRequestException":case"com.amazonaws.rdsdata#BadRequestException":throw await Bs(r,e);case"ForbiddenException":case"com.amazonaws.rdsdata#ForbiddenException":throw await Js(r,e);case"InternalServerErrorException":case"com.amazonaws.rdsdata#InternalServerErrorException":throw await Ks(r,e);case"ServiceUnavailableError":case"com.amazonaws.rdsdata#ServiceUnavailableError":throw await Ys(r,e);case"StatementTimeoutException":case"com.amazonaws.rdsdata#StatementTimeoutException":throw await Nc(r,e);default:let s=r.body;(0,E.throwDefaultError)({output:t,parsedBody:s,exceptionCtor:Hs.RDSDataServiceException,errorCode:i})}},"deserializeAws_restJson1ExecuteStatementCommandError"),Fk=n(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return Lk(t,e);let r=vt({$metadata:St(t)}),i=(0,E.expectNonNull)((0,E.expectObject)(await Wn(t.body,e)),"body");return i.transactionStatus!=null&&(r.transactionStatus=(0,E.expectString)(i.transactionStatus)),r},"deserializeAws_restJson1RollbackTransactionCommand");se.deserializeAws_restJson1RollbackTransactionCommand=Fk;var Lk=n(async(t,e)=>{let r={...t,body:await Qs(t.body,e)},i=Xs(t,r.body);switch(i){case"AccessDeniedException":case"com.amazonaws.rdsdata#AccessDeniedException":throw await Gs(r,e);case"BadRequestException":case"com.amazonaws.rdsdata#BadRequestException":throw await Bs(r,e);case"ForbiddenException":case"com.amazonaws.rdsdata#ForbiddenException":throw await Js(r,e);case"InternalServerErrorException":case"com.amazonaws.rdsdata#InternalServerErrorException":throw await Ks(r,e);case"NotFoundException":case"com.amazonaws.rdsdata#NotFoundException":throw await mS(r,e);case"ServiceUnavailableError":case"com.amazonaws.rdsdata#ServiceUnavailableError":throw await Ys(r,e);case"StatementTimeoutException":case"com.amazonaws.rdsdata#StatementTimeoutException":throw await Nc(r,e);default:let s=r.body;(0,E.throwDefaultError)({output:t,parsedBody:s,exceptionCtor:Hs.RDSDataServiceException,errorCode:i})}},"deserializeAws_restJson1RollbackTransactionCommandError"),vt=E.map,Gs=n(async(t,e)=>{let r=vt({}),i=t.body;i.message!=null&&(r.message=(0,E.expectString)(i.message));let s=new ni.AccessDeniedException({$metadata:St(t),...r});return(0,E.decorateServiceException)(s,t.body)},"deserializeAws_restJson1AccessDeniedExceptionResponse"),Bs=n(async(t,e)=>{let r=vt({}),i=t.body;i.message!=null&&(r.message=(0,E.expectString)(i.message));let s=new ni.BadRequestException({$metadata:St(t),...r});return(0,E.decorateServiceException)(s,t.body)},"deserializeAws_restJson1BadRequestExceptionResponse"),Js=n(async(t,e)=>{let r=vt({}),i=t.body;i.message!=null&&(r.message=(0,E.expectString)(i.message));let s=new ni.ForbiddenException({$metadata:St(t),...r});return(0,E.decorateServiceException)(s,t.body)},"deserializeAws_restJson1ForbiddenExceptionResponse"),Ks=n(async(t,e)=>{let r=vt({}),i=t.body,s=new ni.InternalServerErrorException({$metadata:St(t),...r});return(0,E.decorateServiceException)(s,t.body)},"deserializeAws_restJson1InternalServerErrorExceptionResponse"),mS=n(async(t,e)=>{let r=vt({}),i=t.body;i.message!=null&&(r.message=(0,E.expectString)(i.message));let s=new ni.NotFoundException({$metadata:St(t),...r});return(0,E.decorateServiceException)(s,t.body)},"deserializeAws_restJson1NotFoundExceptionResponse"),Ys=n(async(t,e)=>{let r=vt({}),i=t.body,s=new ni.ServiceUnavailableError({$metadata:St(t),...r});return(0,E.decorateServiceException)(s,t.body)},"deserializeAws_restJson1ServiceUnavailableErrorResponse"),Nc=n(async(t,e)=>{let r=vt({}),i=t.body;i.dbConnectionId!=null&&(r.dbConnectionId=(0,E.expectLong)(i.dbConnectionId)),i.message!=null&&(r.message=(0,E.expectString)(i.message));let s=new ni.StatementTimeoutException({$metadata:St(t),...r});return(0,E.decorateServiceException)(s,t.body)},"deserializeAws_restJson1StatementTimeoutExceptionResponse"),zk=n((t,e)=>t.filter(r=>r!=null).map(r=>hS(r,e)),"serializeAws_restJson1ArrayOfArray"),hS=n((t,e)=>ni.ArrayValue.visit(t,{arrayValues:r=>({arrayValues:zk(r,e)}),booleanValues:r=>({booleanValues:Uk(r,e)}),doubleValues:r=>({doubleValues:Wk(r,e)}),longValues:r=>({longValues:Vk(r,e)}),stringValues:r=>({stringValues:Bk(r,e)}),_:(r,i)=>({name:i})}),"serializeAws_restJson1ArrayValue"),Uk=n((t,e)=>t.filter(r=>r!=null).map(r=>r),"serializeAws_restJson1BooleanArray"),Wk=n((t,e)=>t.filter(r=>r!=null).map(r=>(0,E.serializeFloat)(r)),"serializeAws_restJson1DoubleArray"),jk=n((t,e)=>ni.Field.visit(t,{arrayValue:r=>({arrayValue:hS(r,e)}),blobValue:r=>({blobValue:e.base64Encoder(r)}),booleanValue:r=>({booleanValue:r}),doubleValue:r=>({doubleValue:(0,E.serializeFloat)(r)}),isNull:r=>({isNull:r}),longValue:r=>({longValue:r}),stringValue:r=>({stringValue:r}),_:(r,i)=>({name:i})}),"serializeAws_restJson1Field"),Vk=n((t,e)=>t.filter(r=>r!=null).map(r=>r),"serializeAws_restJson1LongArray"),$k=n((t,e)=>({...t.decimalReturnType!=null&&{decimalReturnType:t.decimalReturnType},...t.longReturnType!=null&&{longReturnType:t.longReturnType}}),"serializeAws_restJson1ResultSetOptions"),Hk=n((t,e)=>({...t.name!=null&&{name:t.name},...t.typeHint!=null&&{typeHint:t.typeHint},...t.value!=null&&{value:jk(t.value,e)}}),"serializeAws_restJson1SqlParameter"),Gk=n((t,e)=>t.filter(r=>r!=null).map(r=>_S(r,e)),"serializeAws_restJson1SqlParameterSets"),_S=n((t,e)=>t.filter(r=>r!=null).map(r=>Hk(r,e)),"serializeAws_restJson1SqlParametersList"),Bk=n((t,e)=>t.filter(r=>r!=null).map(r=>r),"serializeAws_restJson1StringArray"),Jk=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:yS((0,E.expectUnion)(i),e)),"deserializeAws_restJson1ArrayOfArray"),yS=n((t,e)=>t.arrayValues!=null?{arrayValues:Jk(t.arrayValues,e)}:t.booleanValues!=null?{booleanValues:Kk(t.booleanValues,e)}:t.doubleValues!=null?{doubleValues:Qk(t.doubleValues,e)}:t.longValues!=null?{longValues:Zk(t.longValues,e)}:t.stringValues!=null?{stringValues:cM(t.stringValues,e)}:{$unknown:Object.entries(t)[0]},"deserializeAws_restJson1ArrayValue"),gS=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:ES((0,E.expectUnion)(i),e)),"deserializeAws_restJson1ArrayValueList"),Kk=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:(0,E.expectBoolean)(i)),"deserializeAws_restJson1BooleanArray"),Yk=n((t,e)=>({arrayBaseColumnType:(0,E.expectInt32)(t.arrayBaseColumnType),isAutoIncrement:(0,E.expectBoolean)(t.isAutoIncrement),isCaseSensitive:(0,E.expectBoolean)(t.isCaseSensitive),isCurrency:(0,E.expectBoolean)(t.isCurrency),isSigned:(0,E.expectBoolean)(t.isSigned),label:(0,E.expectString)(t.label),name:(0,E.expectString)(t.name),nullable:(0,E.expectInt32)(t.nullable),precision:(0,E.expectInt32)(t.precision),scale:(0,E.expectInt32)(t.scale),schemaName:(0,E.expectString)(t.schemaName),tableName:(0,E.expectString)(t.tableName),type:(0,E.expectInt32)(t.type),typeName:(0,E.expectString)(t.typeName)}),"deserializeAws_restJson1ColumnMetadata"),Qk=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:(0,E.limitedParseDouble)(i)),"deserializeAws_restJson1DoubleArray"),Xk=n((t,e)=>t.arrayValue!=null?{arrayValue:yS((0,E.expectUnion)(t.arrayValue),e)}:t.blobValue!=null?{blobValue:e.base64Decoder(t.blobValue)}:(0,E.expectBoolean)(t.booleanValue)!==void 0?{booleanValue:(0,E.expectBoolean)(t.booleanValue)}:(0,E.limitedParseDouble)(t.doubleValue)!==void 0?{doubleValue:(0,E.limitedParseDouble)(t.doubleValue)}:(0,E.expectBoolean)(t.isNull)!==void 0?{isNull:(0,E.expectBoolean)(t.isNull)}:(0,E.expectLong)(t.longValue)!==void 0?{longValue:(0,E.expectLong)(t.longValue)}:(0,E.expectString)(t.stringValue)!==void 0?{stringValue:(0,E.expectString)(t.stringValue)}:{$unknown:Object.entries(t)[0]},"deserializeAws_restJson1Field"),gy=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:Xk((0,E.expectUnion)(i),e)),"deserializeAws_restJson1FieldList"),Zk=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:(0,E.expectLong)(i)),"deserializeAws_restJson1LongArray"),wS=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:Yk(i,e)),"deserializeAws_restJson1Metadata"),eM=n((t,e)=>({values:t.values!=null?nM(t.values,e):void 0}),"deserializeAws_restJson1_Record"),tM=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:eM(i,e)),"deserializeAws_restJson1Records"),rM=n((t,e)=>({records:t.records!=null?tM(t.records,e):void 0,resultSetMetadata:t.resultSetMetadata!=null?iM(t.resultSetMetadata,e):void 0}),"deserializeAws_restJson1ResultFrame"),iM=n((t,e)=>({columnCount:(0,E.expectLong)(t.columnCount),columnMetadata:t.columnMetadata!=null?wS(t.columnMetadata,e):void 0}),"deserializeAws_restJson1ResultSetMetadata"),nM=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:ES((0,E.expectUnion)(i),e)),"deserializeAws_restJson1Row"),sM=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:gy(i,e)),"deserializeAws_restJson1SqlRecords"),oM=n((t,e)=>({numberOfRecordsUpdated:(0,E.expectLong)(t.numberOfRecordsUpdated),resultFrame:t.resultFrame!=null?rM(t.resultFrame,e):void 0}),"deserializeAws_restJson1SqlStatementResult"),aM=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:oM(i,e)),"deserializeAws_restJson1SqlStatementResults"),cM=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:(0,E.expectString)(i)),"deserializeAws_restJson1StringArray"),dM=n((t,e)=>({attributes:t.attributes!=null?gS(t.attributes,e):void 0}),"deserializeAws_restJson1StructValue"),uM=n((t,e)=>({generatedFields:t.generatedFields!=null?gy(t.generatedFields,e):void 0}),"deserializeAws_restJson1UpdateResult"),lM=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:uM(i,e)),"deserializeAws_restJson1UpdateResults"),ES=n((t,e)=>t.arrayValues!=null?{arrayValues:gS(t.arrayValues,e)}:(0,E.expectLong)(t.bigIntValue)!==void 0?{bigIntValue:(0,E.expectLong)(t.bigIntValue)}:(0,E.expectBoolean)(t.bitValue)!==void 0?{bitValue:(0,E.expectBoolean)(t.bitValue)}:t.blobValue!=null?{blobValue:e.base64Decoder(t.blobValue)}:(0,E.limitedParseDouble)(t.doubleValue)!==void 0?{doubleValue:(0,E.limitedParseDouble)(t.doubleValue)}:(0,E.expectInt32)(t.intValue)!==void 0?{intValue:(0,E.expectInt32)(t.intValue)}:(0,E.expectBoolean)(t.isNull)!==void 0?{isNull:(0,E.expectBoolean)(t.isNull)}:(0,E.limitedParseFloat32)(t.realValue)!==void 0?{realValue:(0,E.limitedParseFloat32)(t.realValue)}:(0,E.expectString)(t.stringValue)!==void 0?{stringValue:(0,E.expectString)(t.stringValue)}:t.structValue!=null?{structValue:dM(t.structValue,e)}:{$unknown:Object.entries(t)[0]},"deserializeAws_restJson1Value"),St=n(t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),"deserializeMetadata"),pM=n((t=new Uint8Array,e)=>t instanceof Uint8Array?Promise.resolve(t):e.streamCollector(t)||Promise.resolve(new Uint8Array),"collectBody"),fM=n((t,e)=>pM(t,e).then(r=>e.utf8Encoder(r)),"collectBodyString"),Wn=n((t,e)=>fM(t,e).then(r=>r.length?JSON.parse(r):{}),"parseBody"),Qs=n(async(t,e)=>{let r=await Wn(t,e);return r.message=r.message??r.Message,r},"parseErrorBody"),Xs=n((t,e)=>{let r=n((o,a)=>Object.keys(o).find(c=>c.toLowerCase()===a.toLowerCase()),"findKey"),i=n(o=>{let a=o;return typeof a=="number"&&(a=a.toString()),a.indexOf(",")>=0&&(a=a.split(",")[0]),a.indexOf(":")>=0&&(a=a.split(":")[0]),a.indexOf("#")>=0&&(a=a.split("#")[1]),a},"sanitizeErrorCode"),s=r(t.headers,"x-amzn-errortype");if(s!==void 0)return i(t.headers[s]);if(e.code!==void 0)return i(e.code);if(e.__type!==void 0)return i(e.__type)},"loadRestJsonErrorCode")});var wy=u(Hu=>{"use strict";Object.defineProperty(Hu,"__esModule",{value:!0});Hu.BatchExecuteStatementCommand=void 0;var mM=ne(),hM=me(),_M=C(),vS=ri(),SS=jn(),Zs=class extends _M.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,hM.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,mM.getEndpointPlugin)(r,Zs.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"RDSDataClient",commandName:"BatchExecuteStatementCommand",inputFilterSensitiveLog:vS.BatchExecuteStatementRequestFilterSensitiveLog,outputFilterSensitiveLog:vS.BatchExecuteStatementResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,SS.serializeAws_restJson1BatchExecuteStatementCommand)(e,r)}deserialize(e,r){return(0,SS.deserializeAws_restJson1BatchExecuteStatementCommand)(e,r)}};n(Zs,"BatchExecuteStatementCommand");Hu.BatchExecuteStatementCommand=Zs});var Ey=u(Gu=>{"use strict";Object.defineProperty(Gu,"__esModule",{value:!0});Gu.BeginTransactionCommand=void 0;var yM=ne(),gM=me(),wM=C(),NS=ri(),bS=jn(),eo=class extends wM.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,gM.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,yM.getEndpointPlugin)(r,eo.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"RDSDataClient",commandName:"BeginTransactionCommand",inputFilterSensitiveLog:NS.BeginTransactionRequestFilterSensitiveLog,outputFilterSensitiveLog:NS.BeginTransactionResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,bS.serializeAws_restJson1BeginTransactionCommand)(e,r)}deserialize(e,r){return(0,bS.deserializeAws_restJson1BeginTransactionCommand)(e,r)}};n(eo,"BeginTransactionCommand");Gu.BeginTransactionCommand=eo});var vy=u(Bu=>{"use strict";Object.defineProperty(Bu,"__esModule",{value:!0});Bu.CommitTransactionCommand=void 0;var EM=ne(),vM=me(),SM=C(),xS=ri(),AS=jn(),to=class extends SM.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,vM.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,EM.getEndpointPlugin)(r,to.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"RDSDataClient",commandName:"CommitTransactionCommand",inputFilterSensitiveLog:xS.CommitTransactionRequestFilterSensitiveLog,outputFilterSensitiveLog:xS.CommitTransactionResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,AS.serializeAws_restJson1CommitTransactionCommand)(e,r)}deserialize(e,r){return(0,AS.deserializeAws_restJson1CommitTransactionCommand)(e,r)}};n(to,"CommitTransactionCommand");Bu.CommitTransactionCommand=to});var Sy=u(Ju=>{"use strict";Object.defineProperty(Ju,"__esModule",{value:!0});Ju.ExecuteSqlCommand=void 0;var NM=ne(),bM=me(),xM=C(),TS=ri(),OS=jn(),ro=class extends xM.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,bM.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,NM.getEndpointPlugin)(r,ro.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"RDSDataClient",commandName:"ExecuteSqlCommand",inputFilterSensitiveLog:TS.ExecuteSqlRequestFilterSensitiveLog,outputFilterSensitiveLog:TS.ExecuteSqlResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,OS.serializeAws_restJson1ExecuteSqlCommand)(e,r)}deserialize(e,r){return(0,OS.deserializeAws_restJson1ExecuteSqlCommand)(e,r)}};n(ro,"ExecuteSqlCommand");Ju.ExecuteSqlCommand=ro});var Ny=u(Ku=>{"use strict";Object.defineProperty(Ku,"__esModule",{value:!0});Ku.ExecuteStatementCommand=void 0;var AM=ne(),TM=me(),OM=C(),PS=ri(),RS=jn(),io=class extends OM.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,TM.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,AM.getEndpointPlugin)(r,io.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"RDSDataClient",commandName:"ExecuteStatementCommand",inputFilterSensitiveLog:PS.ExecuteStatementRequestFilterSensitiveLog,outputFilterSensitiveLog:PS.ExecuteStatementResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,RS.serializeAws_restJson1ExecuteStatementCommand)(e,r)}deserialize(e,r){return(0,RS.deserializeAws_restJson1ExecuteStatementCommand)(e,r)}};n(io,"ExecuteStatementCommand");Ku.ExecuteStatementCommand=io});var by=u(Yu=>{"use strict";Object.defineProperty(Yu,"__esModule",{value:!0});Yu.RollbackTransactionCommand=void 0;var PM=ne(),RM=me(),IM=C(),IS=ri(),qS=jn(),no=class extends IM.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,RM.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,PM.getEndpointPlugin)(r,no.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"RDSDataClient",commandName:"RollbackTransactionCommand",inputFilterSensitiveLog:IS.RollbackTransactionRequestFilterSensitiveLog,outputFilterSensitiveLog:IS.RollbackTransactionResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,qS.serializeAws_restJson1RollbackTransactionCommand)(e,r)}deserialize(e,r){return(0,qS.deserializeAws_restJson1RollbackTransactionCommand)(e,r)}};n(no,"RollbackTransactionCommand");Yu.RollbackTransactionCommand=no});var CS=u(Vn=>{"use strict";Object.defineProperty(Vn,"__esModule",{value:!0});Vn.booleanSelector=Vn.SelectorType=void 0;var qM;(function(t){t.ENV="env",t.CONFIG="shared config entry"})(qM=Vn.SelectorType||(Vn.SelectorType={}));var CM=n((t,e,r)=>{if(e in t){if(t[e]==="true")return!0;if(t[e]==="false")return!1;throw new Error(`Cannot load ${r} "${e}". Expected "true" or "false", got ${t[e]}.`)}},"booleanSelector");Vn.booleanSelector=CM});var Ay=u(xy=>{"use strict";Object.defineProperty(xy,"__esModule",{value:!0});var kM=(A(),b(x));kM.__exportStar(CS(),xy)});var kS=u(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});Rt.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS=Rt.DEFAULT_USE_DUALSTACK_ENDPOINT=Rt.CONFIG_USE_DUALSTACK_ENDPOINT=Rt.ENV_USE_DUALSTACK_ENDPOINT=void 0;var Qu=Ay();Rt.ENV_USE_DUALSTACK_ENDPOINT="AWS_USE_DUALSTACK_ENDPOINT";Rt.CONFIG_USE_DUALSTACK_ENDPOINT="use_dualstack_endpoint";Rt.DEFAULT_USE_DUALSTACK_ENDPOINT=!1;Rt.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS={environmentVariableSelector:t=>(0,Qu.booleanSelector)(t,Rt.ENV_USE_DUALSTACK_ENDPOINT,Qu.SelectorType.ENV),configFileSelector:t=>(0,Qu.booleanSelector)(t,Rt.CONFIG_USE_DUALSTACK_ENDPOINT,Qu.SelectorType.CONFIG),default:!1}});var MS=u(It=>{"use strict";Object.defineProperty(It,"__esModule",{value:!0});It.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS=It.DEFAULT_USE_FIPS_ENDPOINT=It.CONFIG_USE_FIPS_ENDPOINT=It.ENV_USE_FIPS_ENDPOINT=void 0;var Xu=Ay();It.ENV_USE_FIPS_ENDPOINT="AWS_USE_FIPS_ENDPOINT";It.CONFIG_USE_FIPS_ENDPOINT="use_fips_endpoint";It.DEFAULT_USE_FIPS_ENDPOINT=!1;It.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS={environmentVariableSelector:t=>(0,Xu.booleanSelector)(t,It.ENV_USE_FIPS_ENDPOINT,Xu.SelectorType.ENV),configFileSelector:t=>(0,Xu.booleanSelector)(t,It.CONFIG_USE_FIPS_ENDPOINT,Xu.SelectorType.CONFIG),default:!1}});var FS=u(Zu=>{"use strict";Object.defineProperty(Zu,"__esModule",{value:!0});Zu.resolveCustomEndpointsConfig=void 0;var DS=Fn(),MM=n(t=>{var e,r;let{endpoint:i,urlParser:s}=t;return{...t,tls:(e=t.tls)!==null&&e!==void 0?e:!0,endpoint:(0,DS.normalizeProvider)(typeof i=="string"?s(i):i),isCustomEndpoint:!0,useDualstackEndpoint:(0,DS.normalizeProvider)((r=t.useDualstackEndpoint)!==null&&r!==void 0?r:!1)}},"resolveCustomEndpointsConfig");Zu.resolveCustomEndpointsConfig=MM});var LS=u(el=>{"use strict";Object.defineProperty(el,"__esModule",{value:!0});el.getEndpointFromRegion=void 0;var DM=n(async t=>{var e;let{tls:r=!0}=t,i=await t.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(i))throw new Error("Invalid region in client config");let o=await t.useDualstackEndpoint(),a=await t.useFipsEndpoint(),{hostname:c}=(e=await t.regionInfoProvider(i,{useDualstackEndpoint:o,useFipsEndpoint:a}))!==null&&e!==void 0?e:{};if(!c)throw new Error("Cannot resolve hostname from client config");return t.urlParser(`${r?"https:":"http:"}//${c}`)},"getEndpointFromRegion");el.getEndpointFromRegion=DM});var US=u(tl=>{"use strict";Object.defineProperty(tl,"__esModule",{value:!0});tl.resolveEndpointsConfig=void 0;var zS=Fn(),FM=LS(),LM=n(t=>{var e,r;let i=(0,zS.normalizeProvider)((e=t.useDualstackEndpoint)!==null&&e!==void 0?e:!1),{endpoint:s,useFipsEndpoint:o,urlParser:a}=t;return{...t,tls:(r=t.tls)!==null&&r!==void 0?r:!0,endpoint:s?(0,zS.normalizeProvider)(typeof s=="string"?a(s):s):()=>(0,FM.getEndpointFromRegion)({...t,useDualstackEndpoint:i,useFipsEndpoint:o}),isCustomEndpoint:!!s,useDualstackEndpoint:i}},"resolveEndpointsConfig");tl.resolveEndpointsConfig=LM});var WS=u(so=>{"use strict";Object.defineProperty(so,"__esModule",{value:!0});var rl=(A(),b(x));rl.__exportStar(kS(),so);rl.__exportStar(MS(),so);rl.__exportStar(FS(),so);rl.__exportStar(US(),so)});var jS=u(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});qt.NODE_REGION_CONFIG_FILE_OPTIONS=qt.NODE_REGION_CONFIG_OPTIONS=qt.REGION_INI_NAME=qt.REGION_ENV_NAME=void 0;qt.REGION_ENV_NAME="AWS_REGION";qt.REGION_INI_NAME="region";qt.NODE_REGION_CONFIG_OPTIONS={environmentVariableSelector:t=>t[qt.REGION_ENV_NAME],configFileSelector:t=>t[qt.REGION_INI_NAME],default:()=>{throw new Error("Region is missing")}};qt.NODE_REGION_CONFIG_FILE_OPTIONS={preferredFile:"credentials"}});var Ty=u(il=>{"use strict";Object.defineProperty(il,"__esModule",{value:!0});il.isFipsRegion=void 0;var zM=n(t=>typeof t=="string"&&(t.startsWith("fips-")||t.endsWith("-fips")),"isFipsRegion");il.isFipsRegion=zM});var VS=u(nl=>{"use strict";Object.defineProperty(nl,"__esModule",{value:!0});nl.getRealRegion=void 0;var UM=Ty(),WM=n(t=>(0,UM.isFipsRegion)(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t,"getRealRegion");nl.getRealRegion=WM});var HS=u(sl=>{"use strict";Object.defineProperty(sl,"__esModule",{value:!0});sl.resolveRegionConfig=void 0;var $S=VS(),jM=Ty(),VM=n(t=>{let{region:e,useFipsEndpoint:r}=t;if(!e)throw new Error("Region is missing");return{...t,region:async()=>{if(typeof e=="string")return(0,$S.getRealRegion)(e);let i=await e();return(0,$S.getRealRegion)(i)},useFipsEndpoint:async()=>{let i=typeof e=="string"?e:await e();return(0,jM.isFipsRegion)(i)?!0:typeof r!="function"?Promise.resolve(!!r):r()}}},"resolveRegionConfig");sl.resolveRegionConfig=VM});var BS=u(ol=>{"use strict";Object.defineProperty(ol,"__esModule",{value:!0});var GS=(A(),b(x));GS.__exportStar(jS(),ol);GS.__exportStar(HS(),ol)});var KS=u(JS=>{"use strict";Object.defineProperty(JS,"__esModule",{value:!0})});var QS=u(YS=>{"use strict";Object.defineProperty(YS,"__esModule",{value:!0})});var XS=u(al=>{"use strict";Object.defineProperty(al,"__esModule",{value:!0});al.getHostnameFromVariants=void 0;var $M=n((t=[],{useFipsEndpoint:e,useDualstackEndpoint:r})=>{var i;return(i=t.find(({tags:s})=>e===s.includes("fips")&&r===s.includes("dualstack")))===null||i===void 0?void 0:i.hostname},"getHostnameFromVariants");al.getHostnameFromVariants=$M});var ZS=u(cl=>{"use strict";Object.defineProperty(cl,"__esModule",{value:!0});cl.getResolvedHostname=void 0;var HM=n((t,{regionHostname:e,partitionHostname:r})=>e||(r?r.replace("{region}",t):void 0),"getResolvedHostname");cl.getResolvedHostname=HM});var eN=u(dl=>{"use strict";Object.defineProperty(dl,"__esModule",{value:!0});dl.getResolvedPartition=void 0;var GM=n((t,{partitionHash:e})=>{var r;return(r=Object.keys(e||{}).find(i=>e[i].regions.includes(t)))!==null&&r!==void 0?r:"aws"},"getResolvedPartition");dl.getResolvedPartition=GM});var tN=u(ul=>{"use strict";Object.defineProperty(ul,"__esModule",{value:!0});ul.getResolvedSigningRegion=void 0;var BM=n((t,{signingRegion:e,regionRegex:r,useFipsEndpoint:i})=>{if(e)return e;if(i){let s=r.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),o=t.match(s);if(o)return o[0].slice(1,-1)}},"getResolvedSigningRegion");ul.getResolvedSigningRegion=BM});var iN=u(ll=>{"use strict";Object.defineProperty(ll,"__esModule",{value:!0});ll.getRegionInfo=void 0;var rN=XS(),JM=ZS(),KM=eN(),YM=tN(),QM=n((t,{useFipsEndpoint:e=!1,useDualstackEndpoint:r=!1,signingService:i,regionHash:s,partitionHash:o})=>{var a,c,l,p,f,m;let h=(0,KM.getResolvedPartition)(t,{partitionHash:o}),_=t in s?t:(c=(a=o[h])===null||a===void 0?void 0:a.endpoint)!==null&&c!==void 0?c:t,w={useFipsEndpoint:e,useDualstackEndpoint:r},g=(0,rN.getHostnameFromVariants)((l=s[_])===null||l===void 0?void 0:l.variants,w),S=(0,rN.getHostnameFromVariants)((p=o[h])===null||p===void 0?void 0:p.variants,w),ie=(0,JM.getResolvedHostname)(_,{regionHostname:g,partitionHostname:S});if(ie===void 0)throw new Error(`Endpoint resolution failed for: ${{resolvedRegion:_,useFipsEndpoint:e,useDualstackEndpoint:r}}`);let Ie=(0,YM.getResolvedSigningRegion)(ie,{signingRegion:(f=s[_])===null||f===void 0?void 0:f.signingRegion,regionRegex:o[h].regionRegex,useFipsEndpoint:e});return{partition:h,signingService:i,hostname:ie,...Ie&&{signingRegion:Ie},...((m=s[_])===null||m===void 0?void 0:m.signingService)&&{signingService:s[_].signingService}}},"getRegionInfo");ll.getRegionInfo=QM});var nN=u(bc=>{"use strict";Object.defineProperty(bc,"__esModule",{value:!0});var Oy=(A(),b(x));Oy.__exportStar(KS(),bc);Oy.__exportStar(QS(),bc);Oy.__exportStar(iN(),bc)});var _r=u(xc=>{"use strict";Object.defineProperty(xc,"__esModule",{value:!0});var Py=(A(),b(x));Py.__exportStar(WS(),xc);Py.__exportStar(BS(),xc);Py.__exportStar(nN(),xc)});var Ac=u(si=>{"use strict";Object.defineProperty(si,"__esModule",{value:!0});si.getContentLengthPlugin=si.contentLengthMiddlewareOptions=si.contentLengthMiddleware=void 0;var XM=tt(),sN="content-length";function oN(t){return e=>async r=>{let i=r.request;if(XM.HttpRequest.isInstance(i)){let{body:s,headers:o}=i;if(s&&Object.keys(o).map(a=>a.toLowerCase()).indexOf(sN)===-1)try{let a=t(s);i.headers={...i.headers,[sN]:String(a)}}catch{}}return e({...r,request:i})}}n(oN,"contentLengthMiddleware");si.contentLengthMiddleware=oN;si.contentLengthMiddlewareOptions={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0};var ZM=n(t=>({applyToStack:e=>{e.add(oN(t.bodyLengthChecker),si.contentLengthMiddlewareOptions)}}),"getContentLengthPlugin");si.getContentLengthPlugin=ZM});var Tc=u(Ct=>{"use strict";Object.defineProperty(Ct,"__esModule",{value:!0});Ct.getHostHeaderPlugin=Ct.hostHeaderMiddlewareOptions=Ct.hostHeaderMiddleware=Ct.resolveHostHeaderConfig=void 0;var eD=tt();function tD(t){return t}n(tD,"resolveHostHeaderConfig");Ct.resolveHostHeaderConfig=tD;var rD=n(t=>e=>async r=>{if(!eD.HttpRequest.isInstance(r.request))return e(r);let{request:i}=r,{handlerProtocol:s=""}=t.requestHandler.metadata||{};if(s.indexOf("h2")>=0&&!i.headers[":authority"])delete i.headers.host,i.headers[":authority"]="";else if(!i.headers.host){let o=i.hostname;i.port!=null&&(o+=`:${i.port}`),i.headers.host=o}return e(r)},"hostHeaderMiddleware");Ct.hostHeaderMiddleware=rD;Ct.hostHeaderMiddlewareOptions={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0};var iD=n(t=>({applyToStack:e=>{e.add((0,Ct.hostHeaderMiddleware)(t),Ct.hostHeaderMiddlewareOptions)}}),"getHostHeaderPlugin");Ct.getHostHeaderPlugin=iD});var aN=u(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});yr.getLoggerPlugin=yr.loggerMiddlewareOptions=yr.loggerMiddleware=void 0;var nD=n(()=>(t,e)=>async r=>{let i=await t(r),{clientName:s,commandName:o,logger:a,inputFilterSensitiveLog:c,outputFilterSensitiveLog:l,dynamoDbDocumentClientOptions:p={}}=e,{overrideInputFilterSensitiveLog:f,overrideOutputFilterSensitiveLog:m}=p;if(!a)return i;if(typeof a.info=="function"){let{$metadata:h,..._}=i.output;a.info({clientName:s,commandName:o,input:(f??c)(r.input),output:(m??l)(_),metadata:h})}return i},"loggerMiddleware");yr.loggerMiddleware=nD;yr.loggerMiddlewareOptions={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0};var sD=n(t=>({applyToStack:e=>{e.add((0,yr.loggerMiddleware)(),yr.loggerMiddlewareOptions)}}),"getLoggerPlugin");yr.getLoggerPlugin=sD});var Oc=u(Ry=>{"use strict";Object.defineProperty(Ry,"__esModule",{value:!0});var oD=(A(),b(x));oD.__exportStar(aN(),Ry)});var Pc=u(gr=>{"use strict";Object.defineProperty(gr,"__esModule",{value:!0});gr.getRecursionDetectionPlugin=gr.addRecursionDetectionMiddlewareOptions=gr.recursionDetectionMiddleware=void 0;var aD=tt(),cN="X-Amzn-Trace-Id",cD="AWS_LAMBDA_FUNCTION_NAME",dD="_X_AMZN_TRACE_ID",uD=n(t=>e=>async r=>{let{request:i}=r;if(!aD.HttpRequest.isInstance(i)||t.runtime!=="node"||i.headers.hasOwnProperty(cN))return e(r);let s=process.env[cD],o=process.env[dD],a=n(c=>typeof c=="string"&&c.length>0,"nonEmptyString");return a(s)&&a(o)&&(i.headers[cN]=o),e({...r,request:i})},"recursionDetectionMiddleware");gr.recursionDetectionMiddleware=uD;gr.addRecursionDetectionMiddlewareOptions={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"};var lD=n(t=>({applyToStack:e=>{e.add((0,gr.recursionDetectionMiddleware)(t),gr.addRecursionDetectionMiddlewareOptions)}}),"getRecursionDetectionPlugin");gr.getRecursionDetectionPlugin=lD});var pl=u(oi=>{"use strict";Object.defineProperty(oi,"__esModule",{value:!0});oi.DEFAULT_RETRY_MODE=oi.DEFAULT_MAX_ATTEMPTS=oi.RETRY_MODES=void 0;var pD;(function(t){t.STANDARD="standard",t.ADAPTIVE="adaptive"})(pD=oi.RETRY_MODES||(oi.RETRY_MODES={}));oi.DEFAULT_MAX_ATTEMPTS=3;oi.DEFAULT_RETRY_MODE="STANDARD"});var dN=u(kt=>{"use strict";Object.defineProperty(kt,"__esModule",{value:!0});kt.NODEJS_TIMEOUT_ERROR_CODES=kt.TRANSIENT_ERROR_STATUS_CODES=kt.TRANSIENT_ERROR_CODES=kt.THROTTLING_ERROR_CODES=kt.CLOCK_SKEW_ERROR_CODES=void 0;kt.CLOCK_SKEW_ERROR_CODES=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"];kt.THROTTLING_ERROR_CODES=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"];kt.TRANSIENT_ERROR_CODES=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"];kt.TRANSIENT_ERROR_STATUS_CODES=[500,502,503,504];kt.NODEJS_TIMEOUT_ERROR_CODES=["ECONNRESET","EPIPE","ETIMEDOUT"]});var Ic=u(Nt=>{"use strict";Object.defineProperty(Nt,"__esModule",{value:!0});Nt.isServerError=Nt.isTransientError=Nt.isThrottlingError=Nt.isClockSkewError=Nt.isRetryableByTrait=void 0;var Rc=dN(),fD=n(t=>t.$retryable!==void 0,"isRetryableByTrait");Nt.isRetryableByTrait=fD;var mD=n(t=>Rc.CLOCK_SKEW_ERROR_CODES.includes(t.name),"isClockSkewError");Nt.isClockSkewError=mD;var hD=n(t=>{var e,r;return((e=t.$metadata)===null||e===void 0?void 0:e.httpStatusCode)===429||Rc.THROTTLING_ERROR_CODES.includes(t.name)||((r=t.$retryable)===null||r===void 0?void 0:r.throttling)==!0},"isThrottlingError");Nt.isThrottlingError=hD;var _D=n(t=>{var e;return Rc.TRANSIENT_ERROR_CODES.includes(t.name)||Rc.NODEJS_TIMEOUT_ERROR_CODES.includes(t?.code||"")||Rc.TRANSIENT_ERROR_STATUS_CODES.includes(((e=t.$metadata)===null||e===void 0?void 0:e.httpStatusCode)||0)},"isTransientError");Nt.isTransientError=_D;var yD=n(t=>{var e;if(((e=t.$metadata)===null||e===void 0?void 0:e.httpStatusCode)!==void 0){let r=t.$metadata.httpStatusCode;return 500<=r&&r<=599&&!(0,Nt.isTransientError)(t)}return!1},"isServerError");Nt.isServerError=yD});var Iy=u(ml=>{"use strict";Object.defineProperty(ml,"__esModule",{value:!0});ml.DefaultRateLimiter=void 0;var gD=Ic(),fl=class{constructor(e){var r,i,s,o,a;this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=(r=e?.beta)!==null&&r!==void 0?r:.7,this.minCapacity=(i=e?.minCapacity)!==null&&i!==void 0?i:1,this.minFillRate=(s=e?.minFillRate)!==null&&s!==void 0?s:.5,this.scaleConstant=(o=e?.scaleConstant)!==null&&o!==void 0?o:.4,this.smooth=(a=e?.smooth)!==null&&a!==void 0?a:.8;let c=this.getCurrentTimeInSeconds();this.lastThrottleTime=c,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){let r=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise(i=>setTimeout(i,r))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){let e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}let r=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=e}updateClientSendingRate(e){let r;if(this.updateMeasuredRate(),(0,gD.isThrottlingError)(e)){let s=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=s,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(s),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let i=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(i)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let e=this.getCurrentTimeInSeconds(),r=Math.floor(e*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let i=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(i*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(e){return parseFloat(e.toFixed(8))}};n(fl,"DefaultRateLimiter");ml.DefaultRateLimiter=fl});var qc=u(Te=>{"use strict";Object.defineProperty(Te,"__esModule",{value:!0});Te.REQUEST_HEADER=Te.INVOCATION_ID_HEADER=Te.NO_RETRY_INCREMENT=Te.TIMEOUT_RETRY_COST=Te.RETRY_COST=Te.INITIAL_RETRY_TOKENS=Te.THROTTLING_RETRY_DELAY_BASE=Te.MAXIMUM_RETRY_DELAY=Te.DEFAULT_RETRY_DELAY_BASE=void 0;Te.DEFAULT_RETRY_DELAY_BASE=100;Te.MAXIMUM_RETRY_DELAY=20*1e3;Te.THROTTLING_RETRY_DELAY_BASE=500;Te.INITIAL_RETRY_TOKENS=500;Te.RETRY_COST=5;Te.TIMEOUT_RETRY_COST=10;Te.NO_RETRY_INCREMENT=1;Te.INVOCATION_ID_HEADER="amz-sdk-invocation-id";Te.REQUEST_HEADER="amz-sdk-request"});var lN=u(hl=>{"use strict";Object.defineProperty(hl,"__esModule",{value:!0});hl.getDefaultRetryBackoffStrategy=void 0;var uN=qc(),wD=n(()=>{let t=uN.DEFAULT_RETRY_DELAY_BASE;return{computeNextBackoffDelay:n(i=>Math.floor(Math.min(uN.MAXIMUM_RETRY_DELAY,Math.random()*2**i*t)),"computeNextBackoffDelay"),setDelayBase:n(i=>{t=i},"setDelayBase")}},"getDefaultRetryBackoffStrategy");hl.getDefaultRetryBackoffStrategy=wD});var pN=u(_l=>{"use strict";Object.defineProperty(_l,"__esModule",{value:!0});_l.getDefaultRetryToken=void 0;var oo=qc(),ED=lN(),vD=n((t,e,r,i)=>{var s,o,a;let c=t,l=(s=i?.retryCost)!==null&&s!==void 0?s:oo.RETRY_COST,p=(o=i?.timeoutRetryCost)!==null&&o!==void 0?o:oo.TIMEOUT_RETRY_COST,f=(a=i?.retryBackoffStrategy)!==null&&a!==void 0?a:(0,ED.getDefaultRetryBackoffStrategy)(),m=t,h=Math.min(oo.MAXIMUM_RETRY_DELAY,e),_,w=r??0,g=n(Gt=>Gt==="TRANSIENT"?p:l,"getCapacityAmount"),S=n(()=>w,"getRetryCount"),ie=n(()=>h,"getRetryDelay"),Ie=n(()=>_,"getLastRetryCost"),Ne=n(Gt=>g(Gt)<=m,"hasRetryTokens");return{getRetryCount:S,getRetryDelay:ie,getLastRetryCost:Ie,hasRetryTokens:Ne,getRetryTokenCount:n(Gt=>{let T_=Gt.errorType;if(!Ne(T_))throw new Error("No retry token available");let O_=g(T_),jI=T_==="THROTTLING"?oo.THROTTLING_RETRY_DELAY_BASE:oo.DEFAULT_RETRY_DELAY_BASE;f.setDelayBase(jI);let RE=f.computeNextBackoffDelay(w);if(Gt.retryAfterHint){let VI=Gt.retryAfterHint.getTime()-Date.now();h=Math.max(VI||0,RE)}else h=RE;return w++,_=O_,m-=O_,O_},"getRetryTokenCount"),releaseRetryTokens:n(Gt=>{m+=Gt??oo.NO_RETRY_INCREMENT,m=Math.min(m,c)},"releaseRetryTokens")}},"getDefaultRetryToken");_l.getDefaultRetryToken=vD});var Cy=u(gl=>{"use strict";Object.defineProperty(gl,"__esModule",{value:!0});gl.StandardRetryStrategy=void 0;var qy=pl(),fN=qc(),SD=pN(),yl=class{constructor(e){this.maxAttemptsProvider=e,this.mode=qy.RETRY_MODES.STANDARD,this.retryToken=(0,SD.getDefaultRetryToken)(fN.INITIAL_RETRY_TOKENS,fN.DEFAULT_RETRY_DELAY_BASE),this.maxAttemptsProvider=e}async acquireInitialRetryToken(e){return this.retryToken}async refreshRetryTokenForRetry(e,r){let i=await this.getMaxAttempts();if(this.shouldRetry(e,r,i))return e.getRetryTokenCount(r),e;throw new Error("No retry token available")}recordSuccess(e){this.retryToken.releaseRetryTokens(e.getLastRetryCost())}async getMaxAttempts(){let e;try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${qy.DEFAULT_MAX_ATTEMPTS}`),qy.DEFAULT_MAX_ATTEMPTS}}shouldRetry(e,r,i){return e.getRetryCount()<i&&e.hasRetryTokens(r.errorType)&&this.isRetryableError(r.errorType)}isRetryableError(e){return e==="THROTTLING"||e==="TRANSIENT"}};n(yl,"StandardRetryStrategy");gl.StandardRetryStrategy=yl});var mN=u(El=>{"use strict";Object.defineProperty(El,"__esModule",{value:!0});El.AdaptiveRetryStrategy=void 0;var ND=pl(),bD=Iy(),xD=Cy(),wl=class{constructor(e,r){this.maxAttemptsProvider=e,this.mode=ND.RETRY_MODES.ADAPTIVE;let{rateLimiter:i}=r??{};this.rateLimiter=i??new bD.DefaultRateLimiter,this.standardRetryStrategy=new xD.StandardRetryStrategy(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(e,r)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}};n(wl,"AdaptiveRetryStrategy");El.AdaptiveRetryStrategy=wl});var _N=u(hN=>{"use strict";Object.defineProperty(hN,"__esModule",{value:!0})});var Mt=u(Ui=>{"use strict";Object.defineProperty(Ui,"__esModule",{value:!0});var ao=(A(),b(x));ao.__exportStar(mN(),Ui);ao.__exportStar(Iy(),Ui);ao.__exportStar(Cy(),Ui);ao.__exportStar(pl(),Ui);ao.__exportStar(qc(),Ui);ao.__exportStar(_N(),Ui)});import AD from"crypto";function Cc(){return vl>Sl.length-16&&(AD.randomFillSync(Sl),vl=0),Sl.slice(vl,vl+=16)}var Sl,vl,ky=He(()=>{Sl=new Uint8Array(256),vl=Sl.length;n(Cc,"rng")});var yN,gN=He(()=>{yN=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function TD(t){return typeof t=="string"&&yN.test(t)}var Wi,kc=He(()=>{gN();n(TD,"validate");Wi=TD});function OD(t,e=0){let r=(We[t[e+0]]+We[t[e+1]]+We[t[e+2]]+We[t[e+3]]+"-"+We[t[e+4]]+We[t[e+5]]+"-"+We[t[e+6]]+We[t[e+7]]+"-"+We[t[e+8]]+We[t[e+9]]+"-"+We[t[e+10]]+We[t[e+11]]+We[t[e+12]]+We[t[e+13]]+We[t[e+14]]+We[t[e+15]]).toLowerCase();if(!Wi(r))throw TypeError("Stringified UUID is invalid");return r}var We,ji,Mc=He(()=>{kc();We=[];for(let t=0;t<256;++t)We.push((t+256).toString(16).substr(1));n(OD,"stringify");ji=OD});function PD(t,e,r){let i=e&&r||0,s=e||new Array(16);t=t||{};let o=t.node||wN,a=t.clockseq!==void 0?t.clockseq:My;if(o==null||a==null){let h=t.random||(t.rng||Cc)();o==null&&(o=wN=[h[0]|1,h[1],h[2],h[3],h[4],h[5]]),a==null&&(a=My=(h[6]<<8|h[7])&16383)}let c=t.msecs!==void 0?t.msecs:Date.now(),l=t.nsecs!==void 0?t.nsecs:Fy+1,p=c-Dy+(l-Fy)/1e4;if(p<0&&t.clockseq===void 0&&(a=a+1&16383),(p<0||c>Dy)&&t.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Dy=c,Fy=l,My=a,c+=122192928e5;let f=((c&268435455)*1e4+l)%4294967296;s[i++]=f>>>24&255,s[i++]=f>>>16&255,s[i++]=f>>>8&255,s[i++]=f&255;let m=c/4294967296*1e4&268435455;s[i++]=m>>>8&255,s[i++]=m&255,s[i++]=m>>>24&15|16,s[i++]=m>>>16&255,s[i++]=a>>>8|128,s[i++]=a&255;for(let h=0;h<6;++h)s[i+h]=o[h];return e||ji(s)}var wN,My,Dy,Fy,EN,vN=He(()=>{ky();Mc();Dy=0,Fy=0;n(PD,"v1");EN=PD});function RD(t){if(!Wi(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var Nl,Ly=He(()=>{kc();n(RD,"parse");Nl=RD});function ID(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}function Dc(t,e,r){function i(s,o,a,c){if(typeof s=="string"&&(s=ID(s)),typeof o=="string"&&(o=Nl(o)),o.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let l=new Uint8Array(16+s.length);if(l.set(o),l.set(s,o.length),l=r(l),l[6]=l[6]&15|e,l[8]=l[8]&63|128,a){c=c||0;for(let p=0;p<16;++p)a[c+p]=l[p];return a}return ji(l)}n(i,"generateUUID");try{i.name=t}catch{}return i.DNS=qD,i.URL=CD,i}var qD,CD,zy=He(()=>{Mc();Ly();n(ID,"stringToBytes");qD="6ba7b810-9dad-11d1-80b4-00c04fd430c8",CD="6ba7b811-9dad-11d1-80b4-00c04fd430c8";n(Dc,"default")});import kD from"crypto";function MD(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),kD.createHash("md5").update(t).digest()}var SN,NN=He(()=>{n(MD,"md5");SN=MD});var DD,bN,xN=He(()=>{zy();NN();DD=Dc("v3",48,SN),bN=DD});function FD(t,e,r){t=t||{};let i=t.random||(t.rng||Cc)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){r=r||0;for(let s=0;s<16;++s)e[r+s]=i[s];return e}return ji(i)}var AN,TN=He(()=>{ky();Mc();n(FD,"v4");AN=FD});import LD from"crypto";function zD(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),LD.createHash("sha1").update(t).digest()}var ON,PN=He(()=>{n(zD,"sha1");ON=zD});var UD,RN,IN=He(()=>{zy();PN();UD=Dc("v5",80,ON),RN=UD});var qN,CN=He(()=>{qN="00000000-0000-0000-0000-000000000000"});function WD(t){if(!Wi(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}var kN,MN=He(()=>{kc();n(WD,"version");kN=WD});var Uy={};IE(Uy,{NIL:()=>qN,parse:()=>Nl,stringify:()=>ji,v1:()=>EN,v3:()=>bN,v4:()=>AN,v5:()=>RN,validate:()=>Wi,version:()=>kN});var Wy=He(()=>{vN();xN();TN();IN();CN();MN();kc();Mc();Ly()});var DN=u(bl=>{"use strict";Object.defineProperty(bl,"__esModule",{value:!0});bl.getDefaultRetryQuota=void 0;var jy=Mt(),jD=n((t,e)=>{var r,i,s;let o=t,a=(r=e?.noRetryIncrement)!==null&&r!==void 0?r:jy.NO_RETRY_INCREMENT,c=(i=e?.retryCost)!==null&&i!==void 0?i:jy.RETRY_COST,l=(s=e?.timeoutRetryCost)!==null&&s!==void 0?s:jy.TIMEOUT_RETRY_COST,p=t,f=n(w=>w.name==="TimeoutError"?l:c,"getCapacityAmount"),m=n(w=>f(w)<=p,"hasRetryTokens");return Object.freeze({hasRetryTokens:m,retrieveRetryTokens:n(w=>{if(!m(w))throw new Error("No retry token available");let g=f(w);return p-=g,g},"retrieveRetryTokens"),releaseRetryTokens:n(w=>{p+=w??a,p=Math.min(p,o)},"releaseRetryTokens")})},"getDefaultRetryQuota");bl.getDefaultRetryQuota=jD});var Vy=u(xl=>{"use strict";Object.defineProperty(xl,"__esModule",{value:!0});xl.defaultDelayDecider=void 0;var VD=Mt(),$D=n((t,e)=>Math.floor(Math.min(VD.MAXIMUM_RETRY_DELAY,Math.random()*2**e*t)),"defaultDelayDecider");xl.defaultDelayDecider=$D});var $y=u(Tl=>{"use strict";Object.defineProperty(Tl,"__esModule",{value:!0});Tl.defaultRetryDecider=void 0;var Al=Ic(),HD=n(t=>t?(0,Al.isRetryableByTrait)(t)||(0,Al.isClockSkewError)(t)||(0,Al.isThrottlingError)(t)||(0,Al.isTransientError)(t):!1,"defaultRetryDecider");Tl.defaultRetryDecider=HD});var Hy=u(Ol=>{"use strict";Object.defineProperty(Ol,"__esModule",{value:!0});Ol.asSdkError=void 0;var GD=n(t=>t instanceof Error?t:t instanceof Object?Object.assign(new Error,t):typeof t=="string"?new Error(t):new Error(`AWS SDK error wrapper for ${t}`),"asSdkError");Ol.asSdkError=GD});var By=u(Rl=>{"use strict";Object.defineProperty(Rl,"__esModule",{value:!0});Rl.StandardRetryStrategy=void 0;var Gy=tt(),BD=Ic(),$n=Mt(),JD=(Wy(),b(Uy)),KD=DN(),YD=Vy(),QD=$y(),XD=Hy(),Pl=class{constructor(e,r){var i,s,o;this.maxAttemptsProvider=e,this.mode=$n.RETRY_MODES.STANDARD,this.retryDecider=(i=r?.retryDecider)!==null&&i!==void 0?i:QD.defaultRetryDecider,this.delayDecider=(s=r?.delayDecider)!==null&&s!==void 0?s:YD.defaultDelayDecider,this.retryQuota=(o=r?.retryQuota)!==null&&o!==void 0?o:(0,KD.getDefaultRetryQuota)($n.INITIAL_RETRY_TOKENS)}shouldRetry(e,r,i){return r<i&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)}async getMaxAttempts(){let e;try{e=await this.maxAttemptsProvider()}catch{e=$n.DEFAULT_MAX_ATTEMPTS}return e}async retry(e,r,i){let s,o=0,a=0,c=await this.getMaxAttempts(),{request:l}=r;for(Gy.HttpRequest.isInstance(l)&&(l.headers[$n.INVOCATION_ID_HEADER]=(0,JD.v4)());;)try{Gy.HttpRequest.isInstance(l)&&(l.headers[$n.REQUEST_HEADER]=`attempt=${o+1}; max=${c}`),i?.beforeRequest&&await i.beforeRequest();let{response:p,output:f}=await e(r);return i?.afterRequest&&i.afterRequest(p),this.retryQuota.releaseRetryTokens(s),f.$metadata.attempts=o+1,f.$metadata.totalRetryDelay=a,{response:p,output:f}}catch(p){let f=(0,XD.asSdkError)(p);if(o++,this.shouldRetry(f,o,c)){s=this.retryQuota.retrieveRetryTokens(f);let m=this.delayDecider((0,BD.isThrottlingError)(f)?$n.THROTTLING_RETRY_DELAY_BASE:$n.DEFAULT_RETRY_DELAY_BASE,o),h=ZD(f.$response),_=Math.max(h||0,m);a+=_,await new Promise(w=>setTimeout(w,_));continue}throw f.$metadata||(f.$metadata={}),f.$metadata.attempts=o,f.$metadata.totalRetryDelay=a,f}}};n(Pl,"StandardRetryStrategy");Rl.StandardRetryStrategy=Pl;var ZD=n(t=>{if(!Gy.HttpResponse.isInstance(t))return;let e=Object.keys(t.headers).find(o=>o.toLowerCase()==="retry-after");if(!e)return;let r=t.headers[e],i=Number(r);return Number.isNaN(i)?new Date(r).getTime()-Date.now():i*1e3},"getDelayFromRetryAfterHeader")});var LN=u(ql=>{"use strict";Object.defineProperty(ql,"__esModule",{value:!0});ql.AdaptiveRetryStrategy=void 0;var FN=Mt(),eF=By(),Il=class extends eF.StandardRetryStrategy{constructor(e,r){let{rateLimiter:i,...s}=r??{};super(e,s),this.rateLimiter=i??new FN.DefaultRateLimiter,this.mode=FN.RETRY_MODES.ADAPTIVE}async retry(e,r){return super.retry(e,r,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:i=>{this.rateLimiter.updateClientSendingRate(i)}})}};n(Il,"AdaptiveRetryStrategy");ql.AdaptiveRetryStrategy=Il});var UN=u(we=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});we.NODE_RETRY_MODE_CONFIG_OPTIONS=we.CONFIG_RETRY_MODE=we.ENV_RETRY_MODE=we.resolveRetryConfig=we.NODE_MAX_ATTEMPT_CONFIG_OPTIONS=we.CONFIG_MAX_ATTEMPTS=we.ENV_MAX_ATTEMPTS=void 0;var zN=Fn(),co=Mt();we.ENV_MAX_ATTEMPTS="AWS_MAX_ATTEMPTS";we.CONFIG_MAX_ATTEMPTS="max_attempts";we.NODE_MAX_ATTEMPT_CONFIG_OPTIONS={environmentVariableSelector:t=>{let e=t[we.ENV_MAX_ATTEMPTS];if(!e)return;let r=parseInt(e);if(Number.isNaN(r))throw new Error(`Environment variable ${we.ENV_MAX_ATTEMPTS} mast be a number, got "${e}"`);return r},configFileSelector:t=>{let e=t[we.CONFIG_MAX_ATTEMPTS];if(!e)return;let r=parseInt(e);if(Number.isNaN(r))throw new Error(`Shared config file entry ${we.CONFIG_MAX_ATTEMPTS} mast be a number, got "${e}"`);return r},default:co.DEFAULT_MAX_ATTEMPTS};var tF=n(t=>{var e;let{retryStrategy:r}=t,i=(0,zN.normalizeProvider)((e=t.maxAttempts)!==null&&e!==void 0?e:co.DEFAULT_MAX_ATTEMPTS);return{...t,maxAttempts:i,retryStrategy:async()=>r||(await(0,zN.normalizeProvider)(t.retryMode)()===co.RETRY_MODES.ADAPTIVE?new co.AdaptiveRetryStrategy(i):new co.StandardRetryStrategy(i))}},"resolveRetryConfig");we.resolveRetryConfig=tF;we.ENV_RETRY_MODE="AWS_RETRY_MODE";we.CONFIG_RETRY_MODE="retry_mode";we.NODE_RETRY_MODE_CONFIG_OPTIONS={environmentVariableSelector:t=>t[we.ENV_RETRY_MODE],configFileSelector:t=>t[we.CONFIG_RETRY_MODE],default:co.DEFAULT_RETRY_MODE}});var jN=u(wr=>{"use strict";Object.defineProperty(wr,"__esModule",{value:!0});wr.getOmitRetryHeadersPlugin=wr.omitRetryHeadersMiddlewareOptions=wr.omitRetryHeadersMiddleware=void 0;var rF=tt(),WN=Mt(),iF=n(()=>t=>async e=>{let{request:r}=e;return rF.HttpRequest.isInstance(r)&&(delete r.headers[WN.INVOCATION_ID_HEADER],delete r.headers[WN.REQUEST_HEADER]),t(e)},"omitRetryHeadersMiddleware");wr.omitRetryHeadersMiddleware=iF;wr.omitRetryHeadersMiddlewareOptions={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0};var nF=n(t=>({applyToStack:e=>{e.addRelativeTo((0,wr.omitRetryHeadersMiddleware)(),wr.omitRetryHeadersMiddlewareOptions)}}),"getOmitRetryHeadersPlugin");wr.getOmitRetryHeadersPlugin=nF});var $N=u(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.getRetryAfterHint=bt.getRetryPlugin=bt.retryMiddlewareOptions=bt.retryMiddleware=void 0;var Ky=tt(),Jy=Ic(),VN=Mt(),sF=(Wy(),b(Uy)),oF=Hy(),aF=n(t=>(e,r)=>async i=>{let s=await t.retryStrategy(),o=await t.maxAttempts();if(cF(s)){s=s;let a=await s.acquireInitialRetryToken(r.partition_id),c=new Error,l=0,p=0,{request:f}=i;for(Ky.HttpRequest.isInstance(f)&&(f.headers[VN.INVOCATION_ID_HEADER]=(0,sF.v4)());;)try{Ky.HttpRequest.isInstance(f)&&(f.headers[VN.REQUEST_HEADER]=`attempt=${l+1}; max=${o}`);let{response:m,output:h}=await e(i);return s.recordSuccess(a),h.$metadata.attempts=l+1,h.$metadata.totalRetryDelay=p,{response:m,output:h}}catch(m){let h=dF(m);c=(0,oF.asSdkError)(m);try{a=await s.refreshRetryTokenForRetry(a,h)}catch{throw c.$metadata||(c.$metadata={}),c.$metadata.attempts=l+1,c.$metadata.totalRetryDelay=p,c}l=a.getRetryCount();let _=a.getRetryDelay();p+=_,await new Promise(w=>setTimeout(w,_))}}else return s=s,s?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(e,i)},"retryMiddleware");bt.retryMiddleware=aF;var cF=n(t=>typeof t.acquireInitialRetryToken<"u"&&typeof t.refreshRetryTokenForRetry<"u"&&typeof t.recordSuccess<"u","isRetryStrategyV2"),dF=n(t=>{let e={errorType:uF(t)},r=(0,bt.getRetryAfterHint)(t.$response);return r&&(e.retryAfterHint=r),e},"getRetyErrorInto"),uF=n(t=>(0,Jy.isThrottlingError)(t)?"THROTTLING":(0,Jy.isTransientError)(t)?"TRANSIENT":(0,Jy.isServerError)(t)?"SERVER_ERROR":"CLIENT_ERROR","getRetryErrorType");bt.retryMiddlewareOptions={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0};var lF=n(t=>({applyToStack:e=>{e.add((0,bt.retryMiddleware)(t),bt.retryMiddlewareOptions)}}),"getRetryPlugin");bt.getRetryPlugin=lF;var pF=n(t=>{if(!Ky.HttpResponse.isInstance(t))return;let e=Object.keys(t.headers).find(o=>o.toLowerCase()==="retry-after");if(!e)return;let r=t.headers[e],i=Number(r);return Number.isNaN(i)?new Date(r):new Date(i*1e3)},"getRetryAfterHint");bt.getRetryAfterHint=pF});var ci=u(ai=>{"use strict";Object.defineProperty(ai,"__esModule",{value:!0});var Hn=(A(),b(x));Hn.__exportStar(LN(),ai);Hn.__exportStar(By(),ai);Hn.__exportStar(UN(),ai);Hn.__exportStar(Vy(),ai);Hn.__exportStar(jN(),ai);Hn.__exportStar($y(),ai);Hn.__exportStar($N(),ai)});var Fc=u(Cl=>{"use strict";Object.defineProperty(Cl,"__esModule",{value:!0});Cl.ProviderError=void 0;var uo=class extends Error{constructor(e,r=!0){super(e),this.tryNextLink=r,this.name="ProviderError",Object.setPrototypeOf(this,uo.prototype)}static from(e,r=!0){return Object.assign(new this(e.message,r),e)}};n(uo,"ProviderError");Cl.ProviderError=uo});var HN=u(kl=>{"use strict";Object.defineProperty(kl,"__esModule",{value:!0});kl.CredentialsProviderError=void 0;var fF=Fc(),lo=class extends fF.ProviderError{constructor(e,r=!0){super(e,r),this.tryNextLink=r,this.name="CredentialsProviderError",Object.setPrototypeOf(this,lo.prototype)}};n(lo,"CredentialsProviderError");kl.CredentialsProviderError=lo});var GN=u(Ml=>{"use strict";Object.defineProperty(Ml,"__esModule",{value:!0});Ml.TokenProviderError=void 0;var mF=Fc(),po=class extends mF.ProviderError{constructor(e,r=!0){super(e,r),this.tryNextLink=r,this.name="TokenProviderError",Object.setPrototypeOf(this,po.prototype)}};n(po,"TokenProviderError");Ml.TokenProviderError=po});var BN=u(Dl=>{"use strict";Object.defineProperty(Dl,"__esModule",{value:!0});Dl.chain=void 0;var hF=Fc();function _F(...t){return()=>{let e=Promise.reject(new hF.ProviderError("No providers in chain"));for(let r of t)e=e.catch(i=>{if(i?.tryNextLink)return r();throw i});return e}}n(_F,"chain");Dl.chain=_F});var JN=u(Fl=>{"use strict";Object.defineProperty(Fl,"__esModule",{value:!0});Fl.fromStatic=void 0;var yF=n(t=>()=>Promise.resolve(t),"fromStatic");Fl.fromStatic=yF});var KN=u(Ll=>{"use strict";Object.defineProperty(Ll,"__esModule",{value:!0});Ll.memoize=void 0;var gF=n((t,e,r)=>{let i,s,o,a=!1,c=n(async()=>{s||(s=t());try{i=await s,o=!0,a=!1}finally{s=void 0}return i},"coalesceProvider");return e===void 0?async l=>((!o||l?.forceRefresh)&&(i=await c()),i):async l=>((!o||l?.forceRefresh)&&(i=await c()),a?i:r&&!r(i)?(a=!0,i):(e(i)&&await c(),i))},"memoize");Ll.memoize=gF});var ee=u(Vi=>{"use strict";Object.defineProperty(Vi,"__esModule",{value:!0});var fo=(A(),b(x));fo.__exportStar(HN(),Vi);fo.__exportStar(Fc(),Vi);fo.__exportStar(GN(),Vi);fo.__exportStar(BN(),Vi);fo.__exportStar(JN(),Vi);fo.__exportStar(KN(),Vi)});var zl=u(mo=>{"use strict";Object.defineProperty(mo,"__esModule",{value:!0});mo.toHex=mo.fromHex=void 0;var YN={},Yy={};for(let t=0;t<256;t++){let e=t.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),YN[t]=e,Yy[e]=t}function wF(t){if(t.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let e=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2){let i=t.slice(r,r+2).toLowerCase();if(i in Yy)e[r/2]=Yy[i];else throw new Error(`Cannot decode unrecognized sequence ${i} as hexadecimal`)}return e}n(wF,"fromHex");mo.fromHex=wF;function EF(t){let e="";for(let r=0;r<t.byteLength;r++)e+=YN[t[r]];return e}n(EF,"toHex");mo.toHex=EF});var Qy=u(Ul=>{"use strict";Object.defineProperty(Ul,"__esModule",{value:!0});Ul.isArrayBuffer=void 0;var vF=n(t=>typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]","isArrayBuffer");Ul.isArrayBuffer=vF});var _o=u(ho=>{"use strict";Object.defineProperty(ho,"__esModule",{value:!0});ho.fromString=ho.fromArrayBuffer=void 0;var SF=Qy(),Xy=U("buffer"),NF=n((t,e=0,r=t.byteLength-e)=>{if(!(0,SF.isArrayBuffer)(t))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof t} (${t})`);return Xy.Buffer.from(t,e,r)},"fromArrayBuffer");ho.fromArrayBuffer=NF;var bF=n((t,e)=>{if(typeof t!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof t} (${t})`);return e?Xy.Buffer.from(t,e):Xy.Buffer.from(t)},"fromString");ho.fromString=bF});var Zy=u(Wl=>{"use strict";Object.defineProperty(Wl,"__esModule",{value:!0});Wl.fromUtf8=void 0;var xF=_o(),AF=n(t=>{let e=(0,xF.fromString)(t,"utf8");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT)},"fromUtf8");Wl.fromUtf8=AF});var QN=u(jl=>{"use strict";Object.defineProperty(jl,"__esModule",{value:!0});jl.toUint8Array=void 0;var TF=Zy(),OF=n(t=>typeof t=="string"?(0,TF.fromUtf8)(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t),"toUint8Array");jl.toUint8Array=OF});var XN=u(Vl=>{"use strict";Object.defineProperty(Vl,"__esModule",{value:!0});Vl.toUtf8=void 0;var PF=_o(),RF=n(t=>(0,PF.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength).toString("utf8"),"toUtf8");Vl.toUtf8=RF});var di=u(Lc=>{"use strict";Object.defineProperty(Lc,"__esModule",{value:!0});var eg=(A(),b(x));eg.__exportStar(Zy(),Lc);eg.__exportStar(QN(),Lc);eg.__exportStar(XN(),Lc)});var Gn=u(O=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});O.MAX_PRESIGNED_TTL=O.KEY_TYPE_IDENTIFIER=O.MAX_CACHE_SIZE=O.UNSIGNED_PAYLOAD=O.EVENT_ALGORITHM_IDENTIFIER=O.ALGORITHM_IDENTIFIER_V4A=O.ALGORITHM_IDENTIFIER=O.UNSIGNABLE_PATTERNS=O.SEC_HEADER_PATTERN=O.PROXY_HEADER_PATTERN=O.ALWAYS_UNSIGNABLE_HEADERS=O.HOST_HEADER=O.TOKEN_HEADER=O.SHA256_HEADER=O.SIGNATURE_HEADER=O.GENERATED_HEADERS=O.DATE_HEADER=O.AMZ_DATE_HEADER=O.AUTH_HEADER=O.REGION_SET_PARAM=O.TOKEN_QUERY_PARAM=O.SIGNATURE_QUERY_PARAM=O.EXPIRES_QUERY_PARAM=O.SIGNED_HEADERS_QUERY_PARAM=O.AMZ_DATE_QUERY_PARAM=O.CREDENTIAL_QUERY_PARAM=O.ALGORITHM_QUERY_PARAM=void 0;O.ALGORITHM_QUERY_PARAM="X-Amz-Algorithm";O.CREDENTIAL_QUERY_PARAM="X-Amz-Credential";O.AMZ_DATE_QUERY_PARAM="X-Amz-Date";O.SIGNED_HEADERS_QUERY_PARAM="X-Amz-SignedHeaders";O.EXPIRES_QUERY_PARAM="X-Amz-Expires";O.SIGNATURE_QUERY_PARAM="X-Amz-Signature";O.TOKEN_QUERY_PARAM="X-Amz-Security-Token";O.REGION_SET_PARAM="X-Amz-Region-Set";O.AUTH_HEADER="authorization";O.AMZ_DATE_HEADER=O.AMZ_DATE_QUERY_PARAM.toLowerCase();O.DATE_HEADER="date";O.GENERATED_HEADERS=[O.AUTH_HEADER,O.AMZ_DATE_HEADER,O.DATE_HEADER];O.SIGNATURE_HEADER=O.SIGNATURE_QUERY_PARAM.toLowerCase();O.SHA256_HEADER="x-amz-content-sha256";O.TOKEN_HEADER=O.TOKEN_QUERY_PARAM.toLowerCase();O.HOST_HEADER="host";O.ALWAYS_UNSIGNABLE_HEADERS={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0};O.PROXY_HEADER_PATTERN=/^proxy-/;O.SEC_HEADER_PATTERN=/^sec-/;O.UNSIGNABLE_PATTERNS=[/^proxy-/i,/^sec-/i];O.ALGORITHM_IDENTIFIER="AWS4-HMAC-SHA256";O.ALGORITHM_IDENTIFIER_V4A="AWS4-ECDSA-P256-SHA256";O.EVENT_ALGORITHM_IDENTIFIER="AWS4-HMAC-SHA256-PAYLOAD";O.UNSIGNED_PAYLOAD="UNSIGNED-PAYLOAD";O.MAX_CACHE_SIZE=50;O.KEY_TYPE_IDENTIFIER="aws4_request";O.MAX_PRESIGNED_TTL=60*60*24*7});var rg=u($i=>{"use strict";Object.defineProperty($i,"__esModule",{value:!0});$i.clearCredentialCache=$i.getSigningKey=$i.createScope=void 0;var IF=zl(),qF=di(),tg=Gn(),yo={},$l=[],CF=n((t,e,r)=>`${t}/${e}/${r}/${tg.KEY_TYPE_IDENTIFIER}`,"createScope");$i.createScope=CF;var kF=n(async(t,e,r,i,s)=>{let o=await ZN(t,e.secretAccessKey,e.accessKeyId),a=`${r}:${i}:${s}:${(0,IF.toHex)(o)}:${e.sessionToken}`;if(a in yo)return yo[a];for($l.push(a);$l.length>tg.MAX_CACHE_SIZE;)delete yo[$l.shift()];let c=`AWS4${e.secretAccessKey}`;for(let l of[r,i,s,tg.KEY_TYPE_IDENTIFIER])c=await ZN(t,c,l);return yo[a]=c},"getSigningKey");$i.getSigningKey=kF;var MF=n(()=>{$l.length=0,Object.keys(yo).forEach(t=>{delete yo[t]})},"clearCredentialCache");$i.clearCredentialCache=MF;var ZN=n((t,e,r)=>{let i=new t(e);return i.update((0,qF.toUint8Array)(r)),i.digest()},"hmac")});var ng=u(Hl=>{"use strict";Object.defineProperty(Hl,"__esModule",{value:!0});Hl.getCanonicalHeaders=void 0;var ig=Gn(),DF=n(({headers:t},e,r)=>{let i={};for(let s of Object.keys(t).sort()){if(t[s]==null)continue;let o=s.toLowerCase();(o in ig.ALWAYS_UNSIGNABLE_HEADERS||e?.has(o)||ig.PROXY_HEADER_PATTERN.test(o)||ig.SEC_HEADER_PATTERN.test(o))&&(!r||r&&!r.has(o))||(i[o]=t[s].trim().replace(/\s+/g," "))}return i},"getCanonicalHeaders");Hl.getCanonicalHeaders=DF});var sg=u(Gl=>{"use strict";Object.defineProperty(Gl,"__esModule",{value:!0});Gl.escapeUri=void 0;var FF=n(t=>encodeURIComponent(t).replace(/[!'()*]/g,LF),"escapeUri");Gl.escapeUri=FF;var LF=n(t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`,"hexEncode")});var eb=u(Bl=>{"use strict";Object.defineProperty(Bl,"__esModule",{value:!0});Bl.escapeUriPath=void 0;var zF=sg(),UF=n(t=>t.split("/").map(zF.escapeUri).join("/"),"escapeUriPath");Bl.escapeUriPath=UF});var og=u(Jl=>{"use strict";Object.defineProperty(Jl,"__esModule",{value:!0});var tb=(A(),b(x));tb.__exportStar(sg(),Jl);tb.__exportStar(eb(),Jl)});var ag=u(Yl=>{"use strict";Object.defineProperty(Yl,"__esModule",{value:!0});Yl.getCanonicalQuery=void 0;var Kl=og(),WF=Gn(),jF=n(({query:t={}})=>{let e=[],r={};for(let i of Object.keys(t).sort()){if(i.toLowerCase()===WF.SIGNATURE_HEADER)continue;e.push(i);let s=t[i];typeof s=="string"?r[i]=`${(0,Kl.escapeUri)(i)}=${(0,Kl.escapeUri)(s)}`:Array.isArray(s)&&(r[i]=s.slice(0).sort().reduce((o,a)=>o.concat([`${(0,Kl.escapeUri)(i)}=${(0,Kl.escapeUri)(a)}`]),[]).join("&"))}return e.map(i=>r[i]).filter(i=>i).join("&")},"getCanonicalQuery");Yl.getCanonicalQuery=jF});var cg=u(Ql=>{"use strict";Object.defineProperty(Ql,"__esModule",{value:!0});Ql.getPayloadHash=void 0;var VF=Qy(),$F=zl(),HF=di(),rb=Gn(),GF=n(async({headers:t,body:e},r)=>{for(let i of Object.keys(t))if(i.toLowerCase()===rb.SHA256_HEADER)return t[i];if(e==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof e=="string"||ArrayBuffer.isView(e)||(0,VF.isArrayBuffer)(e)){let i=new r;return i.update((0,HF.toUint8Array)(e)),(0,$F.toHex)(await i.digest())}return rb.UNSIGNED_PAYLOAD},"getPayloadHash");Ql.getPayloadHash=GF});var ib=u(Hi=>{"use strict";Object.defineProperty(Hi,"__esModule",{value:!0});Hi.deleteHeader=Hi.getHeaderValue=Hi.hasHeader=void 0;var BF=n((t,e)=>{t=t.toLowerCase();for(let r of Object.keys(e))if(t===r.toLowerCase())return!0;return!1},"hasHeader");Hi.hasHeader=BF;var JF=n((t,e)=>{t=t.toLowerCase();for(let r of Object.keys(e))if(t===r.toLowerCase())return e[r]},"getHeaderValue");Hi.getHeaderValue=JF;var KF=n((t,e)=>{t=t.toLowerCase();for(let r of Object.keys(e))t===r.toLowerCase()&&delete e[r]},"deleteHeader");Hi.deleteHeader=KF});var dg=u(Bn=>{"use strict";Object.defineProperty(Bn,"__esModule",{value:!0});Bn.cloneQuery=Bn.cloneRequest=void 0;var YF=n(({headers:t,query:e,...r})=>({...r,headers:{...t},query:e?(0,Bn.cloneQuery)(e):void 0}),"cloneRequest");Bn.cloneRequest=YF;var QF=n(t=>Object.keys(t).reduce((e,r)=>{let i=t[r];return{...e,[r]:Array.isArray(i)?[...i]:i}},{}),"cloneQuery");Bn.cloneQuery=QF});var ug=u(Xl=>{"use strict";Object.defineProperty(Xl,"__esModule",{value:!0});Xl.moveHeadersToQuery=void 0;var XF=dg(),ZF=n((t,e={})=>{var r;let{headers:i,query:s={}}=typeof t.clone=="function"?t.clone():(0,XF.cloneRequest)(t);for(let o of Object.keys(i)){let a=o.toLowerCase();a.slice(0,6)==="x-amz-"&&!(!((r=e.unhoistableHeaders)===null||r===void 0)&&r.has(a))&&(s[o]=i[o],delete i[o])}return{...t,headers:i,query:s}},"moveHeadersToQuery");Xl.moveHeadersToQuery=ZF});var lg=u(Zl=>{"use strict";Object.defineProperty(Zl,"__esModule",{value:!0});Zl.prepareRequest=void 0;var eL=dg(),tL=Gn(),rL=n(t=>{t=typeof t.clone=="function"?t.clone():(0,eL.cloneRequest)(t);for(let e of Object.keys(t.headers))tL.GENERATED_HEADERS.indexOf(e.toLowerCase())>-1&&delete t.headers[e];return t},"prepareRequest");Zl.prepareRequest=rL});var nb=u(Jn=>{"use strict";Object.defineProperty(Jn,"__esModule",{value:!0});Jn.toDate=Jn.iso8601=void 0;var iL=n(t=>(0,Jn.toDate)(t).toISOString().replace(/\.\d{3}Z$/,"Z"),"iso8601");Jn.iso8601=iL;var nL=n(t=>typeof t=="number"?new Date(t*1e3):typeof t=="string"?Number(t)?new Date(Number(t)*1e3):new Date(t):t,"toDate");Jn.toDate=nL});var db=u(np=>{"use strict";Object.defineProperty(np,"__esModule",{value:!0});np.SignatureV4=void 0;var ep=zl(),sb=Fn(),pg=di(),je=Gn(),tp=rg(),ob=ng(),sL=ag(),fg=cg(),oL=ib(),aL=ug(),ab=lg(),cL=nb(),ip=class{constructor({applyChecksum:e,credentials:r,region:i,service:s,sha256:o,uriEscapePath:a=!0}){this.service=s,this.sha256=o,this.uriEscapePath=a,this.applyChecksum=typeof e=="boolean"?e:!0,this.regionProvider=(0,sb.normalizeProvider)(i),this.credentialProvider=(0,sb.normalizeProvider)(r)}async presign(e,r={}){let{signingDate:i=new Date,expiresIn:s=3600,unsignableHeaders:o,unhoistableHeaders:a,signableHeaders:c,signingRegion:l,signingService:p}=r,f=await this.credentialProvider();this.validateResolvedCredentials(f);let m=l??await this.regionProvider(),{longDate:h,shortDate:_}=rp(i);if(s>je.MAX_PRESIGNED_TTL)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let w=(0,tp.createScope)(_,m,p??this.service),g=(0,aL.moveHeadersToQuery)((0,ab.prepareRequest)(e),{unhoistableHeaders:a});f.sessionToken&&(g.query[je.TOKEN_QUERY_PARAM]=f.sessionToken),g.query[je.ALGORITHM_QUERY_PARAM]=je.ALGORITHM_IDENTIFIER,g.query[je.CREDENTIAL_QUERY_PARAM]=`${f.accessKeyId}/${w}`,g.query[je.AMZ_DATE_QUERY_PARAM]=h,g.query[je.EXPIRES_QUERY_PARAM]=s.toString(10);let S=(0,ob.getCanonicalHeaders)(g,o,c);return g.query[je.SIGNED_HEADERS_QUERY_PARAM]=cb(S),g.query[je.SIGNATURE_QUERY_PARAM]=await this.getSignature(h,w,this.getSigningKey(f,m,_,p),this.createCanonicalRequest(g,S,await(0,fg.getPayloadHash)(e,this.sha256))),g}async sign(e,r){return typeof e=="string"?this.signString(e,r):e.headers&&e.payload?this.signEvent(e,r):this.signRequest(e,r)}async signEvent({headers:e,payload:r},{signingDate:i=new Date,priorSignature:s,signingRegion:o,signingService:a}){let c=o??await this.regionProvider(),{shortDate:l,longDate:p}=rp(i),f=(0,tp.createScope)(l,c,a??this.service),m=await(0,fg.getPayloadHash)({headers:{},body:r},this.sha256),h=new this.sha256;h.update(e);let _=(0,ep.toHex)(await h.digest()),w=[je.EVENT_ALGORITHM_IDENTIFIER,p,f,s,_,m].join(`
`);return this.signString(w,{signingDate:i,signingRegion:c,signingService:a})}async signString(e,{signingDate:r=new Date,signingRegion:i,signingService:s}={}){let o=await this.credentialProvider();this.validateResolvedCredentials(o);let a=i??await this.regionProvider(),{shortDate:c}=rp(r),l=new this.sha256(await this.getSigningKey(o,a,c,s));return l.update((0,pg.toUint8Array)(e)),(0,ep.toHex)(await l.digest())}async signRequest(e,{signingDate:r=new Date,signableHeaders:i,unsignableHeaders:s,signingRegion:o,signingService:a}={}){let c=await this.credentialProvider();this.validateResolvedCredentials(c);let l=o??await this.regionProvider(),p=(0,ab.prepareRequest)(e),{longDate:f,shortDate:m}=rp(r),h=(0,tp.createScope)(m,l,a??this.service);p.headers[je.AMZ_DATE_HEADER]=f,c.sessionToken&&(p.headers[je.TOKEN_HEADER]=c.sessionToken);let _=await(0,fg.getPayloadHash)(p,this.sha256);!(0,oL.hasHeader)(je.SHA256_HEADER,p.headers)&&this.applyChecksum&&(p.headers[je.SHA256_HEADER]=_);let w=(0,ob.getCanonicalHeaders)(p,s,i),g=await this.getSignature(f,h,this.getSigningKey(c,l,m,a),this.createCanonicalRequest(p,w,_));return p.headers[je.AUTH_HEADER]=`${je.ALGORITHM_IDENTIFIER} Credential=${c.accessKeyId}/${h}, SignedHeaders=${cb(w)}, Signature=${g}`,p}createCanonicalRequest(e,r,i){let s=Object.keys(r).sort();return`${e.method}
${this.getCanonicalPath(e)}
${(0,sL.getCanonicalQuery)(e)}
${s.map(o=>`${o}:${r[o]}`).join(`
`)}

${s.join(";")}
${i}`}async createStringToSign(e,r,i){let s=new this.sha256;s.update((0,pg.toUint8Array)(i));let o=await s.digest();return`${je.ALGORITHM_IDENTIFIER}
${e}
${r}
${(0,ep.toHex)(o)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){let r=[];for(let o of e.split("/"))o?.length!==0&&o!=="."&&(o===".."?r.pop():r.push(o));let i=`${e?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&e?.endsWith("/")?"/":""}`;return encodeURIComponent(i).replace(/%2F/g,"/")}return e}async getSignature(e,r,i,s){let o=await this.createStringToSign(e,r,s),a=new this.sha256(await i);return a.update((0,pg.toUint8Array)(o)),(0,ep.toHex)(await a.digest())}getSigningKey(e,r,i,s){return(0,tp.getSigningKey)(this.sha256,e,i,r,s||this.service)}validateResolvedCredentials(e){if(typeof e!="object"||typeof e.accessKeyId!="string"||typeof e.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}};n(ip,"SignatureV4");np.SignatureV4=ip;var rp=n(t=>{let e=(0,cL.iso8601)(t).replace(/[\-:]/g,"");return{longDate:e,shortDate:e.slice(0,8)}},"formatDate"),cb=n(t=>Object.keys(t).sort().join(";"),"getCanonicalHeaderList")});var lb=u(pt=>{"use strict";Object.defineProperty(pt,"__esModule",{value:!0});pt.prepareRequest=pt.moveHeadersToQuery=pt.getPayloadHash=pt.getCanonicalQuery=pt.getCanonicalHeaders=void 0;var ub=(A(),b(x));ub.__exportStar(db(),pt);var dL=ng();Object.defineProperty(pt,"getCanonicalHeaders",{enumerable:!0,get:function(){return dL.getCanonicalHeaders}});var uL=ag();Object.defineProperty(pt,"getCanonicalQuery",{enumerable:!0,get:function(){return uL.getCanonicalQuery}});var lL=cg();Object.defineProperty(pt,"getPayloadHash",{enumerable:!0,get:function(){return lL.getPayloadHash}});var pL=ug();Object.defineProperty(pt,"moveHeadersToQuery",{enumerable:!0,get:function(){return pL.moveHeadersToQuery}});var fL=lg();Object.defineProperty(pt,"prepareRequest",{enumerable:!0,get:function(){return fL.prepareRequest}});ub.__exportStar(rg(),pt)});var fb=u(wo=>{"use strict";Object.defineProperty(wo,"__esModule",{value:!0});wo.resolveSigV4AuthConfig=wo.resolveAwsAuthConfig=void 0;var mL=ee(),mg=lb(),go=Fn(),hL=3e5,_L=n(t=>{let e=t.credentials?pb(t.credentials):t.credentialDefaultProvider(t),{signingEscapePath:r=!0,systemClockOffset:i=t.systemClockOffset||0,sha256:s}=t,o;return t.signer?o=(0,go.normalizeProvider)(t.signer):t.regionInfoProvider?o=n(()=>(0,go.normalizeProvider)(t.region)().then(async a=>[await t.regionInfoProvider(a,{useFipsEndpoint:await t.useFipsEndpoint(),useDualstackEndpoint:await t.useDualstackEndpoint()})||{},a]).then(([a,c])=>{let{signingRegion:l,signingService:p}=a;t.signingRegion=t.signingRegion||l||c,t.signingName=t.signingName||p||t.serviceId;let f={...t,credentials:e,region:t.signingRegion,service:t.signingName,sha256:s,uriEscapePath:r},m=t.signerConstructor||mg.SignatureV4;return new m(f)}),"signer"):o=n(async a=>{a=Object.assign({},{name:"sigv4",signingName:t.signingName||t.defaultSigningName,signingRegion:await(0,go.normalizeProvider)(t.region)(),properties:{}},a);let c=a.signingRegion,l=a.signingName;t.signingRegion=t.signingRegion||c,t.signingName=t.signingName||l||t.serviceId;let p={...t,credentials:e,region:t.signingRegion,service:t.signingName,sha256:s,uriEscapePath:r},f=t.signerConstructor||mg.SignatureV4;return new f(p)},"signer"),{...t,systemClockOffset:i,signingEscapePath:r,credentials:e,signer:o}},"resolveAwsAuthConfig");wo.resolveAwsAuthConfig=_L;var yL=n(t=>{let e=t.credentials?pb(t.credentials):t.credentialDefaultProvider(t),{signingEscapePath:r=!0,systemClockOffset:i=t.systemClockOffset||0,sha256:s}=t,o;return t.signer?o=(0,go.normalizeProvider)(t.signer):o=(0,go.normalizeProvider)(new mg.SignatureV4({credentials:e,region:t.region,service:t.signingName,sha256:s,uriEscapePath:r})),{...t,systemClockOffset:i,signingEscapePath:r,credentials:e,signer:o}},"resolveSigV4AuthConfig");wo.resolveSigV4AuthConfig=yL;var pb=n(t=>typeof t=="function"?(0,mL.memoize)(t,e=>e.expiration!==void 0&&e.expiration.getTime()-Date.now()<hL,e=>e.expiration!==void 0):(0,go.normalizeProvider)(t),"normalizeCredentialProvider")});var hg=u(sp=>{"use strict";Object.defineProperty(sp,"__esModule",{value:!0});sp.getSkewCorrectedDate=void 0;var gL=n(t=>new Date(Date.now()+t),"getSkewCorrectedDate");sp.getSkewCorrectedDate=gL});var mb=u(op=>{"use strict";Object.defineProperty(op,"__esModule",{value:!0});op.isClockSkewed=void 0;var wL=hg(),EL=n((t,e)=>Math.abs((0,wL.getSkewCorrectedDate)(e).getTime()-t)>=3e5,"isClockSkewed");op.isClockSkewed=EL});var hb=u(ap=>{"use strict";Object.defineProperty(ap,"__esModule",{value:!0});ap.getUpdatedSystemClockOffset=void 0;var vL=mb(),SL=n((t,e)=>{let r=Date.parse(t);return(0,vL.isClockSkewed)(r,e)?r-Date.now():e},"getUpdatedSystemClockOffset");ap.getUpdatedSystemClockOffset=SL});var wb=u(xt=>{"use strict";Object.defineProperty(xt,"__esModule",{value:!0});xt.getSigV4AuthPlugin=xt.getAwsAuthPlugin=xt.awsAuthMiddlewareOptions=xt.awsAuthMiddleware=void 0;var gb=tt(),NL=hg(),_b=hb(),bL=n(t=>(e,r)=>async function(i){var s,o,a,c;if(!gb.HttpRequest.isInstance(i.request))return e(i);let l=(a=(o=(s=r.endpointV2)===null||s===void 0?void 0:s.properties)===null||o===void 0?void 0:o.authSchemes)===null||a===void 0?void 0:a[0],p=l?.name==="sigv4a"?(c=l?.signingRegionSet)===null||c===void 0?void 0:c.join(","):void 0,f=await t.signer(l),m=await e({...i,request:await f.sign(i.request,{signingDate:(0,NL.getSkewCorrectedDate)(t.systemClockOffset),signingRegion:p||r.signing_region,signingService:r.signing_service})}).catch(_=>{var w;let g=(w=_.ServerTime)!==null&&w!==void 0?w:yb(_.$response);throw g&&(t.systemClockOffset=(0,_b.getUpdatedSystemClockOffset)(g,t.systemClockOffset)),_}),h=yb(m.response);return h&&(t.systemClockOffset=(0,_b.getUpdatedSystemClockOffset)(h,t.systemClockOffset)),m},"awsAuthMiddleware");xt.awsAuthMiddleware=bL;var yb=n(t=>{var e,r,i;return gb.HttpResponse.isInstance(t)?(r=(e=t.headers)===null||e===void 0?void 0:e.date)!==null&&r!==void 0?r:(i=t.headers)===null||i===void 0?void 0:i.Date:void 0},"getDateHeader");xt.awsAuthMiddlewareOptions={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0};var xL=n(t=>({applyToStack:e=>{e.addRelativeTo((0,xt.awsAuthMiddleware)(t),xt.awsAuthMiddlewareOptions)}}),"getAwsAuthPlugin");xt.getAwsAuthPlugin=xL;xt.getSigV4AuthPlugin=xt.getAwsAuthPlugin});var ui=u(cp=>{"use strict";Object.defineProperty(cp,"__esModule",{value:!0});var Eb=(A(),b(x));Eb.__exportStar(fb(),cp);Eb.__exportStar(wb(),cp)});var vb=u(dp=>{"use strict";Object.defineProperty(dp,"__esModule",{value:!0});dp.resolveUserAgentConfig=void 0;function AL(t){return{...t,customUserAgent:typeof t.customUserAgent=="string"?[[t.customUserAgent]]:t.customUserAgent}}n(AL,"resolveUserAgentConfig");dp.resolveUserAgentConfig=AL});var Sb=u(Er=>{"use strict";Object.defineProperty(Er,"__esModule",{value:!0});Er.UA_ESCAPE_REGEX=Er.SPACE=Er.X_AMZ_USER_AGENT=Er.USER_AGENT=void 0;Er.USER_AGENT="user-agent";Er.X_AMZ_USER_AGENT="x-amz-user-agent";Er.SPACE=" ";Er.UA_ESCAPE_REGEX=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g});var Nb=u(vr=>{"use strict";Object.defineProperty(vr,"__esModule",{value:!0});vr.getUserAgentPlugin=vr.getUserAgentMiddlewareOptions=vr.userAgentMiddleware=void 0;var TL=tt(),Gi=Sb(),OL=n(t=>(e,r)=>async i=>{var s,o;let{request:a}=i;if(!TL.HttpRequest.isInstance(a))return e(i);let{headers:c}=a,l=((s=r?.userAgent)===null||s===void 0?void 0:s.map(_g))||[],p=(await t.defaultUserAgentProvider()).map(_g),f=((o=t?.customUserAgent)===null||o===void 0?void 0:o.map(_g))||[],m=[...p,...l,...f].join(Gi.SPACE),h=[...p.filter(_=>_.startsWith("aws-sdk-")),...f].join(Gi.SPACE);return t.runtime!=="browser"?(h&&(c[Gi.X_AMZ_USER_AGENT]=c[Gi.X_AMZ_USER_AGENT]?`${c[Gi.USER_AGENT]} ${h}`:h),c[Gi.USER_AGENT]=m):c[Gi.X_AMZ_USER_AGENT]=m,e({...i,request:a})},"userAgentMiddleware");vr.userAgentMiddleware=OL;var _g=n(([t,e])=>{let r=t.indexOf("/"),i=t.substring(0,r),s=t.substring(r+1);return i==="api"&&(s=s.toLowerCase()),[i,s,e].filter(o=>o&&o.length>0).map(o=>o?.replace(Gi.UA_ESCAPE_REGEX,"_")).join("/")},"escapeUserAgent");vr.getUserAgentMiddlewareOptions={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0};var PL=n(t=>({applyToStack:e=>{e.add((0,vr.userAgentMiddleware)(t),vr.getUserAgentMiddlewareOptions)}}),"getUserAgentPlugin");vr.getUserAgentPlugin=PL});var zc=u(up=>{"use strict";Object.defineProperty(up,"__esModule",{value:!0});var bb=(A(),b(x));bb.__exportStar(vb(),up);bb.__exportStar(Nb(),up)});var xb=u(lp=>{"use strict";Object.defineProperty(lp,"__esModule",{value:!0});lp.resolveClientEndpointParameters=void 0;var RL=n(t=>({...t,useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"rds-data"}),"resolveClientEndpointParameters");lp.resolveClientEndpointParameters=RL});var Ab=u((Lpe,IL)=>{IL.exports={name:"@aws-sdk/client-rds-data",description:"AWS SDK for JavaScript Rds Data Client for Node.js, Browser and React Native",version:"3.279.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","generate:client":"node ../../scripts/generate-clients/single-service --solo rds-data"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/client-sts":"3.279.0","@aws-sdk/config-resolver":"3.272.0","@aws-sdk/credential-provider-node":"3.279.0","@aws-sdk/fetch-http-handler":"3.272.0","@aws-sdk/hash-node":"3.272.0","@aws-sdk/invalid-dependency":"3.272.0","@aws-sdk/middleware-content-length":"3.272.0","@aws-sdk/middleware-endpoint":"3.272.0","@aws-sdk/middleware-host-header":"3.278.0","@aws-sdk/middleware-logger":"3.272.0","@aws-sdk/middleware-recursion-detection":"3.272.0","@aws-sdk/middleware-retry":"3.272.0","@aws-sdk/middleware-serde":"3.272.0","@aws-sdk/middleware-signing":"3.272.0","@aws-sdk/middleware-stack":"3.272.0","@aws-sdk/middleware-user-agent":"3.272.0","@aws-sdk/node-config-provider":"3.272.0","@aws-sdk/node-http-handler":"3.272.0","@aws-sdk/protocol-http":"3.272.0","@aws-sdk/smithy-client":"3.279.0","@aws-sdk/types":"3.272.0","@aws-sdk/url-parser":"3.272.0","@aws-sdk/util-base64":"3.208.0","@aws-sdk/util-body-length-browser":"3.188.0","@aws-sdk/util-body-length-node":"3.208.0","@aws-sdk/util-defaults-mode-browser":"3.279.0","@aws-sdk/util-defaults-mode-node":"3.279.0","@aws-sdk/util-endpoints":"3.272.0","@aws-sdk/util-retry":"3.272.0","@aws-sdk/util-user-agent-browser":"3.272.0","@aws-sdk/util-user-agent-node":"3.272.0","@aws-sdk/util-utf8":"3.254.0",tslib:"^2.3.1"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.208.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.19.2",typescript:"~4.6.2"},overrides:{typedoc:{typescript:"~4.6.2"}},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-rds-data",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-rds-data"}}});var fp=u(pp=>{"use strict";Object.defineProperty(pp,"__esModule",{value:!0});pp.STSServiceException=void 0;var qL=C(),Eo=class extends qL.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,Eo.prototype)}};n(Eo,"STSServiceException");pp.STSServiceException=Eo});var er=u(P=>{"use strict";Object.defineProperty(P,"__esModule",{value:!0});P.GetSessionTokenResponseFilterSensitiveLog=P.GetSessionTokenRequestFilterSensitiveLog=P.GetFederationTokenResponseFilterSensitiveLog=P.FederatedUserFilterSensitiveLog=P.GetFederationTokenRequestFilterSensitiveLog=P.GetCallerIdentityResponseFilterSensitiveLog=P.GetCallerIdentityRequestFilterSensitiveLog=P.GetAccessKeyInfoResponseFilterSensitiveLog=P.GetAccessKeyInfoRequestFilterSensitiveLog=P.DecodeAuthorizationMessageResponseFilterSensitiveLog=P.DecodeAuthorizationMessageRequestFilterSensitiveLog=P.AssumeRoleWithWebIdentityResponseFilterSensitiveLog=P.AssumeRoleWithWebIdentityRequestFilterSensitiveLog=P.AssumeRoleWithSAMLResponseFilterSensitiveLog=P.AssumeRoleWithSAMLRequestFilterSensitiveLog=P.AssumeRoleResponseFilterSensitiveLog=P.CredentialsFilterSensitiveLog=P.AssumeRoleRequestFilterSensitiveLog=P.TagFilterSensitiveLog=P.PolicyDescriptorTypeFilterSensitiveLog=P.AssumedRoleUserFilterSensitiveLog=P.InvalidAuthorizationMessageException=P.IDPCommunicationErrorException=P.InvalidIdentityTokenException=P.IDPRejectedClaimException=P.RegionDisabledException=P.PackedPolicyTooLargeException=P.MalformedPolicyDocumentException=P.ExpiredTokenException=void 0;var Bi=fp(),vo=class extends Bi.STSServiceException{constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,vo.prototype)}};n(vo,"ExpiredTokenException");P.ExpiredTokenException=vo;var So=class extends Bi.STSServiceException{constructor(e){super({name:"MalformedPolicyDocumentException",$fault:"client",...e}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,So.prototype)}};n(So,"MalformedPolicyDocumentException");P.MalformedPolicyDocumentException=So;var No=class extends Bi.STSServiceException{constructor(e){super({name:"PackedPolicyTooLargeException",$fault:"client",...e}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,No.prototype)}};n(No,"PackedPolicyTooLargeException");P.PackedPolicyTooLargeException=No;var bo=class extends Bi.STSServiceException{constructor(e){super({name:"RegionDisabledException",$fault:"client",...e}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,bo.prototype)}};n(bo,"RegionDisabledException");P.RegionDisabledException=bo;var xo=class extends Bi.STSServiceException{constructor(e){super({name:"IDPRejectedClaimException",$fault:"client",...e}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,xo.prototype)}};n(xo,"IDPRejectedClaimException");P.IDPRejectedClaimException=xo;var Ao=class extends Bi.STSServiceException{constructor(e){super({name:"InvalidIdentityTokenException",$fault:"client",...e}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,Ao.prototype)}};n(Ao,"InvalidIdentityTokenException");P.InvalidIdentityTokenException=Ao;var To=class extends Bi.STSServiceException{constructor(e){super({name:"IDPCommunicationErrorException",$fault:"client",...e}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,To.prototype)}};n(To,"IDPCommunicationErrorException");P.IDPCommunicationErrorException=To;var Oo=class extends Bi.STSServiceException{constructor(e){super({name:"InvalidAuthorizationMessageException",$fault:"client",...e}),this.name="InvalidAuthorizationMessageException",this.$fault="client",Object.setPrototypeOf(this,Oo.prototype)}};n(Oo,"InvalidAuthorizationMessageException");P.InvalidAuthorizationMessageException=Oo;var CL=n(t=>({...t}),"AssumedRoleUserFilterSensitiveLog");P.AssumedRoleUserFilterSensitiveLog=CL;var kL=n(t=>({...t}),"PolicyDescriptorTypeFilterSensitiveLog");P.PolicyDescriptorTypeFilterSensitiveLog=kL;var ML=n(t=>({...t}),"TagFilterSensitiveLog");P.TagFilterSensitiveLog=ML;var DL=n(t=>({...t}),"AssumeRoleRequestFilterSensitiveLog");P.AssumeRoleRequestFilterSensitiveLog=DL;var FL=n(t=>({...t}),"CredentialsFilterSensitiveLog");P.CredentialsFilterSensitiveLog=FL;var LL=n(t=>({...t}),"AssumeRoleResponseFilterSensitiveLog");P.AssumeRoleResponseFilterSensitiveLog=LL;var zL=n(t=>({...t}),"AssumeRoleWithSAMLRequestFilterSensitiveLog");P.AssumeRoleWithSAMLRequestFilterSensitiveLog=zL;var UL=n(t=>({...t}),"AssumeRoleWithSAMLResponseFilterSensitiveLog");P.AssumeRoleWithSAMLResponseFilterSensitiveLog=UL;var WL=n(t=>({...t}),"AssumeRoleWithWebIdentityRequestFilterSensitiveLog");P.AssumeRoleWithWebIdentityRequestFilterSensitiveLog=WL;var jL=n(t=>({...t}),"AssumeRoleWithWebIdentityResponseFilterSensitiveLog");P.AssumeRoleWithWebIdentityResponseFilterSensitiveLog=jL;var VL=n(t=>({...t}),"DecodeAuthorizationMessageRequestFilterSensitiveLog");P.DecodeAuthorizationMessageRequestFilterSensitiveLog=VL;var $L=n(t=>({...t}),"DecodeAuthorizationMessageResponseFilterSensitiveLog");P.DecodeAuthorizationMessageResponseFilterSensitiveLog=$L;var HL=n(t=>({...t}),"GetAccessKeyInfoRequestFilterSensitiveLog");P.GetAccessKeyInfoRequestFilterSensitiveLog=HL;var GL=n(t=>({...t}),"GetAccessKeyInfoResponseFilterSensitiveLog");P.GetAccessKeyInfoResponseFilterSensitiveLog=GL;var BL=n(t=>({...t}),"GetCallerIdentityRequestFilterSensitiveLog");P.GetCallerIdentityRequestFilterSensitiveLog=BL;var JL=n(t=>({...t}),"GetCallerIdentityResponseFilterSensitiveLog");P.GetCallerIdentityResponseFilterSensitiveLog=JL;var KL=n(t=>({...t}),"GetFederationTokenRequestFilterSensitiveLog");P.GetFederationTokenRequestFilterSensitiveLog=KL;var YL=n(t=>({...t}),"FederatedUserFilterSensitiveLog");P.FederatedUserFilterSensitiveLog=YL;var QL=n(t=>({...t}),"GetFederationTokenResponseFilterSensitiveLog");P.GetFederationTokenResponseFilterSensitiveLog=QL;var XL=n(t=>({...t}),"GetSessionTokenRequestFilterSensitiveLog");P.GetSessionTokenRequestFilterSensitiveLog=XL;var ZL=n(t=>({...t}),"GetSessionTokenResponseFilterSensitiveLog");P.GetSessionTokenResponseFilterSensitiveLog=ZL});var yg=u(li=>{"use strict";var Tb=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",ez=Tb+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",Ob="["+Tb+"]["+ez+"]*",tz=new RegExp("^"+Ob+"$"),rz=n(function(t,e){let r=[],i=e.exec(t);for(;i;){let s=[];s.startIndex=e.lastIndex-i[0].length;let o=i.length;for(let a=0;a<o;a++)s.push(i[a]);r.push(s),i=e.exec(t)}return r},"getAllMatches"),iz=n(function(t){let e=tz.exec(t);return!(e===null||typeof e>"u")},"isName");li.isExist=function(t){return typeof t<"u"};li.isEmptyObject=function(t){return Object.keys(t).length===0};li.merge=function(t,e,r){if(e){let i=Object.keys(e),s=i.length;for(let o=0;o<s;o++)r==="strict"?t[i[o]]=[e[i[o]]]:t[i[o]]=e[i[o]]}};li.getValue=function(t){return li.isExist(t)?t:""};li.isName=iz;li.getAllMatches=rz;li.nameRegexp=Ob});var wg=u(Cb=>{"use strict";var gg=yg(),nz={allowBooleanAttributes:!1,unpairedTags:[]};Cb.validate=function(t,e){e=Object.assign({},nz,e);let r=[],i=!1,s=!1;t[0]==="\uFEFF"&&(t=t.substr(1));for(let o=0;o<t.length;o++)if(t[o]==="<"&&t[o+1]==="?"){if(o+=2,o=Rb(t,o),o.err)return o}else if(t[o]==="<"){let a=o;if(o++,t[o]==="!"){o=Ib(t,o);continue}else{let c=!1;t[o]==="/"&&(c=!0,o++);let l="";for(;o<t.length&&t[o]!==">"&&t[o]!==" "&&t[o]!=="	"&&t[o]!==`
`&&t[o]!=="\r";o++)l+=t[o];if(l=l.trim(),l[l.length-1]==="/"&&(l=l.substring(0,l.length-1),o--),!pz(l)){let m;return l.trim().length===0?m="Invalid space after '<'.":m="Tag '"+l+"' is an invalid name.",Oe("InvalidTag",m,ft(t,o))}let p=az(t,o);if(p===!1)return Oe("InvalidAttr","Attributes for '"+l+"' have open quote.",ft(t,o));let f=p.value;if(o=p.index,f[f.length-1]==="/"){let m=o-f.length;f=f.substring(0,f.length-1);let h=qb(f,e);if(h===!0)i=!0;else return Oe(h.err.code,h.err.msg,ft(t,m+h.err.line))}else if(c)if(p.tagClosed){if(f.trim().length>0)return Oe("InvalidTag","Closing tag '"+l+"' can't have attributes or invalid starting.",ft(t,a));{let m=r.pop();if(l!==m.tagName){let h=ft(t,m.tagStartPos);return Oe("InvalidTag","Expected closing tag '"+m.tagName+"' (opened in line "+h.line+", col "+h.col+") instead of closing tag '"+l+"'.",ft(t,a))}r.length==0&&(s=!0)}}else return Oe("InvalidTag","Closing tag '"+l+"' doesn't have proper closing.",ft(t,o));else{let m=qb(f,e);if(m!==!0)return Oe(m.err.code,m.err.msg,ft(t,o-f.length+m.err.line));if(s===!0)return Oe("InvalidXml","Multiple possible root nodes found.",ft(t,o));e.unpairedTags.indexOf(l)!==-1||r.push({tagName:l,tagStartPos:a}),i=!0}for(o++;o<t.length;o++)if(t[o]==="<")if(t[o+1]==="!"){o++,o=Ib(t,o);continue}else if(t[o+1]==="?"){if(o=Rb(t,++o),o.err)return o}else break;else if(t[o]==="&"){let m=uz(t,o);if(m==-1)return Oe("InvalidChar","char '&' is not expected.",ft(t,o));o=m}else if(s===!0&&!Pb(t[o]))return Oe("InvalidXml","Extra text at the end",ft(t,o));t[o]==="<"&&o--}}else{if(Pb(t[o]))continue;return Oe("InvalidChar","char '"+t[o]+"' is not expected.",ft(t,o))}if(i){if(r.length==1)return Oe("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",ft(t,r[0].tagStartPos));if(r.length>0)return Oe("InvalidXml","Invalid '"+JSON.stringify(r.map(o=>o.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return Oe("InvalidXml","Start tag expected.",1);return!0};function Pb(t){return t===" "||t==="	"||t===`
`||t==="\r"}n(Pb,"isWhiteSpace");function Rb(t,e){let r=e;for(;e<t.length;e++)if(t[e]=="?"||t[e]==" "){let i=t.substr(r,e-r);if(e>5&&i==="xml")return Oe("InvalidXml","XML declaration allowed only at the start of the document.",ft(t,e));if(t[e]=="?"&&t[e+1]==">"){e++;break}else continue}return e}n(Rb,"readPI");function Ib(t,e){if(t.length>e+5&&t[e+1]==="-"&&t[e+2]==="-"){for(e+=3;e<t.length;e++)if(t[e]==="-"&&t[e+1]==="-"&&t[e+2]===">"){e+=2;break}}else if(t.length>e+8&&t[e+1]==="D"&&t[e+2]==="O"&&t[e+3]==="C"&&t[e+4]==="T"&&t[e+5]==="Y"&&t[e+6]==="P"&&t[e+7]==="E"){let r=1;for(e+=8;e<t.length;e++)if(t[e]==="<")r++;else if(t[e]===">"&&(r--,r===0))break}else if(t.length>e+9&&t[e+1]==="["&&t[e+2]==="C"&&t[e+3]==="D"&&t[e+4]==="A"&&t[e+5]==="T"&&t[e+6]==="A"&&t[e+7]==="["){for(e+=8;e<t.length;e++)if(t[e]==="]"&&t[e+1]==="]"&&t[e+2]===">"){e+=2;break}}return e}n(Ib,"readCommentAndCDATA");var sz='"',oz="'";function az(t,e){let r="",i="",s=!1;for(;e<t.length;e++){if(t[e]===sz||t[e]===oz)i===""?i=t[e]:i!==t[e]||(i="");else if(t[e]===">"&&i===""){s=!0;break}r+=t[e]}return i!==""?!1:{value:r,index:e,tagClosed:s}}n(az,"readAttributeStr");var cz=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function qb(t,e){let r=gg.getAllMatches(t,cz),i={};for(let s=0;s<r.length;s++){if(r[s][1].length===0)return Oe("InvalidAttr","Attribute '"+r[s][2]+"' has no space in starting.",Uc(r[s]));if(r[s][3]!==void 0&&r[s][4]===void 0)return Oe("InvalidAttr","Attribute '"+r[s][2]+"' is without value.",Uc(r[s]));if(r[s][3]===void 0&&!e.allowBooleanAttributes)return Oe("InvalidAttr","boolean attribute '"+r[s][2]+"' is not allowed.",Uc(r[s]));let o=r[s][2];if(!lz(o))return Oe("InvalidAttr","Attribute '"+o+"' is an invalid name.",Uc(r[s]));if(!i.hasOwnProperty(o))i[o]=1;else return Oe("InvalidAttr","Attribute '"+o+"' is repeated.",Uc(r[s]))}return!0}n(qb,"validateAttributeString");function dz(t,e){let r=/\d/;for(t[e]==="x"&&(e++,r=/[\da-fA-F]/);e<t.length;e++){if(t[e]===";")return e;if(!t[e].match(r))break}return-1}n(dz,"validateNumberAmpersand");function uz(t,e){if(e++,t[e]===";")return-1;if(t[e]==="#")return e++,dz(t,e);let r=0;for(;e<t.length;e++,r++)if(!(t[e].match(/\w/)&&r<20)){if(t[e]===";")break;return-1}return e}n(uz,"validateAmpersand");function Oe(t,e,r){return{err:{code:t,msg:e,line:r.line||r,col:r.col}}}n(Oe,"getErrorObject");function lz(t){return gg.isName(t)}n(lz,"validateAttrName");function pz(t){return gg.isName(t)}n(pz,"validateTagName");function ft(t,e){let r=t.substring(0,e).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}n(ft,"getLineNumberForPosition");function Uc(t){return t.startIndex+t[1].length}n(Uc,"getPositionFromMatch")});var Mb=u(Eg=>{var kb={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1},fz=n(function(t){return Object.assign({},kb,t)},"buildOptions");Eg.buildOptions=fz;Eg.defaultOptions=kb});var Fb=u((Kpe,Db)=>{"use strict";var mp=class{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,r){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:r})}addChild(e){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,[":@"]:e[":@"]}):this.child.push({[e.tagname]:e.child})}};n(mp,"XmlNode");Db.exports=mp});var zb=u((Qpe,Lb)=>{function mz(t,e){let r={};if(t[e+3]==="O"&&t[e+4]==="C"&&t[e+5]==="T"&&t[e+6]==="Y"&&t[e+7]==="P"&&t[e+8]==="E"){e=e+9;let i=1,s=!1,o=!1,a=!1,c="";for(;e<t.length;e++)if(t[e]==="<"&&!a){if(s&&t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="N"&&t[e+4]==="T"&&t[e+5]==="I"&&t[e+6]==="T"&&t[e+7]==="Y")e+=7,o=!0;else if(s&&t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="L"&&t[e+4]==="E"&&t[e+5]==="M"&&t[e+6]==="E"&&t[e+7]==="N"&&t[e+8]==="T")e+=8;else if(s&&t[e+1]==="!"&&t[e+2]==="A"&&t[e+3]==="T"&&t[e+4]==="T"&&t[e+5]==="L"&&t[e+6]==="I"&&t[e+7]==="S"&&t[e+8]==="T")e+=8;else if(s&&t[e+1]==="!"&&t[e+2]==="N"&&t[e+3]==="O"&&t[e+4]==="T"&&t[e+5]==="A"&&t[e+6]==="T"&&t[e+7]==="I"&&t[e+8]==="O"&&t[e+9]==="N")e+=9;else if(t[e+1]==="!"&&t[e+2]==="-"&&t[e+3]==="-")a=!0;else throw new Error("Invalid DOCTYPE");i++,c=""}else if(t[e]===">"){if(a?t[e-1]==="-"&&t[e-2]==="-"&&(a=!1,i--):(o&&(_z(c,r),o=!1),i--),i===0)break}else t[e]==="["?s=!0:c+=t[e];if(i!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:e}}n(mz,"readDocType");var hz=RegExp(`^\\s([a-zA-z0-0]+)[ 	](['"])([^&]+)\\2`);function _z(t,e){let r=hz.exec(t);r&&(e[r[1]]={regx:RegExp(`&${r[1]};`,"g"),val:r[3]})}n(_z,"parseEntityExp");Lb.exports=mz});var Wb=u((Zpe,Ub)=>{var yz=/^[-+]?0x[a-fA-F0-9]+$/,gz=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var wz={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function Ez(t,e={}){if(e=Object.assign({},wz,e),!t||typeof t!="string")return t;let r=t.trim();if(e.skipLike!==void 0&&e.skipLike.test(r))return t;if(e.hex&&yz.test(r))return Number.parseInt(r,16);{let i=gz.exec(r);if(i){let s=i[1],o=i[2],a=vz(i[3]),c=i[4]||i[6];if(!e.leadingZeros&&o.length>0&&s&&r[2]!==".")return t;if(!e.leadingZeros&&o.length>0&&!s&&r[1]!==".")return t;{let l=Number(r),p=""+l;return p.search(/[eE]/)!==-1||c?e.eNotation?l:t:r.indexOf(".")!==-1?p==="0"&&a===""||p===a||s&&p==="-"+a?l:t:o?a===p||s+a===p?l:t:r===p||r===s+p?l:t}}else return t}}n(Ez,"toNumber");function vz(t){return t&&t.indexOf(".")!==-1&&(t=t.replace(/0+$/,""),t==="."?t="0":t[0]==="."?t="0"+t:t[t.length-1]==="."&&(t=t.substr(0,t.length-1))),t}n(vz,"trimZeros");Ub.exports=Ez});var Vb=u((rfe,jb)=>{"use strict";var Ng=yg(),Wc=Fb(),Sz=zb(),Nz=Wb(),tfe="<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,Ng.nameRegexp),hp=class{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"}},this.addExternalEntities=bz,this.parseXml=Pz,this.parseTextData=xz,this.resolveNameSpace=Az,this.buildAttributesMap=Oz,this.isItStopNode=qz,this.replaceEntitiesValue=Rz,this.readStopNodeData=kz,this.saveTextToParentTag=Iz}};n(hp,"OrderedObjParser");function bz(t){let e=Object.keys(t);for(let r=0;r<e.length;r++){let i=e[r];this.lastEntities[i]={regex:new RegExp("&"+i+";","g"),val:t[i]}}}n(bz,"addExternalEntities");function xz(t,e,r,i,s,o,a){if(t!==void 0&&(this.options.trimValues&&!i&&(t=t.trim()),t.length>0)){a||(t=this.replaceEntitiesValue(t));let c=this.options.tagValueProcessor(e,t,r,s,o);return c==null?t:typeof c!=typeof t||c!==t?c:this.options.trimValues?Sg(t,this.options.parseTagValue,this.options.numberParseOptions):t.trim()===t?Sg(t,this.options.parseTagValue,this.options.numberParseOptions):t}}n(xz,"parseTextData");function Az(t){if(this.options.removeNSPrefix){let e=t.split(":"),r=t.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(t=r+e[1])}return t}n(Az,"resolveNameSpace");var Tz=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function Oz(t,e){if(!this.options.ignoreAttributes&&typeof t=="string"){let r=Ng.getAllMatches(t,Tz),i=r.length,s={};for(let o=0;o<i;o++){let a=this.resolveNameSpace(r[o][1]),c=r[o][4],l=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(l=this.options.transformAttributeName(l)),l==="__proto__"&&(l="#__proto__"),c!==void 0){this.options.trimValues&&(c=c.trim()),c=this.replaceEntitiesValue(c);let p=this.options.attributeValueProcessor(a,c,e);p==null?s[l]=c:typeof p!=typeof c||p!==c?s[l]=p:s[l]=Sg(c,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(s[l]=!0)}if(!Object.keys(s).length)return;if(this.options.attributesGroupName){let o={};return o[this.options.attributesGroupName]=s,o}return s}}n(Oz,"buildAttributesMap");var Pz=n(function(t){t=t.replace(/\r\n?/g,`
`);let e=new Wc("!xml"),r=e,i="",s="";for(let o=0;o<t.length;o++)if(t[o]==="<")if(t[o+1]==="/"){let c=Kn(t,">",o,"Closing Tag is not closed."),l=t.substring(o+2,c).trim();if(this.options.removeNSPrefix){let p=l.indexOf(":");p!==-1&&(l=l.substr(p+1))}this.options.transformTagName&&(l=this.options.transformTagName(l)),r&&(i=this.saveTextToParentTag(i,r,s)),s=s.substr(0,s.lastIndexOf(".")),r=this.tagsNodeStack.pop(),i="",o=c}else if(t[o+1]==="?"){let c=vg(t,o,!1,"?>");if(!c)throw new Error("Pi Tag is not closed.");if(i=this.saveTextToParentTag(i,r,s),!(this.options.ignoreDeclaration&&c.tagName==="?xml"||this.options.ignorePiTags)){let l=new Wc(c.tagName);l.add(this.options.textNodeName,""),c.tagName!==c.tagExp&&c.attrExpPresent&&(l[":@"]=this.buildAttributesMap(c.tagExp,s)),r.addChild(l)}o=c.closeIndex+1}else if(t.substr(o+1,3)==="!--"){let c=Kn(t,"-->",o+4,"Comment is not closed.");if(this.options.commentPropName){let l=t.substring(o+4,c-2);i=this.saveTextToParentTag(i,r,s),r.add(this.options.commentPropName,[{[this.options.textNodeName]:l}])}o=c}else if(t.substr(o+1,2)==="!D"){let c=Sz(t,o);this.docTypeEntities=c.entities,o=c.i}else if(t.substr(o+1,2)==="!["){let c=Kn(t,"]]>",o,"CDATA is not closed.")-2,l=t.substring(o+9,c);if(i=this.saveTextToParentTag(i,r,s),this.options.cdataPropName)r.add(this.options.cdataPropName,[{[this.options.textNodeName]:l}]);else{let p=this.parseTextData(l,r.tagname,s,!0,!1,!0);p==null&&(p=""),r.add(this.options.textNodeName,p)}o=c+2}else{let c=vg(t,o,this.options.removeNSPrefix),l=c.tagName,p=c.tagExp,f=c.attrExpPresent,m=c.closeIndex;this.options.transformTagName&&(l=this.options.transformTagName(l)),r&&i&&r.tagname!=="!xml"&&(i=this.saveTextToParentTag(i,r,s,!1)),l!==e.tagname&&(s+=s?"."+l:l);let h=r;if(h&&this.options.unpairedTags.indexOf(h.tagname)!==-1&&(r=this.tagsNodeStack.pop()),this.isItStopNode(this.options.stopNodes,s,l)){let _="";if(p.length>0&&p.lastIndexOf("/")===p.length-1)o=c.closeIndex;else if(this.options.unpairedTags.indexOf(l)!==-1)o=c.closeIndex;else{let g=this.readStopNodeData(t,l,m+1);if(!g)throw new Error(`Unexpected end of ${l}`);o=g.i,_=g.tagContent}let w=new Wc(l);l!==p&&f&&(w[":@"]=this.buildAttributesMap(p,s)),_&&(_=this.parseTextData(_,l,s,!0,f,!0,!0)),s=s.substr(0,s.lastIndexOf(".")),w.add(this.options.textNodeName,_),r.addChild(w)}else{if(p.length>0&&p.lastIndexOf("/")===p.length-1){l[l.length-1]==="/"?(l=l.substr(0,l.length-1),p=l):p=p.substr(0,p.length-1),this.options.transformTagName&&(l=this.options.transformTagName(l));let _=new Wc(l);l!==p&&f&&(_[":@"]=this.buildAttributesMap(p,s)),s=s.substr(0,s.lastIndexOf(".")),r.addChild(_)}else{let _=new Wc(l);this.tagsNodeStack.push(r),l!==p&&f&&(_[":@"]=this.buildAttributesMap(p,s)),r.addChild(_),r=_}i="",o=m}}else i+=t[o];return e.child},"parseXml"),Rz=n(function(t){if(this.options.processEntities){for(let e in this.docTypeEntities){let r=this.docTypeEntities[e];t=t.replace(r.regx,r.val)}for(let e in this.lastEntities){let r=this.lastEntities[e];t=t.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){let r=this.htmlEntities[e];t=t.replace(r.regex,r.val)}t=t.replace(this.ampEntity.regex,this.ampEntity.val)}return t},"replaceEntitiesValue");function Iz(t,e,r,i){return t&&(i===void 0&&(i=Object.keys(e.child).length===0),t=this.parseTextData(t,e.tagname,r,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,i),t!==void 0&&t!==""&&e.add(this.options.textNodeName,t),t=""),t}n(Iz,"saveTextToParentTag");function qz(t,e,r){let i="*."+r;for(let s in t){let o=t[s];if(i===o||e===o)return!0}return!1}n(qz,"isItStopNode");function Cz(t,e,r=">"){let i,s="";for(let o=e;o<t.length;o++){let a=t[o];if(i)a===i&&(i="");else if(a==='"'||a==="'")i=a;else if(a===r[0])if(r[1]){if(t[o+1]===r[1])return{data:s,index:o}}else return{data:s,index:o};else a==="	"&&(a=" ");s+=a}}n(Cz,"tagExpWithClosingIndex");function Kn(t,e,r,i){let s=t.indexOf(e,r);if(s===-1)throw new Error(i);return s+e.length-1}n(Kn,"findClosingIndex");function vg(t,e,r,i=">"){let s=Cz(t,e+1,i);if(!s)return;let o=s.data,a=s.index,c=o.search(/\s/),l=o,p=!0;if(c!==-1&&(l=o.substr(0,c).replace(/\s\s*$/,""),o=o.substr(c+1)),r){let f=l.indexOf(":");f!==-1&&(l=l.substr(f+1),p=l!==s.data.substr(f+1))}return{tagName:l,tagExp:o,closeIndex:a,attrExpPresent:p}}n(vg,"readTagExp");function kz(t,e,r){let i=r,s=1;for(;r<t.length;r++)if(t[r]==="<")if(t[r+1]==="/"){let o=Kn(t,">",r,`${e} is not closed`);if(t.substring(r+2,o).trim()===e&&(s--,s===0))return{tagContent:t.substring(i,r),i:o};r=o}else if(t[r+1]==="?")r=Kn(t,"?>",r+1,"StopNode is not closed.");else if(t.substr(r+1,3)==="!--")r=Kn(t,"-->",r+3,"StopNode is not closed.");else if(t.substr(r+1,2)==="![")r=Kn(t,"]]>",r,"StopNode is not closed.")-2;else{let o=vg(t,r,">");o&&((o&&o.tagName)===e&&o.tagExp[o.tagExp.length-1]!=="/"&&s++,r=o.closeIndex)}}n(kz,"readStopNodeData");function Sg(t,e,r){if(e&&typeof t=="string"){let i=t.trim();return i==="true"?!0:i==="false"?!1:Nz(t,r)}else return Ng.isExist(t)?t:""}n(Sg,"parseValue");jb.exports=hp});var Gb=u(Hb=>{"use strict";function Mz(t,e){return $b(t,e)}n(Mz,"prettify");function $b(t,e,r){let i,s={};for(let o=0;o<t.length;o++){let a=t[o],c=Dz(a),l="";if(r===void 0?l=c:l=r+"."+c,c===e.textNodeName)i===void 0?i=a[c]:i+=""+a[c];else{if(c===void 0)continue;if(a[c]){let p=$b(a[c],e,l),f=Lz(p,e);a[":@"]?Fz(p,a[":@"],l,e):Object.keys(p).length===1&&p[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?p=p[e.textNodeName]:Object.keys(p).length===0&&(e.alwaysCreateTextNode?p[e.textNodeName]="":p=""),s[c]!==void 0&&s.hasOwnProperty(c)?(Array.isArray(s[c])||(s[c]=[s[c]]),s[c].push(p)):e.isArray(c,l,f)?s[c]=[p]:s[c]=p}}}return typeof i=="string"?i.length>0&&(s[e.textNodeName]=i):i!==void 0&&(s[e.textNodeName]=i),s}n($b,"compress");function Dz(t){let e=Object.keys(t);for(let r=0;r<e.length;r++){let i=e[r];if(i!==":@")return i}}n(Dz,"propName");function Fz(t,e,r,i){if(e){let s=Object.keys(e),o=s.length;for(let a=0;a<o;a++){let c=s[a];i.isArray(c,r+"."+c,!0,!0)?t[c]=[e[c]]:t[c]=e[c]}}}n(Fz,"assignAttributes");function Lz(t,e){let r=Object.keys(t).length;return!!(r===0||r===1&&t[e.textNodeName])}n(Lz,"isLeafTag");Hb.prettify=Mz});var Jb=u((ofe,Bb)=>{var{buildOptions:zz}=Mb(),Uz=Vb(),{prettify:Wz}=Gb(),jz=wg(),_p=class{constructor(e){this.externalEntities={},this.options=zz(e)}parse(e,r){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});let o=jz.validate(e,r);if(o!==!0)throw Error(`${o.err.msg}:${o.err.line}:${o.err.col}`)}let i=new Uz(this.options);i.addExternalEntities(this.externalEntities);let s=i.parseXml(e);return this.options.preserveOrder||s===void 0?s:Wz(s,this.options)}addEntity(e,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=r}};n(_p,"XMLParser");Bb.exports=_p});var Zb=u((cfe,Xb)=>{var Vz=`
`;function $z(t,e){let r="";return e.format&&e.indentBy.length>0&&(r=Vz),Yb(t,e,"",r)}n($z,"toXml");function Yb(t,e,r,i){let s="",o=!1;for(let a=0;a<t.length;a++){let c=t[a],l=Hz(c),p="";if(r.length===0?p=l:p=`${r}.${l}`,l===e.textNodeName){let w=c[l];Gz(p,e)||(w=e.tagValueProcessor(l,w),w=Qb(w,e)),o&&(s+=i),s+=w,o=!1;continue}else if(l===e.cdataPropName){o&&(s+=i),s+=`<![CDATA[${c[l][0][e.textNodeName]}]]>`,o=!1;continue}else if(l===e.commentPropName){s+=i+`<!--${c[l][0][e.textNodeName]}-->`,o=!0;continue}else if(l[0]==="?"){let w=Kb(c[":@"],e),g=l==="?xml"?"":i,S=c[l][0][e.textNodeName];S=S.length!==0?" "+S:"",s+=g+`<${l}${S}${w}?>`,o=!0;continue}let f=i;f!==""&&(f+=e.indentBy);let m=Kb(c[":@"],e),h=i+`<${l}${m}`,_=Yb(c[l],e,p,f);e.unpairedTags.indexOf(l)!==-1?e.suppressUnpairedNode?s+=h+">":s+=h+"/>":(!_||_.length===0)&&e.suppressEmptyNode?s+=h+"/>":_&&_.endsWith(">")?s+=h+`>${_}${i}</${l}>`:(s+=h+">",_&&i!==""&&(_.includes("/>")||_.includes("</"))?s+=i+e.indentBy+_+i:s+=_,s+=`</${l}>`),o=!0}return s}n(Yb,"arrToStr");function Hz(t){let e=Object.keys(t);for(let r=0;r<e.length;r++){let i=e[r];if(i!==":@")return i}}n(Hz,"propName");function Kb(t,e){let r="";if(t&&!e.ignoreAttributes)for(let i in t){let s=e.attributeValueProcessor(i,t[i]);s=Qb(s,e),s===!0&&e.suppressBooleanAttributes?r+=` ${i.substr(e.attributeNamePrefix.length)}`:r+=` ${i.substr(e.attributeNamePrefix.length)}="${s}"`}return r}n(Kb,"attr_to_str");function Gz(t,e){t=t.substr(0,t.length-e.textNodeName.length-1);let r=t.substr(t.lastIndexOf(".")+1);for(let i in e.stopNodes)if(e.stopNodes[i]===t||e.stopNodes[i]==="*."+r)return!0;return!1}n(Gz,"isStopNode");function Qb(t,e){if(t&&t.length>0&&e.processEntities)for(let r=0;r<e.entities.length;r++){let i=e.entities[r];t=t.replace(i.regex,i.val)}return t}n(Qb,"replaceEntitiesValue");Xb.exports=$z});var t0=u((ufe,e0)=>{"use strict";var Bz=Zb(),Jz={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[]};function Ji(t){this.options=Object.assign({},Jz,t),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Qz),this.processTextOrObjNode=Kz,this.options.format?(this.indentate=Yz,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}n(Ji,"Builder");Ji.prototype.build=function(t){return this.options.preserveOrder?Bz(t,this.options):(Array.isArray(t)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(t={[this.options.arrayNodeName]:t}),this.j2x(t,0).val)};Ji.prototype.j2x=function(t,e){let r="",i="";for(let s in t)if(!(typeof t[s]>"u"))if(t[s]===null)s[0]==="?"?i+=this.indentate(e)+"<"+s+"?"+this.tagEndChar:i+=this.indentate(e)+"<"+s+"/"+this.tagEndChar;else if(t[s]instanceof Date)i+=this.buildTextValNode(t[s],s,"",e);else if(typeof t[s]!="object"){let o=this.isAttribute(s);if(o)r+=this.buildAttrPairStr(o,""+t[s]);else if(s===this.options.textNodeName){let a=this.options.tagValueProcessor(s,""+t[s]);i+=this.replaceEntitiesValue(a)}else i+=this.buildTextValNode(t[s],s,"",e)}else if(Array.isArray(t[s])){let o=t[s].length;for(let a=0;a<o;a++){let c=t[s][a];typeof c>"u"||(c===null?s[0]==="?"?i+=this.indentate(e)+"<"+s+"?"+this.tagEndChar:i+=this.indentate(e)+"<"+s+"/"+this.tagEndChar:typeof c=="object"?i+=this.processTextOrObjNode(c,s,e):i+=this.buildTextValNode(c,s,"",e))}}else if(this.options.attributesGroupName&&s===this.options.attributesGroupName){let o=Object.keys(t[s]),a=o.length;for(let c=0;c<a;c++)r+=this.buildAttrPairStr(o[c],""+t[s][o[c]])}else i+=this.processTextOrObjNode(t[s],s,e);return{attrStr:r,val:i}};Ji.prototype.buildAttrPairStr=function(t,e){return e=this.options.attributeValueProcessor(t,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&e==="true"?" "+t:" "+t+'="'+e+'"'};function Kz(t,e,r){let i=this.j2x(t,r+1);return t[this.options.textNodeName]!==void 0&&Object.keys(t).length===1?this.buildTextValNode(t[this.options.textNodeName],e,i.attrStr,r):this.buildObjectNode(i.val,e,i.attrStr,r)}n(Kz,"processTextOrObjNode");Ji.prototype.buildObjectNode=function(t,e,r,i){if(t==="")return e[0]==="?"?this.indentate(i)+"<"+e+r+"?"+this.tagEndChar:this.indentate(i)+"<"+e+r+this.closeTag(e)+this.tagEndChar;{let s="</"+e+this.tagEndChar,o="";return e[0]==="?"&&(o="?",s=""),r&&t.indexOf("<")===-1?this.indentate(i)+"<"+e+r+o+">"+t+s:this.options.commentPropName!==!1&&e===this.options.commentPropName&&o.length===0?this.indentate(i)+`<!--${t}-->`+this.newLine:this.indentate(i)+"<"+e+r+o+this.tagEndChar+t+this.indentate(i)+s}};Ji.prototype.closeTag=function(t){let e="";return this.options.unpairedTags.indexOf(t)!==-1?this.options.suppressUnpairedNode||(e="/"):this.options.suppressEmptyNode?e="/":e=`></${t}`,e};Ji.prototype.buildTextValNode=function(t,e,r,i){if(this.options.cdataPropName!==!1&&e===this.options.cdataPropName)return this.indentate(i)+`<![CDATA[${t}]]>`+this.newLine;if(this.options.commentPropName!==!1&&e===this.options.commentPropName)return this.indentate(i)+`<!--${t}-->`+this.newLine;if(e[0]==="?")return this.indentate(i)+"<"+e+r+"?"+this.tagEndChar;{let s=this.options.tagValueProcessor(e,t);return s=this.replaceEntitiesValue(s),s===""?this.indentate(i)+"<"+e+r+this.closeTag(e)+this.tagEndChar:this.indentate(i)+"<"+e+r+">"+s+"</"+e+this.tagEndChar}};Ji.prototype.replaceEntitiesValue=function(t){if(t&&t.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){let r=this.options.entities[e];t=t.replace(r.regex,r.val)}return t};function Yz(t){return this.options.indentBy.repeat(t)}n(Yz,"indentate");function Qz(t){return t.startsWith(this.options.attributeNamePrefix)?t.substr(this.attrPrefixLen):!1}n(Qz,"isAttribute");e0.exports=Ji});var i0=u((pfe,r0)=>{"use strict";var Xz=wg(),Zz=Jb(),eU=t0();r0.exports={XMLParser:Zz,XMLValidator:Xz,XMLBuilder:eU}});var fi=u(V=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});V.deserializeAws_queryGetSessionTokenCommand=V.deserializeAws_queryGetFederationTokenCommand=V.deserializeAws_queryGetCallerIdentityCommand=V.deserializeAws_queryGetAccessKeyInfoCommand=V.deserializeAws_queryDecodeAuthorizationMessageCommand=V.deserializeAws_queryAssumeRoleWithWebIdentityCommand=V.deserializeAws_queryAssumeRoleWithSAMLCommand=V.deserializeAws_queryAssumeRoleCommand=V.serializeAws_queryGetSessionTokenCommand=V.serializeAws_queryGetFederationTokenCommand=V.serializeAws_queryGetCallerIdentityCommand=V.serializeAws_queryGetAccessKeyInfoCommand=V.serializeAws_queryDecodeAuthorizationMessageCommand=V.serializeAws_queryAssumeRoleWithWebIdentityCommand=V.serializeAws_queryAssumeRoleWithSAMLCommand=V.serializeAws_queryAssumeRoleCommand=void 0;var tU=tt(),I=C(),rU=i0(),Ki=er(),Yi=fp(),iU=n(async(t,e)=>{let r={"content-type":"application/x-www-form-urlencoded"},i;return i=Zi({...PU(t,e),Action:"AssumeRole",Version:"2011-06-15"}),Qi(e,r,"/",void 0,i)},"serializeAws_queryAssumeRoleCommand");V.serializeAws_queryAssumeRoleCommand=iU;var nU=n(async(t,e)=>{let r={"content-type":"application/x-www-form-urlencoded"},i;return i=Zi({...RU(t,e),Action:"AssumeRoleWithSAML",Version:"2011-06-15"}),Qi(e,r,"/",void 0,i)},"serializeAws_queryAssumeRoleWithSAMLCommand");V.serializeAws_queryAssumeRoleWithSAMLCommand=nU;var sU=n(async(t,e)=>{let r={"content-type":"application/x-www-form-urlencoded"},i;return i=Zi({...IU(t,e),Action:"AssumeRoleWithWebIdentity",Version:"2011-06-15"}),Qi(e,r,"/",void 0,i)},"serializeAws_queryAssumeRoleWithWebIdentityCommand");V.serializeAws_queryAssumeRoleWithWebIdentityCommand=sU;var oU=n(async(t,e)=>{let r={"content-type":"application/x-www-form-urlencoded"},i;return i=Zi({...qU(t,e),Action:"DecodeAuthorizationMessage",Version:"2011-06-15"}),Qi(e,r,"/",void 0,i)},"serializeAws_queryDecodeAuthorizationMessageCommand");V.serializeAws_queryDecodeAuthorizationMessageCommand=oU;var aU=n(async(t,e)=>{let r={"content-type":"application/x-www-form-urlencoded"},i;return i=Zi({...CU(t,e),Action:"GetAccessKeyInfo",Version:"2011-06-15"}),Qi(e,r,"/",void 0,i)},"serializeAws_queryGetAccessKeyInfoCommand");V.serializeAws_queryGetAccessKeyInfoCommand=aU;var cU=n(async(t,e)=>{let r={"content-type":"application/x-www-form-urlencoded"},i;return i=Zi({...kU(t,e),Action:"GetCallerIdentity",Version:"2011-06-15"}),Qi(e,r,"/",void 0,i)},"serializeAws_queryGetCallerIdentityCommand");V.serializeAws_queryGetCallerIdentityCommand=cU;var dU=n(async(t,e)=>{let r={"content-type":"application/x-www-form-urlencoded"},i;return i=Zi({...MU(t,e),Action:"GetFederationToken",Version:"2011-06-15"}),Qi(e,r,"/",void 0,i)},"serializeAws_queryGetFederationTokenCommand");V.serializeAws_queryGetFederationTokenCommand=dU;var uU=n(async(t,e)=>{let r={"content-type":"application/x-www-form-urlencoded"},i;return i=Zi({...DU(t,e),Action:"GetSessionToken",Version:"2011-06-15"}),Qi(e,r,"/",void 0,i)},"serializeAws_queryGetSessionTokenCommand");V.serializeAws_queryGetSessionTokenCommand=uU;var lU=n(async(t,e)=>{if(t.statusCode>=300)return pU(t,e);let r=await pi(t.body,e),i={};i=UU(r.AssumeRoleResult,e);let s={$metadata:Je(t),...i};return Promise.resolve(s)},"deserializeAws_queryAssumeRoleCommand");V.deserializeAws_queryAssumeRoleCommand=lU;var pU=n(async(t,e)=>{let r={...t,body:await Xi(t.body,e)},i=en(t,r.body);switch(i){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await bg(r,e);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await yp(r,e);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await gp(r,e);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await jc(r,e);default:let s=r.body;(0,I.throwDefaultError)({output:t,parsedBody:s.Error,exceptionCtor:Yi.STSServiceException,errorCode:i})}},"deserializeAws_queryAssumeRoleCommandError"),fU=n(async(t,e)=>{if(t.statusCode>=300)return mU(t,e);let r=await pi(t.body,e),i={};i=WU(r.AssumeRoleWithSAMLResult,e);let s={$metadata:Je(t),...i};return Promise.resolve(s)},"deserializeAws_queryAssumeRoleWithSAMLCommand");V.deserializeAws_queryAssumeRoleWithSAMLCommand=fU;var mU=n(async(t,e)=>{let r={...t,body:await Xi(t.body,e)},i=en(t,r.body);switch(i){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await bg(r,e);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await n0(r,e);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await s0(r,e);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await yp(r,e);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await gp(r,e);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await jc(r,e);default:let s=r.body;(0,I.throwDefaultError)({output:t,parsedBody:s.Error,exceptionCtor:Yi.STSServiceException,errorCode:i})}},"deserializeAws_queryAssumeRoleWithSAMLCommandError"),hU=n(async(t,e)=>{if(t.statusCode>=300)return _U(t,e);let r=await pi(t.body,e),i={};i=jU(r.AssumeRoleWithWebIdentityResult,e);let s={$metadata:Je(t),...i};return Promise.resolve(s)},"deserializeAws_queryAssumeRoleWithWebIdentityCommand");V.deserializeAws_queryAssumeRoleWithWebIdentityCommand=hU;var _U=n(async(t,e)=>{let r={...t,body:await Xi(t.body,e)},i=en(t,r.body);switch(i){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await bg(r,e);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await TU(r,e);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await n0(r,e);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await s0(r,e);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await yp(r,e);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await gp(r,e);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await jc(r,e);default:let s=r.body;(0,I.throwDefaultError)({output:t,parsedBody:s.Error,exceptionCtor:Yi.STSServiceException,errorCode:i})}},"deserializeAws_queryAssumeRoleWithWebIdentityCommandError"),yU=n(async(t,e)=>{if(t.statusCode>=300)return gU(t,e);let r=await pi(t.body,e),i={};i=VU(r.DecodeAuthorizationMessageResult,e);let s={$metadata:Je(t),...i};return Promise.resolve(s)},"deserializeAws_queryDecodeAuthorizationMessageCommand");V.deserializeAws_queryDecodeAuthorizationMessageCommand=yU;var gU=n(async(t,e)=>{let r={...t,body:await Xi(t.body,e)},i=en(t,r.body);switch(i){case"InvalidAuthorizationMessageException":case"com.amazonaws.sts#InvalidAuthorizationMessageException":throw await OU(r,e);default:let s=r.body;(0,I.throwDefaultError)({output:t,parsedBody:s.Error,exceptionCtor:Yi.STSServiceException,errorCode:i})}},"deserializeAws_queryDecodeAuthorizationMessageCommandError"),wU=n(async(t,e)=>{if(t.statusCode>=300)return EU(t,e);let r=await pi(t.body,e),i={};i=GU(r.GetAccessKeyInfoResult,e);let s={$metadata:Je(t),...i};return Promise.resolve(s)},"deserializeAws_queryGetAccessKeyInfoCommand");V.deserializeAws_queryGetAccessKeyInfoCommand=wU;var EU=n(async(t,e)=>{let r={...t,body:await Xi(t.body,e)},i=en(t,r.body),s=r.body;(0,I.throwDefaultError)({output:t,parsedBody:s.Error,exceptionCtor:Yi.STSServiceException,errorCode:i})},"deserializeAws_queryGetAccessKeyInfoCommandError"),vU=n(async(t,e)=>{if(t.statusCode>=300)return SU(t,e);let r=await pi(t.body,e),i={};i=BU(r.GetCallerIdentityResult,e);let s={$metadata:Je(t),...i};return Promise.resolve(s)},"deserializeAws_queryGetCallerIdentityCommand");V.deserializeAws_queryGetCallerIdentityCommand=vU;var SU=n(async(t,e)=>{let r={...t,body:await Xi(t.body,e)},i=en(t,r.body),s=r.body;(0,I.throwDefaultError)({output:t,parsedBody:s.Error,exceptionCtor:Yi.STSServiceException,errorCode:i})},"deserializeAws_queryGetCallerIdentityCommandError"),NU=n(async(t,e)=>{if(t.statusCode>=300)return bU(t,e);let r=await pi(t.body,e),i={};i=JU(r.GetFederationTokenResult,e);let s={$metadata:Je(t),...i};return Promise.resolve(s)},"deserializeAws_queryGetFederationTokenCommand");V.deserializeAws_queryGetFederationTokenCommand=NU;var bU=n(async(t,e)=>{let r={...t,body:await Xi(t.body,e)},i=en(t,r.body);switch(i){case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await yp(r,e);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await gp(r,e);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await jc(r,e);default:let s=r.body;(0,I.throwDefaultError)({output:t,parsedBody:s.Error,exceptionCtor:Yi.STSServiceException,errorCode:i})}},"deserializeAws_queryGetFederationTokenCommandError"),xU=n(async(t,e)=>{if(t.statusCode>=300)return AU(t,e);let r=await pi(t.body,e),i={};i=KU(r.GetSessionTokenResult,e);let s={$metadata:Je(t),...i};return Promise.resolve(s)},"deserializeAws_queryGetSessionTokenCommand");V.deserializeAws_queryGetSessionTokenCommand=xU;var AU=n(async(t,e)=>{let r={...t,body:await Xi(t.body,e)},i=en(t,r.body);switch(i){case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await jc(r,e);default:let s=r.body;(0,I.throwDefaultError)({output:t,parsedBody:s.Error,exceptionCtor:Yi.STSServiceException,errorCode:i})}},"deserializeAws_queryGetSessionTokenCommandError"),bg=n(async(t,e)=>{let r=t.body,i=$U(r.Error,e),s=new Ki.ExpiredTokenException({$metadata:Je(t),...i});return(0,I.decorateServiceException)(s,r)},"deserializeAws_queryExpiredTokenExceptionResponse"),TU=n(async(t,e)=>{let r=t.body,i=YU(r.Error,e),s=new Ki.IDPCommunicationErrorException({$metadata:Je(t),...i});return(0,I.decorateServiceException)(s,r)},"deserializeAws_queryIDPCommunicationErrorExceptionResponse"),n0=n(async(t,e)=>{let r=t.body,i=QU(r.Error,e),s=new Ki.IDPRejectedClaimException({$metadata:Je(t),...i});return(0,I.decorateServiceException)(s,r)},"deserializeAws_queryIDPRejectedClaimExceptionResponse"),OU=n(async(t,e)=>{let r=t.body,i=XU(r.Error,e),s=new Ki.InvalidAuthorizationMessageException({$metadata:Je(t),...i});return(0,I.decorateServiceException)(s,r)},"deserializeAws_queryInvalidAuthorizationMessageExceptionResponse"),s0=n(async(t,e)=>{let r=t.body,i=ZU(r.Error,e),s=new Ki.InvalidIdentityTokenException({$metadata:Je(t),...i});return(0,I.decorateServiceException)(s,r)},"deserializeAws_queryInvalidIdentityTokenExceptionResponse"),yp=n(async(t,e)=>{let r=t.body,i=eW(r.Error,e),s=new Ki.MalformedPolicyDocumentException({$metadata:Je(t),...i});return(0,I.decorateServiceException)(s,r)},"deserializeAws_queryMalformedPolicyDocumentExceptionResponse"),gp=n(async(t,e)=>{let r=t.body,i=tW(r.Error,e),s=new Ki.PackedPolicyTooLargeException({$metadata:Je(t),...i});return(0,I.decorateServiceException)(s,r)},"deserializeAws_queryPackedPolicyTooLargeExceptionResponse"),jc=n(async(t,e)=>{let r=t.body,i=rW(r.Error,e),s=new Ki.RegionDisabledException({$metadata:Je(t),...i});return(0,I.decorateServiceException)(s,r)},"deserializeAws_queryRegionDisabledExceptionResponse"),PU=n((t,e)=>{let r={};if(t.RoleArn!=null&&(r.RoleArn=t.RoleArn),t.RoleSessionName!=null&&(r.RoleSessionName=t.RoleSessionName),t.PolicyArns!=null){let i=wp(t.PolicyArns,e);t.PolicyArns?.length===0&&(r.PolicyArns=[]),Object.entries(i).forEach(([s,o])=>{let a=`PolicyArns.${s}`;r[a]=o})}if(t.Policy!=null&&(r.Policy=t.Policy),t.DurationSeconds!=null&&(r.DurationSeconds=t.DurationSeconds),t.Tags!=null){let i=o0(t.Tags,e);t.Tags?.length===0&&(r.Tags=[]),Object.entries(i).forEach(([s,o])=>{let a=`Tags.${s}`;r[a]=o})}if(t.TransitiveTagKeys!=null){let i=zU(t.TransitiveTagKeys,e);t.TransitiveTagKeys?.length===0&&(r.TransitiveTagKeys=[]),Object.entries(i).forEach(([s,o])=>{let a=`TransitiveTagKeys.${s}`;r[a]=o})}return t.ExternalId!=null&&(r.ExternalId=t.ExternalId),t.SerialNumber!=null&&(r.SerialNumber=t.SerialNumber),t.TokenCode!=null&&(r.TokenCode=t.TokenCode),t.SourceIdentity!=null&&(r.SourceIdentity=t.SourceIdentity),r},"serializeAws_queryAssumeRoleRequest"),RU=n((t,e)=>{let r={};if(t.RoleArn!=null&&(r.RoleArn=t.RoleArn),t.PrincipalArn!=null&&(r.PrincipalArn=t.PrincipalArn),t.SAMLAssertion!=null&&(r.SAMLAssertion=t.SAMLAssertion),t.PolicyArns!=null){let i=wp(t.PolicyArns,e);t.PolicyArns?.length===0&&(r.PolicyArns=[]),Object.entries(i).forEach(([s,o])=>{let a=`PolicyArns.${s}`;r[a]=o})}return t.Policy!=null&&(r.Policy=t.Policy),t.DurationSeconds!=null&&(r.DurationSeconds=t.DurationSeconds),r},"serializeAws_queryAssumeRoleWithSAMLRequest"),IU=n((t,e)=>{let r={};if(t.RoleArn!=null&&(r.RoleArn=t.RoleArn),t.RoleSessionName!=null&&(r.RoleSessionName=t.RoleSessionName),t.WebIdentityToken!=null&&(r.WebIdentityToken=t.WebIdentityToken),t.ProviderId!=null&&(r.ProviderId=t.ProviderId),t.PolicyArns!=null){let i=wp(t.PolicyArns,e);t.PolicyArns?.length===0&&(r.PolicyArns=[]),Object.entries(i).forEach(([s,o])=>{let a=`PolicyArns.${s}`;r[a]=o})}return t.Policy!=null&&(r.Policy=t.Policy),t.DurationSeconds!=null&&(r.DurationSeconds=t.DurationSeconds),r},"serializeAws_queryAssumeRoleWithWebIdentityRequest"),qU=n((t,e)=>{let r={};return t.EncodedMessage!=null&&(r.EncodedMessage=t.EncodedMessage),r},"serializeAws_queryDecodeAuthorizationMessageRequest"),CU=n((t,e)=>{let r={};return t.AccessKeyId!=null&&(r.AccessKeyId=t.AccessKeyId),r},"serializeAws_queryGetAccessKeyInfoRequest"),kU=n((t,e)=>({}),"serializeAws_queryGetCallerIdentityRequest"),MU=n((t,e)=>{let r={};if(t.Name!=null&&(r.Name=t.Name),t.Policy!=null&&(r.Policy=t.Policy),t.PolicyArns!=null){let i=wp(t.PolicyArns,e);t.PolicyArns?.length===0&&(r.PolicyArns=[]),Object.entries(i).forEach(([s,o])=>{let a=`PolicyArns.${s}`;r[a]=o})}if(t.DurationSeconds!=null&&(r.DurationSeconds=t.DurationSeconds),t.Tags!=null){let i=o0(t.Tags,e);t.Tags?.length===0&&(r.Tags=[]),Object.entries(i).forEach(([s,o])=>{let a=`Tags.${s}`;r[a]=o})}return r},"serializeAws_queryGetFederationTokenRequest"),DU=n((t,e)=>{let r={};return t.DurationSeconds!=null&&(r.DurationSeconds=t.DurationSeconds),t.SerialNumber!=null&&(r.SerialNumber=t.SerialNumber),t.TokenCode!=null&&(r.TokenCode=t.TokenCode),r},"serializeAws_queryGetSessionTokenRequest"),wp=n((t,e)=>{let r={},i=1;for(let s of t){if(s===null)continue;let o=FU(s,e);Object.entries(o).forEach(([a,c])=>{r[`member.${i}.${a}`]=c}),i++}return r},"serializeAws_querypolicyDescriptorListType"),FU=n((t,e)=>{let r={};return t.arn!=null&&(r.arn=t.arn),r},"serializeAws_queryPolicyDescriptorType"),LU=n((t,e)=>{let r={};return t.Key!=null&&(r.Key=t.Key),t.Value!=null&&(r.Value=t.Value),r},"serializeAws_queryTag"),zU=n((t,e)=>{let r={},i=1;for(let s of t)s!==null&&(r[`member.${i}`]=s,i++);return r},"serializeAws_querytagKeyListType"),o0=n((t,e)=>{let r={},i=1;for(let s of t){if(s===null)continue;let o=LU(s,e);Object.entries(o).forEach(([a,c])=>{r[`member.${i}.${a}`]=c}),i++}return r},"serializeAws_querytagListType"),xg=n((t,e)=>{let r={AssumedRoleId:void 0,Arn:void 0};return t.AssumedRoleId!==void 0&&(r.AssumedRoleId=(0,I.expectString)(t.AssumedRoleId)),t.Arn!==void 0&&(r.Arn=(0,I.expectString)(t.Arn)),r},"deserializeAws_queryAssumedRoleUser"),UU=n((t,e)=>{let r={Credentials:void 0,AssumedRoleUser:void 0,PackedPolicySize:void 0,SourceIdentity:void 0};return t.Credentials!==void 0&&(r.Credentials=Vc(t.Credentials,e)),t.AssumedRoleUser!==void 0&&(r.AssumedRoleUser=xg(t.AssumedRoleUser,e)),t.PackedPolicySize!==void 0&&(r.PackedPolicySize=(0,I.strictParseInt32)(t.PackedPolicySize)),t.SourceIdentity!==void 0&&(r.SourceIdentity=(0,I.expectString)(t.SourceIdentity)),r},"deserializeAws_queryAssumeRoleResponse"),WU=n((t,e)=>{let r={Credentials:void 0,AssumedRoleUser:void 0,PackedPolicySize:void 0,Subject:void 0,SubjectType:void 0,Issuer:void 0,Audience:void 0,NameQualifier:void 0,SourceIdentity:void 0};return t.Credentials!==void 0&&(r.Credentials=Vc(t.Credentials,e)),t.AssumedRoleUser!==void 0&&(r.AssumedRoleUser=xg(t.AssumedRoleUser,e)),t.PackedPolicySize!==void 0&&(r.PackedPolicySize=(0,I.strictParseInt32)(t.PackedPolicySize)),t.Subject!==void 0&&(r.Subject=(0,I.expectString)(t.Subject)),t.SubjectType!==void 0&&(r.SubjectType=(0,I.expectString)(t.SubjectType)),t.Issuer!==void 0&&(r.Issuer=(0,I.expectString)(t.Issuer)),t.Audience!==void 0&&(r.Audience=(0,I.expectString)(t.Audience)),t.NameQualifier!==void 0&&(r.NameQualifier=(0,I.expectString)(t.NameQualifier)),t.SourceIdentity!==void 0&&(r.SourceIdentity=(0,I.expectString)(t.SourceIdentity)),r},"deserializeAws_queryAssumeRoleWithSAMLResponse"),jU=n((t,e)=>{let r={Credentials:void 0,SubjectFromWebIdentityToken:void 0,AssumedRoleUser:void 0,PackedPolicySize:void 0,Provider:void 0,Audience:void 0,SourceIdentity:void 0};return t.Credentials!==void 0&&(r.Credentials=Vc(t.Credentials,e)),t.SubjectFromWebIdentityToken!==void 0&&(r.SubjectFromWebIdentityToken=(0,I.expectString)(t.SubjectFromWebIdentityToken)),t.AssumedRoleUser!==void 0&&(r.AssumedRoleUser=xg(t.AssumedRoleUser,e)),t.PackedPolicySize!==void 0&&(r.PackedPolicySize=(0,I.strictParseInt32)(t.PackedPolicySize)),t.Provider!==void 0&&(r.Provider=(0,I.expectString)(t.Provider)),t.Audience!==void 0&&(r.Audience=(0,I.expectString)(t.Audience)),t.SourceIdentity!==void 0&&(r.SourceIdentity=(0,I.expectString)(t.SourceIdentity)),r},"deserializeAws_queryAssumeRoleWithWebIdentityResponse"),Vc=n((t,e)=>{let r={AccessKeyId:void 0,SecretAccessKey:void 0,SessionToken:void 0,Expiration:void 0};return t.AccessKeyId!==void 0&&(r.AccessKeyId=(0,I.expectString)(t.AccessKeyId)),t.SecretAccessKey!==void 0&&(r.SecretAccessKey=(0,I.expectString)(t.SecretAccessKey)),t.SessionToken!==void 0&&(r.SessionToken=(0,I.expectString)(t.SessionToken)),t.Expiration!==void 0&&(r.Expiration=(0,I.expectNonNull)((0,I.parseRfc3339DateTimeWithOffset)(t.Expiration))),r},"deserializeAws_queryCredentials"),VU=n((t,e)=>{let r={DecodedMessage:void 0};return t.DecodedMessage!==void 0&&(r.DecodedMessage=(0,I.expectString)(t.DecodedMessage)),r},"deserializeAws_queryDecodeAuthorizationMessageResponse"),$U=n((t,e)=>{let r={message:void 0};return t.message!==void 0&&(r.message=(0,I.expectString)(t.message)),r},"deserializeAws_queryExpiredTokenException"),HU=n((t,e)=>{let r={FederatedUserId:void 0,Arn:void 0};return t.FederatedUserId!==void 0&&(r.FederatedUserId=(0,I.expectString)(t.FederatedUserId)),t.Arn!==void 0&&(r.Arn=(0,I.expectString)(t.Arn)),r},"deserializeAws_queryFederatedUser"),GU=n((t,e)=>{let r={Account:void 0};return t.Account!==void 0&&(r.Account=(0,I.expectString)(t.Account)),r},"deserializeAws_queryGetAccessKeyInfoResponse"),BU=n((t,e)=>{let r={UserId:void 0,Account:void 0,Arn:void 0};return t.UserId!==void 0&&(r.UserId=(0,I.expectString)(t.UserId)),t.Account!==void 0&&(r.Account=(0,I.expectString)(t.Account)),t.Arn!==void 0&&(r.Arn=(0,I.expectString)(t.Arn)),r},"deserializeAws_queryGetCallerIdentityResponse"),JU=n((t,e)=>{let r={Credentials:void 0,FederatedUser:void 0,PackedPolicySize:void 0};return t.Credentials!==void 0&&(r.Credentials=Vc(t.Credentials,e)),t.FederatedUser!==void 0&&(r.FederatedUser=HU(t.FederatedUser,e)),t.PackedPolicySize!==void 0&&(r.PackedPolicySize=(0,I.strictParseInt32)(t.PackedPolicySize)),r},"deserializeAws_queryGetFederationTokenResponse"),KU=n((t,e)=>{let r={Credentials:void 0};return t.Credentials!==void 0&&(r.Credentials=Vc(t.Credentials,e)),r},"deserializeAws_queryGetSessionTokenResponse"),YU=n((t,e)=>{let r={message:void 0};return t.message!==void 0&&(r.message=(0,I.expectString)(t.message)),r},"deserializeAws_queryIDPCommunicationErrorException"),QU=n((t,e)=>{let r={message:void 0};return t.message!==void 0&&(r.message=(0,I.expectString)(t.message)),r},"deserializeAws_queryIDPRejectedClaimException"),XU=n((t,e)=>{let r={message:void 0};return t.message!==void 0&&(r.message=(0,I.expectString)(t.message)),r},"deserializeAws_queryInvalidAuthorizationMessageException"),ZU=n((t,e)=>{let r={message:void 0};return t.message!==void 0&&(r.message=(0,I.expectString)(t.message)),r},"deserializeAws_queryInvalidIdentityTokenException"),eW=n((t,e)=>{let r={message:void 0};return t.message!==void 0&&(r.message=(0,I.expectString)(t.message)),r},"deserializeAws_queryMalformedPolicyDocumentException"),tW=n((t,e)=>{let r={message:void 0};return t.message!==void 0&&(r.message=(0,I.expectString)(t.message)),r},"deserializeAws_queryPackedPolicyTooLargeException"),rW=n((t,e)=>{let r={message:void 0};return t.message!==void 0&&(r.message=(0,I.expectString)(t.message)),r},"deserializeAws_queryRegionDisabledException"),Je=n(t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),"deserializeMetadata"),iW=n((t=new Uint8Array,e)=>t instanceof Uint8Array?Promise.resolve(t):e.streamCollector(t)||Promise.resolve(new Uint8Array),"collectBody"),nW=n((t,e)=>iW(t,e).then(r=>e.utf8Encoder(r)),"collectBodyString"),Qi=n(async(t,e,r,i,s)=>{let{hostname:o,protocol:a="https",port:c,path:l}=await t.endpoint(),p={protocol:a,hostname:o,port:c,method:"POST",path:l.endsWith("/")?l.slice(0,-1)+r:l+r,headers:e};return i!==void 0&&(p.hostname=i),s!==void 0&&(p.body=s),new tU.HttpRequest(p)},"buildHttpRpcRequest"),pi=n((t,e)=>nW(t,e).then(r=>{if(r.length){let i=new rU.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(l,p)=>p.trim()===""&&p.includes(`
`)?"":void 0});i.addEntity("#xD","\r"),i.addEntity("#10",`
`);let s=i.parse(r),o="#text",a=Object.keys(s)[0],c=s[a];return c[o]&&(c[a]=c[o],delete c[o]),(0,I.getValueFromTextNode)(c)}return{}}),"parseBody"),Xi=n(async(t,e)=>{let r=await pi(t,e);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},"parseErrorBody"),Zi=n(t=>Object.entries(t).map(([e,r])=>(0,I.extendedEncodeURIComponent)(e)+"="+(0,I.extendedEncodeURIComponent)(r)).join("&"),"buildFormUrlencodedString"),en=n((t,e)=>{if(e.Error?.Code!==void 0)return e.Error.Code;if(t.statusCode==404)return"NotFound"},"loadQueryErrorCode")});var vp=u(Ep=>{"use strict";Object.defineProperty(Ep,"__esModule",{value:!0});Ep.AssumeRoleCommand=void 0;var sW=ne(),oW=me(),aW=ui(),cW=C(),a0=er(),c0=fi(),Po=class extends cW.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,oW.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,sW.getEndpointPlugin)(r,Po.getEndpointParameterInstructions())),this.middlewareStack.use((0,aW.getAwsAuthPlugin)(r));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"STSClient",commandName:"AssumeRoleCommand",inputFilterSensitiveLog:a0.AssumeRoleRequestFilterSensitiveLog,outputFilterSensitiveLog:a0.AssumeRoleResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,c0.serializeAws_queryAssumeRoleCommand)(e,r)}deserialize(e,r){return(0,c0.deserializeAws_queryAssumeRoleCommand)(e,r)}};n(Po,"AssumeRoleCommand");Ep.AssumeRoleCommand=Po});var Ag=u(Sp=>{"use strict";Object.defineProperty(Sp,"__esModule",{value:!0});Sp.AssumeRoleWithSAMLCommand=void 0;var dW=ne(),uW=me(),lW=C(),d0=er(),u0=fi(),Ro=class extends lW.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,uW.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,dW.getEndpointPlugin)(r,Ro.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"STSClient",commandName:"AssumeRoleWithSAMLCommand",inputFilterSensitiveLog:d0.AssumeRoleWithSAMLRequestFilterSensitiveLog,outputFilterSensitiveLog:d0.AssumeRoleWithSAMLResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,u0.serializeAws_queryAssumeRoleWithSAMLCommand)(e,r)}deserialize(e,r){return(0,u0.deserializeAws_queryAssumeRoleWithSAMLCommand)(e,r)}};n(Ro,"AssumeRoleWithSAMLCommand");Sp.AssumeRoleWithSAMLCommand=Ro});var bp=u(Np=>{"use strict";Object.defineProperty(Np,"__esModule",{value:!0});Np.AssumeRoleWithWebIdentityCommand=void 0;var pW=ne(),fW=me(),mW=C(),l0=er(),p0=fi(),Io=class extends mW.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,fW.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,pW.getEndpointPlugin)(r,Io.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"STSClient",commandName:"AssumeRoleWithWebIdentityCommand",inputFilterSensitiveLog:l0.AssumeRoleWithWebIdentityRequestFilterSensitiveLog,outputFilterSensitiveLog:l0.AssumeRoleWithWebIdentityResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,p0.serializeAws_queryAssumeRoleWithWebIdentityCommand)(e,r)}deserialize(e,r){return(0,p0.deserializeAws_queryAssumeRoleWithWebIdentityCommand)(e,r)}};n(Io,"AssumeRoleWithWebIdentityCommand");Np.AssumeRoleWithWebIdentityCommand=Io});var Tg=u(xp=>{"use strict";Object.defineProperty(xp,"__esModule",{value:!0});xp.DecodeAuthorizationMessageCommand=void 0;var hW=ne(),_W=me(),yW=ui(),gW=C(),f0=er(),m0=fi(),qo=class extends gW.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,_W.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,hW.getEndpointPlugin)(r,qo.getEndpointParameterInstructions())),this.middlewareStack.use((0,yW.getAwsAuthPlugin)(r));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"STSClient",commandName:"DecodeAuthorizationMessageCommand",inputFilterSensitiveLog:f0.DecodeAuthorizationMessageRequestFilterSensitiveLog,outputFilterSensitiveLog:f0.DecodeAuthorizationMessageResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,m0.serializeAws_queryDecodeAuthorizationMessageCommand)(e,r)}deserialize(e,r){return(0,m0.deserializeAws_queryDecodeAuthorizationMessageCommand)(e,r)}};n(qo,"DecodeAuthorizationMessageCommand");xp.DecodeAuthorizationMessageCommand=qo});var Og=u(Ap=>{"use strict";Object.defineProperty(Ap,"__esModule",{value:!0});Ap.GetAccessKeyInfoCommand=void 0;var wW=ne(),EW=me(),vW=ui(),SW=C(),h0=er(),_0=fi(),Co=class extends SW.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,EW.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,wW.getEndpointPlugin)(r,Co.getEndpointParameterInstructions())),this.middlewareStack.use((0,vW.getAwsAuthPlugin)(r));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"STSClient",commandName:"GetAccessKeyInfoCommand",inputFilterSensitiveLog:h0.GetAccessKeyInfoRequestFilterSensitiveLog,outputFilterSensitiveLog:h0.GetAccessKeyInfoResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,_0.serializeAws_queryGetAccessKeyInfoCommand)(e,r)}deserialize(e,r){return(0,_0.deserializeAws_queryGetAccessKeyInfoCommand)(e,r)}};n(Co,"GetAccessKeyInfoCommand");Ap.GetAccessKeyInfoCommand=Co});var Pg=u(Tp=>{"use strict";Object.defineProperty(Tp,"__esModule",{value:!0});Tp.GetCallerIdentityCommand=void 0;var NW=ne(),bW=me(),xW=ui(),AW=C(),y0=er(),g0=fi(),ko=class extends AW.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,bW.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,NW.getEndpointPlugin)(r,ko.getEndpointParameterInstructions())),this.middlewareStack.use((0,xW.getAwsAuthPlugin)(r));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"STSClient",commandName:"GetCallerIdentityCommand",inputFilterSensitiveLog:y0.GetCallerIdentityRequestFilterSensitiveLog,outputFilterSensitiveLog:y0.GetCallerIdentityResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,g0.serializeAws_queryGetCallerIdentityCommand)(e,r)}deserialize(e,r){return(0,g0.deserializeAws_queryGetCallerIdentityCommand)(e,r)}};n(ko,"GetCallerIdentityCommand");Tp.GetCallerIdentityCommand=ko});var Rg=u(Op=>{"use strict";Object.defineProperty(Op,"__esModule",{value:!0});Op.GetFederationTokenCommand=void 0;var TW=ne(),OW=me(),PW=ui(),RW=C(),w0=er(),E0=fi(),Mo=class extends RW.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,OW.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,TW.getEndpointPlugin)(r,Mo.getEndpointParameterInstructions())),this.middlewareStack.use((0,PW.getAwsAuthPlugin)(r));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"STSClient",commandName:"GetFederationTokenCommand",inputFilterSensitiveLog:w0.GetFederationTokenRequestFilterSensitiveLog,outputFilterSensitiveLog:w0.GetFederationTokenResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,E0.serializeAws_queryGetFederationTokenCommand)(e,r)}deserialize(e,r){return(0,E0.deserializeAws_queryGetFederationTokenCommand)(e,r)}};n(Mo,"GetFederationTokenCommand");Op.GetFederationTokenCommand=Mo});var Ig=u(Pp=>{"use strict";Object.defineProperty(Pp,"__esModule",{value:!0});Pp.GetSessionTokenCommand=void 0;var IW=ne(),qW=me(),CW=ui(),kW=C(),v0=er(),S0=fi(),Do=class extends kW.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,qW.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,IW.getEndpointPlugin)(r,Do.getEndpointParameterInstructions())),this.middlewareStack.use((0,CW.getAwsAuthPlugin)(r));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"STSClient",commandName:"GetSessionTokenCommand",inputFilterSensitiveLog:v0.GetSessionTokenRequestFilterSensitiveLog,outputFilterSensitiveLog:v0.GetSessionTokenResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,S0.serializeAws_queryGetSessionTokenCommand)(e,r)}deserialize(e,r){return(0,S0.deserializeAws_queryGetSessionTokenCommand)(e,r)}};n(Do,"GetSessionTokenCommand");Pp.GetSessionTokenCommand=Do});var N0=u(Rp=>{"use strict";Object.defineProperty(Rp,"__esModule",{value:!0});Rp.resolveStsAuthConfig=void 0;var MW=ui(),DW=n((t,{stsClientCtor:e})=>(0,MW.resolveAwsAuthConfig)({...t,stsClientCtor:e}),"resolveStsAuthConfig");Rp.resolveStsAuthConfig=DW});var b0=u(Ip=>{"use strict";Object.defineProperty(Ip,"__esModule",{value:!0});Ip.resolveClientEndpointParameters=void 0;var FW=n(t=>({...t,useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,useGlobalEndpoint:t.useGlobalEndpoint??!1,defaultSigningName:"sts"}),"resolveClientEndpointParameters");Ip.resolveClientEndpointParameters=FW});var x0=u((Mfe,LW)=>{LW.exports={name:"@aws-sdk/client-sts",description:"AWS SDK for JavaScript Sts Client for Node.js, Browser and React Native",version:"3.279.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","generate:client":"node ../../scripts/generate-clients/single-service --solo sts",test:"yarn test:unit","test:unit":"jest"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.272.0","@aws-sdk/credential-provider-node":"3.279.0","@aws-sdk/fetch-http-handler":"3.272.0","@aws-sdk/hash-node":"3.272.0","@aws-sdk/invalid-dependency":"3.272.0","@aws-sdk/middleware-content-length":"3.272.0","@aws-sdk/middleware-endpoint":"3.272.0","@aws-sdk/middleware-host-header":"3.278.0","@aws-sdk/middleware-logger":"3.272.0","@aws-sdk/middleware-recursion-detection":"3.272.0","@aws-sdk/middleware-retry":"3.272.0","@aws-sdk/middleware-sdk-sts":"3.272.0","@aws-sdk/middleware-serde":"3.272.0","@aws-sdk/middleware-signing":"3.272.0","@aws-sdk/middleware-stack":"3.272.0","@aws-sdk/middleware-user-agent":"3.272.0","@aws-sdk/node-config-provider":"3.272.0","@aws-sdk/node-http-handler":"3.272.0","@aws-sdk/protocol-http":"3.272.0","@aws-sdk/smithy-client":"3.279.0","@aws-sdk/types":"3.272.0","@aws-sdk/url-parser":"3.272.0","@aws-sdk/util-base64":"3.208.0","@aws-sdk/util-body-length-browser":"3.188.0","@aws-sdk/util-body-length-node":"3.208.0","@aws-sdk/util-defaults-mode-browser":"3.279.0","@aws-sdk/util-defaults-mode-node":"3.279.0","@aws-sdk/util-endpoints":"3.272.0","@aws-sdk/util-retry":"3.272.0","@aws-sdk/util-user-agent-browser":"3.272.0","@aws-sdk/util-user-agent-node":"3.272.0","@aws-sdk/util-utf8":"3.254.0","fast-xml-parser":"4.1.2",tslib:"^2.3.1"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.208.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.19.2",typescript:"~4.6.2"},overrides:{typedoc:{typescript:"~4.6.2"}},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sts",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sts"}}});var qg=u(Sr=>{"use strict";Object.defineProperty(Sr,"__esModule",{value:!0});Sr.decorateDefaultCredentialProvider=Sr.getDefaultRoleAssumerWithWebIdentity=Sr.getDefaultRoleAssumer=void 0;var zW=vp(),UW=bp(),A0="us-east-1",T0=n(t=>typeof t!="function"?t===void 0?A0:t:async()=>{try{return await t()}catch{return A0}},"decorateDefaultRegion"),WW=n((t,e)=>{let r,i;return async(s,o)=>{if(i=s,!r){let{logger:c,region:l,requestHandler:p}=t;r=new e({logger:c,credentialDefaultProvider:()=>async()=>i,region:T0(l||t.region),...p?{requestHandler:p}:{}})}let{Credentials:a}=await r.send(new zW.AssumeRoleCommand(o));if(!a||!a.AccessKeyId||!a.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${o.RoleArn}`);return{accessKeyId:a.AccessKeyId,secretAccessKey:a.SecretAccessKey,sessionToken:a.SessionToken,expiration:a.Expiration}}},"getDefaultRoleAssumer");Sr.getDefaultRoleAssumer=WW;var jW=n((t,e)=>{let r;return async i=>{if(!r){let{logger:o,region:a,requestHandler:c}=t;r=new e({logger:o,region:T0(a||t.region),...c?{requestHandler:c}:{}})}let{Credentials:s}=await r.send(new UW.AssumeRoleWithWebIdentityCommand(i));if(!s||!s.AccessKeyId||!s.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${i.RoleArn}`);return{accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,sessionToken:s.SessionToken,expiration:s.Expiration}}},"getDefaultRoleAssumerWithWebIdentity");Sr.getDefaultRoleAssumerWithWebIdentity=jW;var VW=n(t=>e=>t({roleAssumer:(0,Sr.getDefaultRoleAssumer)(e,e.stsClientCtor),roleAssumerWithWebIdentity:(0,Sr.getDefaultRoleAssumerWithWebIdentity)(e,e.stsClientCtor),...e}),"decorateDefaultCredentialProvider");Sr.decorateDefaultCredentialProvider=VW});var O0=u(Ke=>{"use strict";Object.defineProperty(Ke,"__esModule",{value:!0});Ke.fromEnv=Ke.ENV_EXPIRATION=Ke.ENV_SESSION=Ke.ENV_SECRET=Ke.ENV_KEY=void 0;var $W=ee();Ke.ENV_KEY="AWS_ACCESS_KEY_ID";Ke.ENV_SECRET="AWS_SECRET_ACCESS_KEY";Ke.ENV_SESSION="AWS_SESSION_TOKEN";Ke.ENV_EXPIRATION="AWS_CREDENTIAL_EXPIRATION";var HW=n(()=>async()=>{let t=process.env[Ke.ENV_KEY],e=process.env[Ke.ENV_SECRET],r=process.env[Ke.ENV_SESSION],i=process.env[Ke.ENV_EXPIRATION];if(t&&e)return{accessKeyId:t,secretAccessKey:e,...r&&{sessionToken:r},...i&&{expiration:new Date(i)}};throw new $W.CredentialsProviderError("Unable to find environment variable credentials.")},"fromEnv");Ke.fromEnv=HW});var kg=u(Cg=>{"use strict";Object.defineProperty(Cg,"__esModule",{value:!0});var GW=(A(),b(x));GW.__exportStar(O0(),Cg)});var $c=u(qp=>{"use strict";Object.defineProperty(qp,"__esModule",{value:!0});qp.getHomeDir=void 0;var BW=U("os"),JW=U("path"),KW=n(()=>{let{HOME:t,USERPROFILE:e,HOMEPATH:r,HOMEDRIVE:i=`C:${JW.sep}`}=process.env;return t||e||(r?`${i}${r}`:(0,BW.homedir)())},"getHomeDir");qp.getHomeDir=KW});var P0=u(Nr=>{"use strict";Object.defineProperty(Nr,"__esModule",{value:!0});Nr.getProfileName=Nr.DEFAULT_PROFILE=Nr.ENV_PROFILE=void 0;Nr.ENV_PROFILE="AWS_PROFILE";Nr.DEFAULT_PROFILE="default";var YW=n(t=>t.profile||process.env[Nr.ENV_PROFILE]||Nr.DEFAULT_PROFILE,"getProfileName");Nr.getProfileName=YW});var Mg=u(Cp=>{"use strict";Object.defineProperty(Cp,"__esModule",{value:!0});Cp.getSSOTokenFilepath=void 0;var QW=U("crypto"),XW=U("path"),ZW=$c(),ej=n(t=>{let r=(0,QW.createHash)("sha1").update(t).digest("hex");return(0,XW.join)((0,ZW.getHomeDir)(),".aws","sso","cache",`${r}.json`)},"getSSOTokenFilepath");Cp.getSSOTokenFilepath=ej});var R0=u(kp=>{"use strict";Object.defineProperty(kp,"__esModule",{value:!0});kp.getSSOTokenFromFile=void 0;var tj=U("fs"),rj=Mg(),{readFile:ij}=tj.promises,nj=n(async t=>{let e=(0,rj.getSSOTokenFilepath)(t),r=await ij(e,"utf8");return JSON.parse(r)},"getSSOTokenFromFile");kp.getSSOTokenFromFile=nj});var Dg=u(Yn=>{"use strict";Object.defineProperty(Yn,"__esModule",{value:!0});Yn.getConfigFilepath=Yn.ENV_CONFIG_PATH=void 0;var sj=U("path"),oj=$c();Yn.ENV_CONFIG_PATH="AWS_CONFIG_FILE";var aj=n(()=>process.env[Yn.ENV_CONFIG_PATH]||(0,sj.join)((0,oj.getHomeDir)(),".aws","config"),"getConfigFilepath");Yn.getConfigFilepath=aj});var I0=u(Qn=>{"use strict";Object.defineProperty(Qn,"__esModule",{value:!0});Qn.getCredentialsFilepath=Qn.ENV_CREDENTIALS_PATH=void 0;var cj=U("path"),dj=$c();Qn.ENV_CREDENTIALS_PATH="AWS_SHARED_CREDENTIALS_FILE";var uj=n(()=>process.env[Qn.ENV_CREDENTIALS_PATH]||(0,cj.join)((0,dj.getHomeDir)(),".aws","credentials"),"getCredentialsFilepath");Qn.getCredentialsFilepath=uj});var C0=u(Mp=>{"use strict";Object.defineProperty(Mp,"__esModule",{value:!0});Mp.getProfileData=void 0;var q0=/^profile\s(["'])?([^\1]+)\1$/,lj=n(t=>Object.entries(t).filter(([e])=>q0.test(e)).reduce((e,[r,i])=>({...e,[q0.exec(r)[2]]:i}),{...t.default&&{default:t.default}}),"getProfileData");Mp.getProfileData=lj});var Fg=u(Dp=>{"use strict";Object.defineProperty(Dp,"__esModule",{value:!0});Dp.parseIni=void 0;var pj=["__proto__","profile __proto__"],fj=n(t=>{let e={},r;for(let i of t.split(/\r?\n/))if(i=i.split(/(^|\s)[;#]/)[0].trim(),i[0]==="["&&i[i.length-1]==="]"){if(r=i.substring(1,i.length-1),pj.includes(r))throw new Error(`Found invalid profile name "${r}"`)}else if(r){let o=i.indexOf("="),a=0,c=i.length-1;if(o!==-1&&o!==a&&o!==c){let[p,f]=[i.substring(0,o).trim(),i.substring(o+1).trim()];e[r]=e[r]||{},e[r][p]=f}}return e},"parseIni");Dp.parseIni=fj});var zg=u(Fp=>{"use strict";Object.defineProperty(Fp,"__esModule",{value:!0});Fp.slurpFile=void 0;var mj=U("fs"),{readFile:hj}=mj.promises,Lg={},_j=n(t=>(Lg[t]||(Lg[t]=hj(t,"utf8")),Lg[t]),"slurpFile");Fp.slurpFile=_j});var Ug=u(Lp=>{"use strict";Object.defineProperty(Lp,"__esModule",{value:!0});Lp.loadSharedConfigFiles=void 0;var yj=Dg(),gj=I0(),wj=C0(),k0=Fg(),M0=zg(),D0=n(()=>({}),"swallowError"),Ej=n(async(t={})=>{let{filepath:e=(0,gj.getCredentialsFilepath)(),configFilepath:r=(0,yj.getConfigFilepath)()}=t,i=await Promise.all([(0,M0.slurpFile)(r).then(k0.parseIni).then(wj.getProfileData).catch(D0),(0,M0.slurpFile)(e).then(k0.parseIni).catch(D0)]);return{configFile:i[0],credentialsFile:i[1]}},"loadSharedConfigFiles");Lp.loadSharedConfigFiles=Ej});var L0=u(zp=>{"use strict";Object.defineProperty(zp,"__esModule",{value:!0});zp.getSsoSessionData=void 0;var F0=/^sso-session\s(["'])?([^\1]+)\1$/,vj=n(t=>Object.entries(t).filter(([e])=>F0.test(e)).reduce((e,[r,i])=>({...e,[F0.exec(r)[2]]:i}),{}),"getSsoSessionData");zp.getSsoSessionData=vj});var z0=u(Up=>{"use strict";Object.defineProperty(Up,"__esModule",{value:!0});Up.loadSsoSessionData=void 0;var Sj=Dg(),Nj=L0(),bj=Fg(),xj=zg(),Aj=n(()=>({}),"swallowError"),Tj=n(async(t={})=>{var e;return(0,xj.slurpFile)((e=t.configFilepath)!==null&&e!==void 0?e:(0,Sj.getConfigFilepath)()).then(bj.parseIni).then(Nj.getSsoSessionData).catch(Aj)},"loadSsoSessionData");Up.loadSsoSessionData=Tj});var U0=u(Wp=>{"use strict";Object.defineProperty(Wp,"__esModule",{value:!0});Wp.parseKnownFiles=void 0;var Oj=Ug(),Pj=n(async t=>{let e=await(0,Oj.loadSharedConfigFiles)(t);return{...e.configFile,...e.credentialsFile}},"parseKnownFiles");Wp.parseKnownFiles=Pj});var j0=u(W0=>{"use strict";Object.defineProperty(W0,"__esModule",{value:!0})});var xr=u(br=>{"use strict";Object.defineProperty(br,"__esModule",{value:!0});var tn=(A(),b(x));tn.__exportStar($c(),br);tn.__exportStar(P0(),br);tn.__exportStar(Mg(),br);tn.__exportStar(R0(),br);tn.__exportStar(Ug(),br);tn.__exportStar(z0(),br);tn.__exportStar(U0(),br);tn.__exportStar(j0(),br)});var Vp=u(jp=>{"use strict";Object.defineProperty(jp,"__esModule",{value:!0});jp.httpRequest=void 0;var Wg=ee(),Rj=U("buffer"),Ij=U("http");function qj(t){return new Promise((e,r)=>{var i;let s=(0,Ij.request)({method:"GET",...t,hostname:(i=t.hostname)===null||i===void 0?void 0:i.replace(/^\[(.+)\]$/,"$1")});s.on("error",o=>{r(Object.assign(new Wg.ProviderError("Unable to connect to instance metadata service"),o)),s.destroy()}),s.on("timeout",()=>{r(new Wg.ProviderError("TimeoutError from instance metadata service")),s.destroy()}),s.on("response",o=>{let{statusCode:a=400}=o;(a<200||300<=a)&&(r(Object.assign(new Wg.ProviderError("Error response received from instance metadata service"),{statusCode:a})),s.destroy());let c=[];o.on("data",l=>{c.push(l)}),o.on("end",()=>{e(Rj.Buffer.concat(c)),s.destroy()})}),s.end()})}n(qj,"httpRequest");jp.httpRequest=qj});var jg=u(Fo=>{"use strict";Object.defineProperty(Fo,"__esModule",{value:!0});Fo.fromImdsCredentials=Fo.isImdsCredentials=void 0;var Cj=n(t=>Boolean(t)&&typeof t=="object"&&typeof t.AccessKeyId=="string"&&typeof t.SecretAccessKey=="string"&&typeof t.Token=="string"&&typeof t.Expiration=="string","isImdsCredentials");Fo.isImdsCredentials=Cj;var kj=n(t=>({accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,sessionToken:t.Token,expiration:new Date(t.Expiration)}),"fromImdsCredentials");Fo.fromImdsCredentials=kj});var $p=u(Ar=>{"use strict";Object.defineProperty(Ar,"__esModule",{value:!0});Ar.providerConfigFromInit=Ar.DEFAULT_MAX_RETRIES=Ar.DEFAULT_TIMEOUT=void 0;Ar.DEFAULT_TIMEOUT=1e3;Ar.DEFAULT_MAX_RETRIES=0;var Mj=n(({maxRetries:t=Ar.DEFAULT_MAX_RETRIES,timeout:e=Ar.DEFAULT_TIMEOUT})=>({maxRetries:t,timeout:e}),"providerConfigFromInit");Ar.providerConfigFromInit=Mj});var Vg=u(Hp=>{"use strict";Object.defineProperty(Hp,"__esModule",{value:!0});Hp.retry=void 0;var Dj=n((t,e)=>{let r=t();for(let i=0;i<e;i++)r=r.catch(t);return r},"retry");Hp.retry=Dj});var $0=u(ke=>{"use strict";Object.defineProperty(ke,"__esModule",{value:!0});ke.fromContainerMetadata=ke.ENV_CMDS_AUTH_TOKEN=ke.ENV_CMDS_RELATIVE_URI=ke.ENV_CMDS_FULL_URI=void 0;var Gp=ee(),Fj=U("url"),Lj=Vp(),V0=jg(),zj=$p(),Uj=Vg();ke.ENV_CMDS_FULL_URI="AWS_CONTAINER_CREDENTIALS_FULL_URI";ke.ENV_CMDS_RELATIVE_URI="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI";ke.ENV_CMDS_AUTH_TOKEN="AWS_CONTAINER_AUTHORIZATION_TOKEN";var Wj=n((t={})=>{let{timeout:e,maxRetries:r}=(0,zj.providerConfigFromInit)(t);return()=>(0,Uj.retry)(async()=>{let i=await Gj(),s=JSON.parse(await jj(e,i));if(!(0,V0.isImdsCredentials)(s))throw new Gp.CredentialsProviderError("Invalid response received from instance metadata service.");return(0,V0.fromImdsCredentials)(s)},r)},"fromContainerMetadata");ke.fromContainerMetadata=Wj;var jj=n(async(t,e)=>(process.env[ke.ENV_CMDS_AUTH_TOKEN]&&(e.headers={...e.headers,Authorization:process.env[ke.ENV_CMDS_AUTH_TOKEN]}),(await(0,Lj.httpRequest)({...e,timeout:t})).toString()),"requestFromEcsImds"),Vj="169.254.170.2",$j={localhost:!0,"127.0.0.1":!0},Hj={"http:":!0,"https:":!0},Gj=n(async()=>{if(process.env[ke.ENV_CMDS_RELATIVE_URI])return{hostname:Vj,path:process.env[ke.ENV_CMDS_RELATIVE_URI]};if(process.env[ke.ENV_CMDS_FULL_URI]){let t=(0,Fj.parse)(process.env[ke.ENV_CMDS_FULL_URI]);if(!t.hostname||!(t.hostname in $j))throw new Gp.CredentialsProviderError(`${t.hostname} is not a valid container metadata service hostname`,!1);if(!t.protocol||!(t.protocol in Hj))throw new Gp.CredentialsProviderError(`${t.protocol} is not a valid container metadata service protocol`,!1);return{...t,port:t.port?parseInt(t.port,10):void 0}}throw new Gp.CredentialsProviderError(`The container metadata credential provider cannot be used unless the ${ke.ENV_CMDS_RELATIVE_URI} or ${ke.ENV_CMDS_FULL_URI} environment variable is set`,!1)},"getCmdsUri")});var H0=u(Bp=>{"use strict";Object.defineProperty(Bp,"__esModule",{value:!0});Bp.fromEnv=void 0;var Bj=ee(),Jj=n(t=>async()=>{try{let e=t(process.env);if(e===void 0)throw new Error;return e}catch(e){throw new Bj.CredentialsProviderError(e.message||`Cannot load config from environment variables with getter: ${t}`)}},"fromEnv");Bp.fromEnv=Jj});var B0=u(Jp=>{"use strict";Object.defineProperty(Jp,"__esModule",{value:!0});Jp.fromSharedConfigFiles=void 0;var Kj=ee(),G0=xr(),Yj=n((t,{preferredFile:e="config",...r}={})=>async()=>{let i=(0,G0.getProfileName)(r),{configFile:s,credentialsFile:o}=await(0,G0.loadSharedConfigFiles)(r),a=o[i]||{},c=s[i]||{},l=e==="config"?{...a,...c}:{...c,...a};try{let p=t(l);if(p===void 0)throw new Error;return p}catch(p){throw new Kj.CredentialsProviderError(p.message||`Cannot load config for profile ${i} in SDK configuration files with getter: ${t}`)}},"fromSharedConfigFiles");Jp.fromSharedConfigFiles=Yj});var J0=u(Kp=>{"use strict";Object.defineProperty(Kp,"__esModule",{value:!0});Kp.fromStatic=void 0;var Qj=ee(),Xj=n(t=>typeof t=="function","isFunction"),Zj=n(t=>Xj(t)?async()=>await t():(0,Qj.fromStatic)(t),"fromStatic");Kp.fromStatic=Zj});var Y0=u(Yp=>{"use strict";Object.defineProperty(Yp,"__esModule",{value:!0});Yp.loadConfig=void 0;var K0=ee(),eV=H0(),tV=B0(),rV=J0(),iV=n(({environmentVariableSelector:t,configFileSelector:e,default:r},i={})=>(0,K0.memoize)((0,K0.chain)((0,eV.fromEnv)(t),(0,tV.fromSharedConfigFiles)(e,i),(0,rV.fromStatic)(r))),"loadConfig");Yp.loadConfig=iV});var rn=u($g=>{"use strict";Object.defineProperty($g,"__esModule",{value:!0});var nV=(A(),b(x));nV.__exportStar(Y0(),$g)});var Q0=u(Hc=>{"use strict";Object.defineProperty(Hc,"__esModule",{value:!0});Hc.Endpoint=void 0;var sV;(function(t){t.IPv4="http://169.254.169.254",t.IPv6="http://[fd00:ec2::254]"})(sV=Hc.Endpoint||(Hc.Endpoint={}))});var X0=u(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});Tr.ENDPOINT_CONFIG_OPTIONS=Tr.CONFIG_ENDPOINT_NAME=Tr.ENV_ENDPOINT_NAME=void 0;Tr.ENV_ENDPOINT_NAME="AWS_EC2_METADATA_SERVICE_ENDPOINT";Tr.CONFIG_ENDPOINT_NAME="ec2_metadata_service_endpoint";Tr.ENDPOINT_CONFIG_OPTIONS={environmentVariableSelector:t=>t[Tr.ENV_ENDPOINT_NAME],configFileSelector:t=>t[Tr.CONFIG_ENDPOINT_NAME],default:void 0}});var Hg=u(Gc=>{"use strict";Object.defineProperty(Gc,"__esModule",{value:!0});Gc.EndpointMode=void 0;var oV;(function(t){t.IPv4="IPv4",t.IPv6="IPv6"})(oV=Gc.EndpointMode||(Gc.EndpointMode={}))});var Z0=u(Or=>{"use strict";Object.defineProperty(Or,"__esModule",{value:!0});Or.ENDPOINT_MODE_CONFIG_OPTIONS=Or.CONFIG_ENDPOINT_MODE_NAME=Or.ENV_ENDPOINT_MODE_NAME=void 0;var aV=Hg();Or.ENV_ENDPOINT_MODE_NAME="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE";Or.CONFIG_ENDPOINT_MODE_NAME="ec2_metadata_service_endpoint_mode";Or.ENDPOINT_MODE_CONFIG_OPTIONS={environmentVariableSelector:t=>t[Or.ENV_ENDPOINT_MODE_NAME],configFileSelector:t=>t[Or.CONFIG_ENDPOINT_MODE_NAME],default:aV.EndpointMode.IPv4}});var Bg=u(Qp=>{"use strict";Object.defineProperty(Qp,"__esModule",{value:!0});Qp.getInstanceMetadataEndpoint=void 0;var tx=rn(),cV=Mn(),ex=Q0(),dV=X0(),Gg=Hg(),uV=Z0(),lV=n(async()=>(0,cV.parseUrl)(await pV()||await fV()),"getInstanceMetadataEndpoint");Qp.getInstanceMetadataEndpoint=lV;var pV=n(async()=>(0,tx.loadConfig)(dV.ENDPOINT_CONFIG_OPTIONS)(),"getFromEndpointConfig"),fV=n(async()=>{let t=await(0,tx.loadConfig)(uV.ENDPOINT_MODE_CONFIG_OPTIONS)();switch(t){case Gg.EndpointMode.IPv4:return ex.Endpoint.IPv4;case Gg.EndpointMode.IPv6:return ex.Endpoint.IPv6;default:throw new Error(`Unsupported endpoint mode: ${t}. Select from ${Object.values(Gg.EndpointMode)}`)}},"getFromEndpointModeConfig")});var rx=u(Xp=>{"use strict";Object.defineProperty(Xp,"__esModule",{value:!0});Xp.getExtendedInstanceMetadataCredentials=void 0;var mV=5*60,hV=5*60,_V="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",yV=n((t,e)=>{var r;let i=mV+Math.floor(Math.random()*hV),s=new Date(Date.now()+i*1e3);e.warn("Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(newExpiration)}.\nFor more information, please visit: "+_V);let o=(r=t.originalExpiration)!==null&&r!==void 0?r:t.expiration;return{...t,...o?{originalExpiration:o}:{},expiration:s}},"getExtendedInstanceMetadataCredentials");Xp.getExtendedInstanceMetadataCredentials=yV});var nx=u(Zp=>{"use strict";Object.defineProperty(Zp,"__esModule",{value:!0});Zp.staticStabilityProvider=void 0;var ix=rx(),gV=n((t,e={})=>{let r=e?.logger||console,i;return async()=>{let s;try{s=await t(),s.expiration&&s.expiration.getTime()<Date.now()&&(s=(0,ix.getExtendedInstanceMetadataCredentials)(s,r))}catch(o){if(i)r.warn("Credential renew failed: ",o),s=(0,ix.getExtendedInstanceMetadataCredentials)(i,r);else throw o}return i=s,s}},"staticStabilityProvider");Zp.staticStabilityProvider=gV});var cx=u(ef=>{"use strict";Object.defineProperty(ef,"__esModule",{value:!0});ef.fromInstanceMetadata=void 0;var wV=ee(),Jg=Vp(),sx=jg(),EV=$p(),ox=Vg(),vV=Bg(),SV=nx(),ax="/latest/meta-data/iam/security-credentials/",NV="/latest/api/token",bV=n((t={})=>(0,SV.staticStabilityProvider)(xV(t),{logger:t.logger}),"fromInstanceMetadata");ef.fromInstanceMetadata=bV;var xV=n(t=>{let e=!1,{timeout:r,maxRetries:i}=(0,EV.providerConfigFromInit)(t),s=n(async(o,a)=>{let c=(await(0,ox.retry)(async()=>{let l;try{l=await TV(a)}catch(p){throw p.statusCode===401&&(e=!1),p}return l},o)).trim();return(0,ox.retry)(async()=>{let l;try{l=await OV(c,a)}catch(p){throw p.statusCode===401&&(e=!1),p}return l},o)},"getCredentials");return async()=>{let o=await(0,vV.getInstanceMetadataEndpoint)();if(e)return s(i,{...o,timeout:r});{let a;try{a=(await AV({...o,timeout:r})).toString()}catch(c){if(c?.statusCode===400)throw Object.assign(c,{message:"EC2 Metadata token request returned error"});return(c.message==="TimeoutError"||[403,404,405].includes(c.statusCode))&&(e=!0),s(i,{...o,timeout:r})}return s(i,{...o,headers:{"x-aws-ec2-metadata-token":a},timeout:r})}}},"getInstanceImdsProvider"),AV=n(async t=>(0,Jg.httpRequest)({...t,path:NV,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),"getMetadataToken"),TV=n(async t=>(await(0,Jg.httpRequest)({...t,path:ax})).toString(),"getProfile"),OV=n(async(t,e)=>{let r=JSON.parse((await(0,Jg.httpRequest)({...e,path:ax+t})).toString());if(!(0,sx.isImdsCredentials)(r))throw new wV.CredentialsProviderError("Invalid response received from instance metadata service.");return(0,sx.fromImdsCredentials)(r)},"getCredentialsFromProfile")});var ux=u(dx=>{"use strict";Object.defineProperty(dx,"__esModule",{value:!0})});var rf=u(Pr=>{"use strict";Object.defineProperty(Pr,"__esModule",{value:!0});Pr.getInstanceMetadataEndpoint=Pr.httpRequest=void 0;var tf=(A(),b(x));tf.__exportStar($0(),Pr);tf.__exportStar(cx(),Pr);tf.__exportStar($p(),Pr);tf.__exportStar(ux(),Pr);var PV=Vp();Object.defineProperty(Pr,"httpRequest",{enumerable:!0,get:function(){return PV.httpRequest}});var RV=Bg();Object.defineProperty(Pr,"getInstanceMetadataEndpoint",{enumerable:!0,get:function(){return RV.getInstanceMetadataEndpoint}})});var px=u(nf=>{"use strict";Object.defineProperty(nf,"__esModule",{value:!0});nf.resolveCredentialSource=void 0;var IV=kg(),lx=rf(),qV=ee(),CV=n((t,e)=>{let r={EcsContainer:lx.fromContainerMetadata,Ec2InstanceMetadata:lx.fromInstanceMetadata,Environment:IV.fromEnv};if(t in r)return r[t]();throw new qV.CredentialsProviderError(`Unsupported credential source in profile ${e}. Got ${t}, expected EcsContainer or Ec2InstanceMetadata or Environment.`)},"resolveCredentialSource");nf.resolveCredentialSource=CV});var fx=u(Lo=>{"use strict";Object.defineProperty(Lo,"__esModule",{value:!0});Lo.resolveAssumeRoleCredentials=Lo.isAssumeRoleProfile=void 0;var Kg=ee(),kV=xr(),MV=px(),DV=Yg(),FV=n(t=>Boolean(t)&&typeof t=="object"&&typeof t.role_arn=="string"&&["undefined","string"].indexOf(typeof t.role_session_name)>-1&&["undefined","string"].indexOf(typeof t.external_id)>-1&&["undefined","string"].indexOf(typeof t.mfa_serial)>-1&&(LV(t)||zV(t)),"isAssumeRoleProfile");Lo.isAssumeRoleProfile=FV;var LV=n(t=>typeof t.source_profile=="string"&&typeof t.credential_source>"u","isAssumeRoleWithSourceProfile"),zV=n(t=>typeof t.credential_source=="string"&&typeof t.source_profile>"u","isAssumeRoleWithProviderProfile"),UV=n(async(t,e,r,i={})=>{let s=e[t];if(!r.roleAssumer)throw new Kg.CredentialsProviderError(`Profile ${t} requires a role to be assumed, but no role assumption callback was provided.`,!1);let{source_profile:o}=s;if(o&&o in i)throw new Kg.CredentialsProviderError(`Detected a cycle attempting to resolve credentials for profile ${(0,kV.getProfileName)(r)}. Profiles visited: `+Object.keys(i).join(", "),!1);let a=o?(0,DV.resolveProfileData)(o,e,r,{...i,[o]:!0}):(0,MV.resolveCredentialSource)(s.credential_source,t)(),c={RoleArn:s.role_arn,RoleSessionName:s.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:s.external_id},{mfa_serial:l}=s;if(l){if(!r.mfaCodeProvider)throw new Kg.CredentialsProviderError(`Profile ${t} requires multi-factor authentication, but no MFA code callback was provided.`,!1);c.SerialNumber=l,c.TokenCode=await r.mfaCodeProvider(l)}let p=await a;return r.roleAssumer(p,c)},"resolveAssumeRoleCredentials");Lo.resolveAssumeRoleCredentials=UV});var mx=u(sf=>{"use strict";Object.defineProperty(sf,"__esModule",{value:!0});sf.getValidatedProcessCredentials=void 0;var WV=n((t,e)=>{if(e.Version!==1)throw Error(`Profile ${t} credential_process did not return Version 1.`);if(e.AccessKeyId===void 0||e.SecretAccessKey===void 0)throw Error(`Profile ${t} credential_process returned invalid credentials.`);if(e.Expiration){let r=new Date;if(new Date(e.Expiration)<r)throw Error(`Profile ${t} credential_process returned expired credentials.`)}return{accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,...e.SessionToken&&{sessionToken:e.SessionToken},...e.Expiration&&{expiration:new Date(e.Expiration)}}},"getValidatedProcessCredentials");sf.getValidatedProcessCredentials=WV});var hx=u(of=>{"use strict";Object.defineProperty(of,"__esModule",{value:!0});of.resolveProcessCredentials=void 0;var Qg=ee(),jV=U("child_process"),VV=U("util"),$V=mx(),HV=n(async(t,e)=>{let r=e[t];if(e[t]){let i=r.credential_process;if(i!==void 0){let s=(0,VV.promisify)(jV.exec);try{let{stdout:o}=await s(i),a;try{a=JSON.parse(o.trim())}catch{throw Error(`Profile ${t} credential_process returned invalid JSON.`)}return(0,$V.getValidatedProcessCredentials)(t,a)}catch(o){throw new Qg.CredentialsProviderError(o.message)}}else throw new Qg.CredentialsProviderError(`Profile ${t} did not contain credential_process.`)}else throw new Qg.CredentialsProviderError(`Profile ${t} could not be found in shared credentials file.`)},"resolveProcessCredentials");of.resolveProcessCredentials=HV});var yx=u(af=>{"use strict";Object.defineProperty(af,"__esModule",{value:!0});af.fromProcess=void 0;var _x=xr(),GV=hx(),BV=n((t={})=>async()=>{let e=await(0,_x.parseKnownFiles)(t);return(0,GV.resolveProcessCredentials)((0,_x.getProfileName)(t),e)},"fromProcess");af.fromProcess=BV});var Zg=u(Xg=>{"use strict";Object.defineProperty(Xg,"__esModule",{value:!0});var JV=(A(),b(x));JV.__exportStar(yx(),Xg)});var gx=u(zo=>{"use strict";Object.defineProperty(zo,"__esModule",{value:!0});zo.resolveProcessCredentials=zo.isProcessProfile=void 0;var KV=Zg(),YV=n(t=>Boolean(t)&&typeof t=="object"&&typeof t.credential_process=="string","isProcessProfile");zo.isProcessProfile=YV;var QV=n(async(t,e)=>(0,KV.fromProcess)({...t,profile:e})(),"resolveProcessCredentials");zo.resolveProcessCredentials=QV});var ew=u(cf=>{"use strict";Object.defineProperty(cf,"__esModule",{value:!0});cf.isSsoProfile=void 0;var XV=n(t=>t&&(typeof t.sso_start_url=="string"||typeof t.sso_account_id=="string"||typeof t.sso_session=="string"||typeof t.sso_region=="string"||typeof t.sso_role_name=="string"),"isSsoProfile");cf.isSsoProfile=XV});var uf=u(df=>{"use strict";Object.defineProperty(df,"__esModule",{value:!0});df.SSOServiceException=void 0;var ZV=C(),Uo=class extends ZV.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,Uo.prototype)}};n(Uo,"SSOServiceException");df.SSOServiceException=Uo});var Xn=u(B=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0});B.LogoutRequestFilterSensitiveLog=B.ListAccountsResponseFilterSensitiveLog=B.ListAccountsRequestFilterSensitiveLog=B.ListAccountRolesResponseFilterSensitiveLog=B.RoleInfoFilterSensitiveLog=B.ListAccountRolesRequestFilterSensitiveLog=B.GetRoleCredentialsResponseFilterSensitiveLog=B.RoleCredentialsFilterSensitiveLog=B.GetRoleCredentialsRequestFilterSensitiveLog=B.AccountInfoFilterSensitiveLog=B.UnauthorizedException=B.TooManyRequestsException=B.ResourceNotFoundException=B.InvalidRequestException=void 0;var Ho=C(),lf=uf(),Wo=class extends lf.SSOServiceException{constructor(e){super({name:"InvalidRequestException",$fault:"client",...e}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,Wo.prototype)}};n(Wo,"InvalidRequestException");B.InvalidRequestException=Wo;var jo=class extends lf.SSOServiceException{constructor(e){super({name:"ResourceNotFoundException",$fault:"client",...e}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,jo.prototype)}};n(jo,"ResourceNotFoundException");B.ResourceNotFoundException=jo;var Vo=class extends lf.SSOServiceException{constructor(e){super({name:"TooManyRequestsException",$fault:"client",...e}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,Vo.prototype)}};n(Vo,"TooManyRequestsException");B.TooManyRequestsException=Vo;var $o=class extends lf.SSOServiceException{constructor(e){super({name:"UnauthorizedException",$fault:"client",...e}),this.name="UnauthorizedException",this.$fault="client",Object.setPrototypeOf(this,$o.prototype)}};n($o,"UnauthorizedException");B.UnauthorizedException=$o;var e2=n(t=>({...t}),"AccountInfoFilterSensitiveLog");B.AccountInfoFilterSensitiveLog=e2;var t2=n(t=>({...t,...t.accessToken&&{accessToken:Ho.SENSITIVE_STRING}}),"GetRoleCredentialsRequestFilterSensitiveLog");B.GetRoleCredentialsRequestFilterSensitiveLog=t2;var r2=n(t=>({...t,...t.secretAccessKey&&{secretAccessKey:Ho.SENSITIVE_STRING},...t.sessionToken&&{sessionToken:Ho.SENSITIVE_STRING}}),"RoleCredentialsFilterSensitiveLog");B.RoleCredentialsFilterSensitiveLog=r2;var i2=n(t=>({...t,...t.roleCredentials&&{roleCredentials:(0,B.RoleCredentialsFilterSensitiveLog)(t.roleCredentials)}}),"GetRoleCredentialsResponseFilterSensitiveLog");B.GetRoleCredentialsResponseFilterSensitiveLog=i2;var n2=n(t=>({...t,...t.accessToken&&{accessToken:Ho.SENSITIVE_STRING}}),"ListAccountRolesRequestFilterSensitiveLog");B.ListAccountRolesRequestFilterSensitiveLog=n2;var s2=n(t=>({...t}),"RoleInfoFilterSensitiveLog");B.RoleInfoFilterSensitiveLog=s2;var o2=n(t=>({...t}),"ListAccountRolesResponseFilterSensitiveLog");B.ListAccountRolesResponseFilterSensitiveLog=o2;var a2=n(t=>({...t,...t.accessToken&&{accessToken:Ho.SENSITIVE_STRING}}),"ListAccountsRequestFilterSensitiveLog");B.ListAccountsRequestFilterSensitiveLog=a2;var c2=n(t=>({...t}),"ListAccountsResponseFilterSensitiveLog");B.ListAccountsResponseFilterSensitiveLog=c2;var d2=n(t=>({...t,...t.accessToken&&{accessToken:Ho.SENSITIVE_STRING}}),"LogoutRequestFilterSensitiveLog");B.LogoutRequestFilterSensitiveLog=d2});var Bc=u(Me=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0});Me.deserializeAws_restJson1LogoutCommand=Me.deserializeAws_restJson1ListAccountsCommand=Me.deserializeAws_restJson1ListAccountRolesCommand=Me.deserializeAws_restJson1GetRoleCredentialsCommand=Me.serializeAws_restJson1LogoutCommand=Me.serializeAws_restJson1ListAccountsCommand=Me.serializeAws_restJson1ListAccountRolesCommand=Me.serializeAws_restJson1GetRoleCredentialsCommand=void 0;var pf=tt(),$=C(),ff=Xn(),mf=uf(),u2=n(async(t,e)=>{let{hostname:r,protocol:i="https",port:s,path:o}=await e.endpoint(),a=rt({},gf,{"x-amz-sso_bearer_token":t.accessToken}),c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/federation/credentials`,l=rt({role_name:[,(0,$.expectNonNull)(t.roleName,"roleName")],account_id:[,(0,$.expectNonNull)(t.accountId,"accountId")]}),p;return new pf.HttpRequest({protocol:i,hostname:r,port:s,method:"GET",headers:a,path:c,query:l,body:p})},"serializeAws_restJson1GetRoleCredentialsCommand");Me.serializeAws_restJson1GetRoleCredentialsCommand=u2;var l2=n(async(t,e)=>{let{hostname:r,protocol:i="https",port:s,path:o}=await e.endpoint(),a=rt({},gf,{"x-amz-sso_bearer_token":t.accessToken}),c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/assignment/roles`,l=rt({next_token:[,t.nextToken],max_result:[()=>t.maxResults!==void 0,()=>t.maxResults.toString()],account_id:[,(0,$.expectNonNull)(t.accountId,"accountId")]}),p;return new pf.HttpRequest({protocol:i,hostname:r,port:s,method:"GET",headers:a,path:c,query:l,body:p})},"serializeAws_restJson1ListAccountRolesCommand");Me.serializeAws_restJson1ListAccountRolesCommand=l2;var p2=n(async(t,e)=>{let{hostname:r,protocol:i="https",port:s,path:o}=await e.endpoint(),a=rt({},gf,{"x-amz-sso_bearer_token":t.accessToken}),c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/assignment/accounts`,l=rt({next_token:[,t.nextToken],max_result:[()=>t.maxResults!==void 0,()=>t.maxResults.toString()]}),p;return new pf.HttpRequest({protocol:i,hostname:r,port:s,method:"GET",headers:a,path:c,query:l,body:p})},"serializeAws_restJson1ListAccountsCommand");Me.serializeAws_restJson1ListAccountsCommand=p2;var f2=n(async(t,e)=>{let{hostname:r,protocol:i="https",port:s,path:o}=await e.endpoint(),a=rt({},gf,{"x-amz-sso_bearer_token":t.accessToken}),c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/logout`,l;return new pf.HttpRequest({protocol:i,hostname:r,port:s,method:"POST",headers:a,path:c,body:l})},"serializeAws_restJson1LogoutCommand");Me.serializeAws_restJson1LogoutCommand=f2;var m2=n(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return h2(t,e);let r=rt({$metadata:nn(t)}),i=(0,$.expectNonNull)((0,$.expectObject)(await wf(t.body,e)),"body");return i.roleCredentials!=null&&(r.roleCredentials=b2(i.roleCredentials,e)),r},"deserializeAws_restJson1GetRoleCredentialsCommand");Me.deserializeAws_restJson1GetRoleCredentialsCommand=m2;var h2=n(async(t,e)=>{let r={...t,body:await Ef(t.body,e)},i=vf(t,r.body);switch(i){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await hf(r,e);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await tw(r,e);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await _f(r,e);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await yf(r,e);default:let s=r.body;(0,$.throwDefaultError)({output:t,parsedBody:s,exceptionCtor:mf.SSOServiceException,errorCode:i})}},"deserializeAws_restJson1GetRoleCredentialsCommandError"),_2=n(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return y2(t,e);let r=rt({$metadata:nn(t)}),i=(0,$.expectNonNull)((0,$.expectObject)(await wf(t.body,e)),"body");return i.nextToken!=null&&(r.nextToken=(0,$.expectString)(i.nextToken)),i.roleList!=null&&(r.roleList=A2(i.roleList,e)),r},"deserializeAws_restJson1ListAccountRolesCommand");Me.deserializeAws_restJson1ListAccountRolesCommand=_2;var y2=n(async(t,e)=>{let r={...t,body:await Ef(t.body,e)},i=vf(t,r.body);switch(i){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await hf(r,e);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await tw(r,e);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await _f(r,e);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await yf(r,e);default:let s=r.body;(0,$.throwDefaultError)({output:t,parsedBody:s,exceptionCtor:mf.SSOServiceException,errorCode:i})}},"deserializeAws_restJson1ListAccountRolesCommandError"),g2=n(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return w2(t,e);let r=rt({$metadata:nn(t)}),i=(0,$.expectNonNull)((0,$.expectObject)(await wf(t.body,e)),"body");return i.accountList!=null&&(r.accountList=N2(i.accountList,e)),i.nextToken!=null&&(r.nextToken=(0,$.expectString)(i.nextToken)),r},"deserializeAws_restJson1ListAccountsCommand");Me.deserializeAws_restJson1ListAccountsCommand=g2;var w2=n(async(t,e)=>{let r={...t,body:await Ef(t.body,e)},i=vf(t,r.body);switch(i){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await hf(r,e);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await tw(r,e);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await _f(r,e);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await yf(r,e);default:let s=r.body;(0,$.throwDefaultError)({output:t,parsedBody:s,exceptionCtor:mf.SSOServiceException,errorCode:i})}},"deserializeAws_restJson1ListAccountsCommandError"),E2=n(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return v2(t,e);let r=rt({$metadata:nn(t)});return await wx(t.body,e),r},"deserializeAws_restJson1LogoutCommand");Me.deserializeAws_restJson1LogoutCommand=E2;var v2=n(async(t,e)=>{let r={...t,body:await Ef(t.body,e)},i=vf(t,r.body);switch(i){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await hf(r,e);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await _f(r,e);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await yf(r,e);default:let s=r.body;(0,$.throwDefaultError)({output:t,parsedBody:s,exceptionCtor:mf.SSOServiceException,errorCode:i})}},"deserializeAws_restJson1LogoutCommandError"),rt=$.map,hf=n(async(t,e)=>{let r=rt({}),i=t.body;i.message!=null&&(r.message=(0,$.expectString)(i.message));let s=new ff.InvalidRequestException({$metadata:nn(t),...r});return(0,$.decorateServiceException)(s,t.body)},"deserializeAws_restJson1InvalidRequestExceptionResponse"),tw=n(async(t,e)=>{let r=rt({}),i=t.body;i.message!=null&&(r.message=(0,$.expectString)(i.message));let s=new ff.ResourceNotFoundException({$metadata:nn(t),...r});return(0,$.decorateServiceException)(s,t.body)},"deserializeAws_restJson1ResourceNotFoundExceptionResponse"),_f=n(async(t,e)=>{let r=rt({}),i=t.body;i.message!=null&&(r.message=(0,$.expectString)(i.message));let s=new ff.TooManyRequestsException({$metadata:nn(t),...r});return(0,$.decorateServiceException)(s,t.body)},"deserializeAws_restJson1TooManyRequestsExceptionResponse"),yf=n(async(t,e)=>{let r=rt({}),i=t.body;i.message!=null&&(r.message=(0,$.expectString)(i.message));let s=new ff.UnauthorizedException({$metadata:nn(t),...r});return(0,$.decorateServiceException)(s,t.body)},"deserializeAws_restJson1UnauthorizedExceptionResponse"),S2=n((t,e)=>({accountId:(0,$.expectString)(t.accountId),accountName:(0,$.expectString)(t.accountName),emailAddress:(0,$.expectString)(t.emailAddress)}),"deserializeAws_restJson1AccountInfo"),N2=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:S2(i,e)),"deserializeAws_restJson1AccountListType"),b2=n((t,e)=>({accessKeyId:(0,$.expectString)(t.accessKeyId),expiration:(0,$.expectLong)(t.expiration),secretAccessKey:(0,$.expectString)(t.secretAccessKey),sessionToken:(0,$.expectString)(t.sessionToken)}),"deserializeAws_restJson1RoleCredentials"),x2=n((t,e)=>({accountId:(0,$.expectString)(t.accountId),roleName:(0,$.expectString)(t.roleName)}),"deserializeAws_restJson1RoleInfo"),A2=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:x2(i,e)),"deserializeAws_restJson1RoleListType"),nn=n(t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),"deserializeMetadata"),wx=n((t=new Uint8Array,e)=>t instanceof Uint8Array?Promise.resolve(t):e.streamCollector(t)||Promise.resolve(new Uint8Array),"collectBody"),T2=n((t,e)=>wx(t,e).then(r=>e.utf8Encoder(r)),"collectBodyString"),gf=n(t=>t!=null&&t!==""&&(!Object.getOwnPropertyNames(t).includes("length")||t.length!=0)&&(!Object.getOwnPropertyNames(t).includes("size")||t.size!=0),"isSerializableHeaderValue"),wf=n((t,e)=>T2(t,e).then(r=>r.length?JSON.parse(r):{}),"parseBody"),Ef=n(async(t,e)=>{let r=await wf(t,e);return r.message=r.message??r.Message,r},"parseErrorBody"),vf=n((t,e)=>{let r=n((o,a)=>Object.keys(o).find(c=>c.toLowerCase()===a.toLowerCase()),"findKey"),i=n(o=>{let a=o;return typeof a=="number"&&(a=a.toString()),a.indexOf(",")>=0&&(a=a.split(",")[0]),a.indexOf(":")>=0&&(a=a.split(":")[0]),a.indexOf("#")>=0&&(a=a.split("#")[1]),a},"sanitizeErrorCode"),s=r(t.headers,"x-amzn-errortype");if(s!==void 0)return i(t.headers[s]);if(e.code!==void 0)return i(e.code);if(e.__type!==void 0)return i(e.__type)},"loadRestJsonErrorCode")});var rw=u(Sf=>{"use strict";Object.defineProperty(Sf,"__esModule",{value:!0});Sf.GetRoleCredentialsCommand=void 0;var O2=ne(),P2=me(),R2=C(),Ex=Xn(),vx=Bc(),Go=class extends R2.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,P2.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,O2.getEndpointPlugin)(r,Go.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"SSOClient",commandName:"GetRoleCredentialsCommand",inputFilterSensitiveLog:Ex.GetRoleCredentialsRequestFilterSensitiveLog,outputFilterSensitiveLog:Ex.GetRoleCredentialsResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,vx.serializeAws_restJson1GetRoleCredentialsCommand)(e,r)}deserialize(e,r){return(0,vx.deserializeAws_restJson1GetRoleCredentialsCommand)(e,r)}};n(Go,"GetRoleCredentialsCommand");Sf.GetRoleCredentialsCommand=Go});var bf=u(Nf=>{"use strict";Object.defineProperty(Nf,"__esModule",{value:!0});Nf.ListAccountRolesCommand=void 0;var I2=ne(),q2=me(),C2=C(),Sx=Xn(),Nx=Bc(),Bo=class extends C2.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,q2.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,I2.getEndpointPlugin)(r,Bo.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"SSOClient",commandName:"ListAccountRolesCommand",inputFilterSensitiveLog:Sx.ListAccountRolesRequestFilterSensitiveLog,outputFilterSensitiveLog:Sx.ListAccountRolesResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,Nx.serializeAws_restJson1ListAccountRolesCommand)(e,r)}deserialize(e,r){return(0,Nx.deserializeAws_restJson1ListAccountRolesCommand)(e,r)}};n(Bo,"ListAccountRolesCommand");Nf.ListAccountRolesCommand=Bo});var Af=u(xf=>{"use strict";Object.defineProperty(xf,"__esModule",{value:!0});xf.ListAccountsCommand=void 0;var k2=ne(),M2=me(),D2=C(),bx=Xn(),xx=Bc(),Jo=class extends D2.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,M2.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,k2.getEndpointPlugin)(r,Jo.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"SSOClient",commandName:"ListAccountsCommand",inputFilterSensitiveLog:bx.ListAccountsRequestFilterSensitiveLog,outputFilterSensitiveLog:bx.ListAccountsResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,xx.serializeAws_restJson1ListAccountsCommand)(e,r)}deserialize(e,r){return(0,xx.deserializeAws_restJson1ListAccountsCommand)(e,r)}};n(Jo,"ListAccountsCommand");xf.ListAccountsCommand=Jo});var iw=u(Tf=>{"use strict";Object.defineProperty(Tf,"__esModule",{value:!0});Tf.LogoutCommand=void 0;var F2=ne(),L2=me(),z2=C(),U2=Xn(),Ax=Bc(),Ko=class extends z2.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,L2.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,F2.getEndpointPlugin)(r,Ko.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"SSOClient",commandName:"LogoutCommand",inputFilterSensitiveLog:U2.LogoutRequestFilterSensitiveLog,outputFilterSensitiveLog:f=>f},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,Ax.serializeAws_restJson1LogoutCommand)(e,r)}deserialize(e,r){return(0,Ax.deserializeAws_restJson1LogoutCommand)(e,r)}};n(Ko,"LogoutCommand");Tf.LogoutCommand=Ko});var Tx=u(Of=>{"use strict";Object.defineProperty(Of,"__esModule",{value:!0});Of.resolveClientEndpointParameters=void 0;var W2=n(t=>({...t,useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),"resolveClientEndpointParameters");Of.resolveClientEndpointParameters=W2});var Ox=u((xhe,j2)=>{j2.exports={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.279.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.272.0","@aws-sdk/fetch-http-handler":"3.272.0","@aws-sdk/hash-node":"3.272.0","@aws-sdk/invalid-dependency":"3.272.0","@aws-sdk/middleware-content-length":"3.272.0","@aws-sdk/middleware-endpoint":"3.272.0","@aws-sdk/middleware-host-header":"3.278.0","@aws-sdk/middleware-logger":"3.272.0","@aws-sdk/middleware-recursion-detection":"3.272.0","@aws-sdk/middleware-retry":"3.272.0","@aws-sdk/middleware-serde":"3.272.0","@aws-sdk/middleware-stack":"3.272.0","@aws-sdk/middleware-user-agent":"3.272.0","@aws-sdk/node-config-provider":"3.272.0","@aws-sdk/node-http-handler":"3.272.0","@aws-sdk/protocol-http":"3.272.0","@aws-sdk/smithy-client":"3.279.0","@aws-sdk/types":"3.272.0","@aws-sdk/url-parser":"3.272.0","@aws-sdk/util-base64":"3.208.0","@aws-sdk/util-body-length-browser":"3.188.0","@aws-sdk/util-body-length-node":"3.208.0","@aws-sdk/util-defaults-mode-browser":"3.279.0","@aws-sdk/util-defaults-mode-node":"3.279.0","@aws-sdk/util-endpoints":"3.272.0","@aws-sdk/util-retry":"3.272.0","@aws-sdk/util-user-agent-browser":"3.272.0","@aws-sdk/util-user-agent-node":"3.272.0","@aws-sdk/util-utf8":"3.254.0",tslib:"^2.3.1"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.208.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.19.2",typescript:"~4.6.2"},overrides:{typedoc:{typescript:"~4.6.2"}},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}}});var Jc=u(Rf=>{"use strict";Object.defineProperty(Rf,"__esModule",{value:!0});Rf.Hash=void 0;var nw=_o(),V2=di(),$2=U("buffer"),Px=U("crypto"),Pf=class{constructor(e,r){this.algorithmIdentifier=e,this.secret=r,this.reset()}update(e,r){this.hash.update((0,V2.toUint8Array)(Rx(e,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?(0,Px.createHmac)(this.algorithmIdentifier,Rx(this.secret)):(0,Px.createHash)(this.algorithmIdentifier)}};n(Pf,"Hash");Rf.Hash=Pf;function Rx(t,e){return $2.Buffer.isBuffer(t)?t:typeof t=="string"?(0,nw.fromString)(t,e):ArrayBuffer.isView(t)?(0,nw.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength):(0,nw.fromArrayBuffer)(t)}n(Rx,"castSourceData")});var ow=u(If=>{"use strict";Object.defineProperty(If,"__esModule",{value:!0});If.buildQueryString=void 0;var sw=og();function H2(t){let e=[];for(let r of Object.keys(t).sort()){let i=t[r];if(r=(0,sw.escapeUri)(r),Array.isArray(i))for(let s=0,o=i.length;s<o;s++)e.push(`${r}=${(0,sw.escapeUri)(i[s])}`);else{let s=r;(i||typeof i=="string")&&(s+=`=${(0,sw.escapeUri)(i)}`),e.push(s)}}return e.join("&")}n(H2,"buildQueryString");If.buildQueryString=H2});var Ix=u(qf=>{"use strict";Object.defineProperty(qf,"__esModule",{value:!0});qf.NODEJS_TIMEOUT_ERROR_CODES=void 0;qf.NODEJS_TIMEOUT_ERROR_CODES=["ECONNRESET","EPIPE","ETIMEDOUT"]});var aw=u(Cf=>{"use strict";Object.defineProperty(Cf,"__esModule",{value:!0});Cf.getTransformedHeaders=void 0;var G2=n(t=>{let e={};for(let r of Object.keys(t)){let i=t[r];e[r]=Array.isArray(i)?i.join(","):i}return e},"getTransformedHeaders");Cf.getTransformedHeaders=G2});var qx=u(kf=>{"use strict";Object.defineProperty(kf,"__esModule",{value:!0});kf.setConnectionTimeout=void 0;var B2=n((t,e,r=0)=>{r&&t.on("socket",i=>{if(i.connecting){let s=setTimeout(()=>{t.destroy(),e(Object.assign(new Error(`Socket timed out without establishing a connection within ${r} ms`),{name:"TimeoutError"}))},r);i.on("connect",()=>{clearTimeout(s)})}})},"setConnectionTimeout");kf.setConnectionTimeout=B2});var Cx=u(Mf=>{"use strict";Object.defineProperty(Mf,"__esModule",{value:!0});Mf.setSocketTimeout=void 0;var J2=n((t,e,r=0)=>{t.setTimeout(r,()=>{t.destroy(),e(Object.assign(new Error(`Connection timed out after ${r} ms`),{name:"TimeoutError"}))})},"setSocketTimeout");Mf.setSocketTimeout=J2});var cw=u(Df=>{"use strict";Object.defineProperty(Df,"__esModule",{value:!0});Df.writeRequestBody=void 0;var K2=U("stream");function Y2(t,e){(e.headers.Expect||e.headers.expect)==="100-continue"?t.on("continue",()=>{kx(t,e.body)}):kx(t,e.body)}n(Y2,"writeRequestBody");Df.writeRequestBody=Y2;function kx(t,e){e instanceof K2.Readable?e.pipe(t):e?t.end(Buffer.from(e)):t.end()}n(kx,"writeBody")});var Fx=u(Lf=>{"use strict";Object.defineProperty(Lf,"__esModule",{value:!0});Lf.NodeHttpHandler=void 0;var Q2=tt(),X2=ow(),Mx=U("http"),Dx=U("https"),Z2=Ix(),e$=aw(),t$=qx(),r$=Cx(),i$=cw(),Ff=class{constructor(e){this.metadata={handlerProtocol:"http/1.1"},this.configProvider=new Promise((r,i)=>{typeof e=="function"?e().then(s=>{r(this.resolveDefaultConfig(s))}).catch(i):r(this.resolveDefaultConfig(e))})}resolveDefaultConfig(e){let{connectionTimeout:r,socketTimeout:i,httpAgent:s,httpsAgent:o}=e||{},a=!0,c=50;return{connectionTimeout:r,socketTimeout:i,httpAgent:s||new Mx.Agent({keepAlive:a,maxSockets:c}),httpsAgent:o||new Dx.Agent({keepAlive:a,maxSockets:c})}}destroy(){var e,r,i,s;(r=(e=this.config)===null||e===void 0?void 0:e.httpAgent)===null||r===void 0||r.destroy(),(s=(i=this.config)===null||i===void 0?void 0:i.httpsAgent)===null||s===void 0||s.destroy()}async handle(e,{abortSignal:r}={}){return this.config||(this.config=await this.configProvider),new Promise((i,s)=>{if(!this.config)throw new Error("Node HTTP request handler config is not resolved");if(r?.aborted){let f=new Error("Request aborted");f.name="AbortError",s(f);return}let o=e.protocol==="https:",a=(0,X2.buildQueryString)(e.query||{}),c={headers:e.headers,host:e.hostname,method:e.method,path:a?`${e.path}?${a}`:e.path,port:e.port,agent:o?this.config.httpsAgent:this.config.httpAgent},p=(o?Dx.request:Mx.request)(c,f=>{let m=new Q2.HttpResponse({statusCode:f.statusCode||-1,headers:(0,e$.getTransformedHeaders)(f.headers),body:f});i({response:m})});p.on("error",f=>{Z2.NODEJS_TIMEOUT_ERROR_CODES.includes(f.code)?s(Object.assign(f,{name:"TimeoutError"})):s(f)}),(0,t$.setConnectionTimeout)(p,s,this.config.connectionTimeout),(0,r$.setSocketTimeout)(p,s,this.config.socketTimeout),r&&(r.onabort=()=>{p.abort();let f=new Error("Request aborted");f.name="AbortError",s(f)}),(0,i$.writeRequestBody)(p,e)})}};n(Ff,"NodeHttpHandler");Lf.NodeHttpHandler=Ff});var Lx=u(Uf=>{"use strict";Object.defineProperty(Uf,"__esModule",{value:!0});Uf.NodeHttp2Handler=void 0;var n$=tt(),s$=ow(),dw=U("http2"),o$=aw(),a$=cw(),zf=class{constructor(e){this.metadata={handlerProtocol:"h2"},this.configProvider=new Promise((r,i)=>{typeof e=="function"?e().then(s=>{r(s||{})}).catch(i):r(e||{})}),this.sessionCache=new Map}destroy(){for(let e of this.sessionCache.values())e.forEach(r=>this.destroySession(r));this.sessionCache.clear()}async handle(e,{abortSignal:r}={}){this.config||(this.config=await this.configProvider);let{requestTimeout:i,disableConcurrentStreams:s}=this.config;return new Promise((o,a)=>{let c=!1;if(r?.aborted){c=!0;let Ne=new Error("Request aborted");Ne.name="AbortError",a(Ne);return}let{hostname:l,method:p,port:f,protocol:m,path:h,query:_}=e,w=`${m}//${l}${f?`:${f}`:""}`,g=this.getSession(w,s||!1),S=n(Ne=>{s&&this.destroySession(g),c=!0,a(Ne)},"reject"),ie=(0,s$.buildQueryString)(_||{}),Ie=g.request({...e.headers,[dw.constants.HTTP2_HEADER_PATH]:ie?`${h}?${ie}`:h,[dw.constants.HTTP2_HEADER_METHOD]:p});g.ref(),Ie.on("response",Ne=>{let Wd=new n$.HttpResponse({statusCode:Ne[":status"]||-1,headers:(0,o$.getTransformedHeaders)(Ne),body:Ie});c=!0,o({response:Wd}),s&&(g.close(),this.deleteSessionFromCache(w,g))}),i&&Ie.setTimeout(i,()=>{Ie.close();let Ne=new Error(`Stream timed out because of no activity for ${i} ms`);Ne.name="TimeoutError",S(Ne)}),r&&(r.onabort=()=>{Ie.close();let Ne=new Error("Request aborted");Ne.name="AbortError",S(Ne)}),Ie.on("frameError",(Ne,Wd,PE)=>{S(new Error(`Frame type id ${Ne} in stream id ${PE} has failed with code ${Wd}.`))}),Ie.on("error",S),Ie.on("aborted",()=>{S(new Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${Ie.rstCode}.`))}),Ie.on("close",()=>{g.unref(),s&&g.destroy(),c||S(new Error("Unexpected error: http2 request did not get a response"))}),(0,a$.writeRequestBody)(Ie,e)})}getSession(e,r){var i;let s=this.sessionCache,o=s.get(e)||[];if(o.length>0&&!r)return o[0];let a=(0,dw.connect)(e);a.unref();let c=n(()=>{this.destroySession(a),this.deleteSessionFromCache(e,a)},"destroySessionCb");return a.on("goaway",c),a.on("error",c),a.on("frameError",c),a.on("close",()=>this.deleteSessionFromCache(e,a)),!((i=this.config)===null||i===void 0)&&i.sessionTimeout&&a.setTimeout(this.config.sessionTimeout,c),o.push(a),s.set(e,o),a}destroySession(e){e.destroyed||e.destroy()}deleteSessionFromCache(e,r){let i=this.sessionCache.get(e)||[];i.includes(r)&&this.sessionCache.set(e,i.filter(s=>s!==r))}};n(zf,"NodeHttp2Handler");Uf.NodeHttp2Handler=zf});var zx=u(jf=>{"use strict";Object.defineProperty(jf,"__esModule",{value:!0});jf.Collector=void 0;var c$=U("stream"),Wf=class extends c$.Writable{constructor(){super(...arguments),this.bufferedBytes=[]}_write(e,r,i){this.bufferedBytes.push(e),i()}};n(Wf,"Collector");jf.Collector=Wf});var Ux=u(Vf=>{"use strict";Object.defineProperty(Vf,"__esModule",{value:!0});Vf.streamCollector=void 0;var d$=zx(),u$=n(t=>new Promise((e,r)=>{let i=new d$.Collector;t.pipe(i),t.on("error",s=>{i.end(),r(s)}),i.on("error",r),i.on("finish",function(){let s=new Uint8Array(Buffer.concat(this.bufferedBytes));e(s)})}),"streamCollector");Vf.streamCollector=u$});var Yc=u(Kc=>{"use strict";Object.defineProperty(Kc,"__esModule",{value:!0});var uw=(A(),b(x));uw.__exportStar(Fx(),Kc);uw.__exportStar(Lx(),Kc);uw.__exportStar(Ux(),Kc)});var jx=u($f=>{"use strict";Object.defineProperty($f,"__esModule",{value:!0});$f.calculateBodyLength=void 0;var Wx=U("fs"),l$=n(t=>{if(!t)return 0;if(typeof t=="string")return Buffer.from(t).length;if(typeof t.byteLength=="number")return t.byteLength;if(typeof t.size=="number")return t.size;if(typeof t.path=="string"||Buffer.isBuffer(t.path))return(0,Wx.lstatSync)(t.path).size;if(typeof t.fd=="number")return(0,Wx.fstatSync)(t.fd).size;throw new Error(`Body Length computation failed for ${t}`)},"calculateBodyLength");$f.calculateBodyLength=l$});var Qc=u(lw=>{"use strict";Object.defineProperty(lw,"__esModule",{value:!0});var p$=(A(),b(x));p$.__exportStar(jx(),lw)});var Vx=u((Qhe,f$)=>{f$.exports={name:"aws-crt",version:"1.15.9",description:"NodeJS/browser bindings to the aws-c-* libraries",homepage:"https://github.com/awslabs/aws-crt-nodejs",repository:{type:"git",url:"git+https://github.com/awslabs/aws-crt-nodejs.git"},contributors:["AWS Common Runtime Team <aws-sdk-common-runtime@amazon.com>"],license:"Apache-2.0",main:"./dist/index.js",browser:"./dist.browser/browser.js",types:"./dist/index.d.ts",scripts:{tsc:"node ./scripts/tsc.js",test:"npm run test:native","test:node":"npm run test:native","test:native":"npx jest --runInBand --verbose --config test/native/jest.config.js --forceExit","test:browser":"npx jest --runInBand --verbose --config test/browser/jest.config.js --forceExit","test:browser:ci":"npm run install:puppeteer && npm run test:browser","install:puppeteer":"npm install --save-dev jest-puppeteer puppeteer @types/puppeteer",prepare:"node ./scripts/tsc.js && node ./scripts/install.js",install:"node ./scripts/install.js"},devDependencies:{"@types/crypto-js":"^3.1.43","@types/jest":"^27.0.1","@types/node":"^10.17.54","@types/prettier":"2.6.0","@types/puppeteer":"^5.4.4","@types/uuid":"^3.4.8","@types/ws":"^7.4.7","aws-sdk":"^2.848.0","https-proxy-agent":"^5.0.1",jest:"^27.2.1","jest-puppeteer":"^5.0.4","jest-runtime":"^27.2.1",puppeteer:"^3.3.0","ts-jest":"^27.0.5",typedoc:"^0.22.18","typedoc-plugin-merge-modules":"^3.1.0",typescript:"^4.7.4",uuid:"^8.3.2",yargs:"^17.2.1","cmake-js":"^6.3.2",tar:"^6.1.11"},dependencies:{"@aws-sdk/util-utf8-browser":"^3.109.0","@httptoolkit/websocket-stream":"^6.0.0",axios:"^0.24.0","crypto-js":"^4.0.0",mqtt:"^4.3.7","cmake-js":"^6.3.2",tar:"^6.1.11"}}});var Hf=u(Rr=>{"use strict";Object.defineProperty(Rr,"__esModule",{value:!0});Rr.crt_version=Rr.package_info=Rr.is_browser=Rr.is_nodejs=void 0;function $x(){return typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node<"u"}n($x,"is_nodejs");Rr.is_nodejs=$x;function m$(){return!$x()}n(m$,"is_browser");Rr.is_browser=m$;function Hx(){try{return Vx()}catch{return{name:"aws-crt-nodejs",version:"UNKNOWN"}}}n(Hx,"package_info");Rr.package_info=Hx;function h$(){return Hx().version}n(h$,"crt_version");Rr.crt_version=h$});var Gx=u(Yo=>{"use strict";var _$=Yo&&Yo.__awaiter||function(t,e,r,i){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return n(s,"adopt"),new(r||(r=Promise))(function(o,a){function c(f){try{p(i.next(f))}catch(m){a(m)}}n(c,"fulfilled");function l(f){try{p(i.throw(f))}catch(m){a(m)}}n(l,"rejected");function p(f){f.done?o(f.value):s(f.value).then(c,l)}n(p,"step"),p((i=i.apply(t,e||[])).next())})};Object.defineProperty(Yo,"__esModule",{value:!0});Yo.using=void 0;function y$(t,e){return _$(this,void 0,void 0,function*(){try{yield e(t)}finally{t.close()}})}n(y$,"using");Yo.using=y$});var Ir=u(mi=>{"use strict";var g$=mi&&mi.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,s)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),w$=mi&&mi.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),E$=mi&&mi.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&g$(e,t,r);return w$(e,t),e};Object.defineProperty(mi,"__esModule",{value:!0});var Gf=E$(U("path")),Bx=U("os"),Qx=U("fs"),Jx=U("process"),Kx="Please upgrade to node >=10.16.0, or use the provided browser implementation.";if("napi"in Jx.versions){if(parseInt(Jx.versions.napi)<4)throw new Error("The AWS CRT native implementation requires that NAPI version 4 be present. "+Kx)}else throw new Error("The current runtime is not reporting an NAPI version. "+Kx);var v$="aws-crt-nodejs",S$=`${Bx.platform}-${Bx.arch}`,pw=Gf.resolve(__dirname,"..",".."),Yx=Gf.join(pw,"dist");(0,Qx.existsSync)(Yx)&&(pw=Yx);var N$=Gf.resolve(pw,"bin"),Xx=[Gf.join(N$,S$,v$)],fw;for(let t of Xx)if((0,Qx.existsSync)(t+".node")){fw=U(t);break}if(fw==null)throw new Error(`AWS CRT binary not present in any of the following locations:
	`+Xx.join(`
	`));mi.default=fw});var sn=u(Qo=>{"use strict";var b$=Qo&&Qo.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Qo,"__esModule",{value:!0});Qo.CrtError=void 0;var Zx=b$(Ir()),Zn=class extends Error{constructor(e){super(x$(e)),this.error=e,this.error_code=A$(e),this.error_name=T$(e)}};n(Zn,"CrtError");Qo.CrtError=Zn;function x$(t){return typeof t=="number"?Zx.default.error_code_to_string(t):t instanceof Zn?t.message:t.toString()}n(x$,"extract_message");function A$(t){if(typeof t=="number")return t;if(t instanceof Zn)return t.error_code}n(A$,"extract_code");function T$(t){if(typeof t=="number")return Zx.default.error_code_to_name(t);if(t instanceof Zn)return t.error_name}n(T$,"extract_name")});var Zo=u(Xo=>{"use strict";Object.defineProperty(Xo,"__esModule",{value:!0});Xo.NativeResourceMixin=Xo.NativeResource=void 0;var Bf=class{constructor(e){this.handle=e}native_handle(){return this.handle}};n(Bf,"NativeResource");Xo.NativeResource=Bf;function O$(t){return class extends t{constructor(...e){let r=e.shift();super(...e),this._handle=r}_super(e){this._handle=e}native_handle(){return this._handle}}}n(O$,"NativeResourceMixin");Xo.NativeResourceMixin=O$});var mw=u(tr=>{"use strict";Object.defineProperty(tr,"__esModule",{value:!0});tr.SocketDomain=tr.SocketType=tr.TlsVersion=void 0;var P$;(function(t){t[t.SSLv3=0]="SSLv3",t[t.TLSv1=1]="TLSv1",t[t.TLSv1_1=2]="TLSv1_1",t[t.TLSv1_2=3]="TLSv1_2",t[t.TLSv1_3=4]="TLSv1_3",t[t.Default=128]="Default"})(P$=tr.TlsVersion||(tr.TlsVersion={}));var R$;(function(t){t[t.STREAM=0]="STREAM",t[t.DGRAM=1]="DGRAM"})(R$=tr.SocketType||(tr.SocketType={}));var I$;(function(t){t[t.IPV4=0]="IPV4",t[t.IPV6=1]="IPV6",t[t.LOCAL=2]="LOCAL"})(I$=tr.SocketDomain||(tr.SocketDomain={}))});var on=u(D=>{"use strict";var q$=D&&D.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(D,"__esModule",{value:!0});D.Pkcs11Lib=D.TlsConnectionOptions=D.ServerTlsContext=D.ClientTlsContext=D.TlsContext=D.TlsContextOptions=D.SocketOptions=D.ClientBootstrap=D.InputStream=D.is_alpn_available=D.enable_logging=D.LogLevel=D.error_code_to_name=D.error_code_to_string=D.SocketDomain=D.SocketType=D.TlsVersion=void 0;var At=q$(Ir()),ta=Zo(),hw=mw(),_w=mw();Object.defineProperty(D,"TlsVersion",{enumerable:!0,get:function(){return _w.TlsVersion}});Object.defineProperty(D,"SocketType",{enumerable:!0,get:function(){return _w.SocketType}});Object.defineProperty(D,"SocketDomain",{enumerable:!0,get:function(){return _w.SocketDomain}});function C$(t){return At.default.error_code_to_string(t)}n(C$,"error_code_to_string");D.error_code_to_string=C$;function k$(t){return At.default.error_code_to_name(t)}n(k$,"error_code_to_name");D.error_code_to_name=k$;var M$;(function(t){t[t.NONE=0]="NONE",t[t.FATAL=1]="FATAL",t[t.ERROR=2]="ERROR",t[t.WARN=3]="WARN",t[t.INFO=4]="INFO",t[t.DEBUG=5]="DEBUG",t[t.TRACE=6]="TRACE"})(M$=D.LogLevel||(D.LogLevel={}));function D$(t){At.default.io_logging_enable(t)}n(D$,"enable_logging");D.enable_logging=D$;function F$(){return At.default.is_alpn_available()}n(F$,"is_alpn_available");D.is_alpn_available=F$;var Jf=class extends ta.NativeResource{constructor(e){super(At.default.io_input_stream_new(16*1024)),this.source=e,this.source.on("data",r=>{r=Buffer.isBuffer(r)?r:new Buffer(r.toString(),"utf8"),At.default.io_input_stream_append(this.native_handle(),r)}),this.source.on("end",()=>{At.default.io_input_stream_append(this.native_handle(),void 0)})}};n(Jf,"InputStream");D.InputStream=Jf;var Kf=class extends ta.NativeResource{constructor(){super(At.default.io_client_bootstrap_new())}};n(Kf,"ClientBootstrap");D.ClientBootstrap=Kf;var Yf=class extends ta.NativeResource{constructor(e=hw.SocketType.STREAM,r=hw.SocketDomain.IPV6,i=5e3,s=!1,o=0,a=0,c=0){super(At.default.io_socket_options_new(e,r,i,o,a,c,s))}};n(Yf,"SocketOptions");D.SocketOptions=Yf;var mt=class{constructor(){this.min_tls_version=hw.TlsVersion.Default,this.alpn_list=[],this.verify_peer=!0}override_default_trust_store_from_path(e,r){this.ca_dirpath=e,this.ca_filepath=r}override_default_trust_store(e){this.certificate_authority=e}static create_client_with_mtls(e,r){let i=new mt;return i.certificate=e,i.private_key=r,i.verify_peer=!0,i}static create_client_with_mtls_from_path(e,r){let i=new mt;return i.certificate_filepath=e,i.private_key_filepath=r,i.verify_peer=!0,i}static create_client_with_mtls_pkcs12_from_path(e,r){let i=new mt;return i.pkcs12_filepath=e,i.pkcs12_password=r,i.verify_peer=!0,i}static create_client_with_mtls_pkcs_from_path(e,r){return this.create_client_with_mtls_pkcs12_from_path(e,r)}static create_client_with_mtls_pkcs11(e){let r=new mt;return r.pkcs11_options=e,r.verify_peer=!0,r}static create_client_with_mtls_windows_cert_store_path(e){let r=new mt;return r.windows_cert_store_path=e,r.verify_peer=!0,r}static create_server_with_mtls_from_path(e,r){let i=new mt;return i.certificate_filepath=e,i.private_key_filepath=r,i.verify_peer=!1,i}static create_server_with_mtls_pkcs_from_path(e,r){let i=new mt;return i.pkcs12_filepath=e,i.pkcs12_password=r,i.verify_peer=!1,i}};n(mt,"TlsContextOptions");D.TlsContextOptions=mt;var ea=class extends ta.NativeResource{constructor(e){super(At.default.io_tls_ctx_new(e.min_tls_version,e.ca_filepath,e.ca_dirpath,e.certificate_authority,e.alpn_list&&e.alpn_list.length>0?e.alpn_list.join(";"):void 0,e.certificate_filepath,e.certificate,e.private_key_filepath,e.private_key,e.pkcs12_filepath,e.pkcs12_password,e.pkcs11_options,e.windows_cert_store_path,e.verify_peer))}};n(ea,"TlsContext");D.TlsContext=ea;var Qf=class extends ea{constructor(e){e||(e=new mt,e.verify_peer=!0),super(e)}};n(Qf,"ClientTlsContext");D.ClientTlsContext=Qf;var Xf=class extends ea{constructor(e){e||(e=new mt,e.verify_peer=!1),super(e)}};n(Xf,"ServerTlsContext");D.ServerTlsContext=Xf;var Zf=class extends ta.NativeResource{constructor(e,r,i=[]){super(At.default.io_tls_connection_options_new(e.native_handle(),r,i&&i.length>0?i.join(";"):void 0)),this.tls_ctx=e,this.server_name=r,this.alpn_list=i}};n(Zf,"TlsConnectionOptions");D.TlsConnectionOptions=Zf;var es=class extends ta.NativeResource{constructor(e,r=es.InitializeFinalizeBehavior.DEFAULT){super(At.default.io_pkcs11_lib_new(e,r))}close(){At.default.io_pkcs11_lib_close(this.native_handle())}};n(es,"Pkcs11Lib");D.Pkcs11Lib=es;(function(t){let e;(function(r){r[r.DEFAULT=0]="DEFAULT",r[r.OMIT=1]="OMIT",r[r.STRICT=2]="STRICT"})(e=t.InitializeFinalizeBehavior||(t.InitializeFinalizeBehavior={}))})(es=D.Pkcs11Lib||(D.Pkcs11Lib={}))});var tm=u(pe=>{"use strict";var L$=pe&&pe.__awaiter||function(t,e,r,i){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return n(s,"adopt"),new(r||(r=Promise))(function(o,a){function c(f){try{p(i.next(f))}catch(m){a(m)}}n(c,"fulfilled");function l(f){try{p(i.throw(f))}catch(m){a(m)}}n(l,"rejected");function p(f){f.done?o(f.value):s(f.value).then(c,l)}n(p,"step"),p((i=i.apply(t,e||[])).next())})},z$=pe&&pe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(pe,"__esModule",{value:!0});pe.aws_verify_sigv4a_signing=pe.aws_sign_request=pe.AwsSignedBodyHeaderType=pe.AwsSignedBodyValue=pe.AwsSignatureType=pe.AwsSigningAlgorithm=pe.AwsCredentialsProvider=void 0;var yw=z$(Ir()),U$=sn(),W$=on(),em=class extends yw.default.AwsCredentialsProvider{static newDefault(e=void 0){return super.newDefault(e!=null?e.native_handle():null)}static newStatic(e,r,i){return super.newStatic(e,r,i)}static newCognito(e){return super.newCognito(e,e.tlsContext!=null?e.tlsContext.native_handle():new W$.ClientTlsContext().native_handle(),e.bootstrap!=null?e.bootstrap.native_handle():null,e.httpProxyOptions?e.httpProxyOptions.create_native_handle():null)}};n(em,"AwsCredentialsProvider");pe.AwsCredentialsProvider=em;var j$;(function(t){t[t.SigV4=0]="SigV4",t[t.SigV4Asymmetric=1]="SigV4Asymmetric"})(j$=pe.AwsSigningAlgorithm||(pe.AwsSigningAlgorithm={}));var V$;(function(t){t[t.HttpRequestViaHeaders=0]="HttpRequestViaHeaders",t[t.HttpRequestViaQueryParams=1]="HttpRequestViaQueryParams",t[t.HttpRequestChunk=2]="HttpRequestChunk",t[t.HttpRequestEvent=3]="HttpRequestEvent"})(V$=pe.AwsSignatureType||(pe.AwsSignatureType={}));var $$;(function(t){t.EmptySha256="e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",t.UnsignedPayload="UNSIGNED-PAYLOAD",t.StreamingAws4HmacSha256Payload="STREAMING-AWS4-HMAC-SHA256-PAYLOAD",t.StreamingAws4HmacSha256Events="STREAMING-AWS4-HMAC-SHA256-EVENTS"})($$=pe.AwsSignedBodyValue||(pe.AwsSignedBodyValue={}));var H$;(function(t){t[t.None=0]="None",t[t.XAmzContentSha256=1]="XAmzContentSha256"})(H$=pe.AwsSignedBodyHeaderType||(pe.AwsSignedBodyHeaderType={}));function G$(t,e){return L$(this,void 0,void 0,function*(){return new Promise((r,i)=>{try{yw.default.aws_sign_request(t,e,s=>{s==0?r(t):i(new U$.CrtError(s))})}catch(s){i(s)}})})}n(G$,"aws_sign_request");pe.aws_sign_request=G$;function B$(t,e,r,i,s,o){return yw.default.aws_verify_sigv4a_signing(t,e,r,i,s,o)}n(B$,"aws_verify_sigv4a_signing");pe.aws_verify_sigv4a_signing=B$});var tA=u(an=>{"use strict";var J$=an&&an.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(an,"__esModule",{value:!0});an.crc32c=an.crc32=void 0;var eA=J$(Ir());function K$(t,e){return eA.default.checksums_crc32(t,e)}n(K$,"crc32");an.crc32=K$;function Y$(t,e){return eA.default.checksums_crc32c(t,e)}n(Y$,"crc32c");an.crc32c=Y$});var iA=u(cn=>{"use strict";var Q$=cn&&cn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(cn,"__esModule",{value:!0});cn.native_memory_dump=cn.native_memory=void 0;var rA=Q$(Ir());function X$(){return rA.default.native_memory()}n(X$,"native_memory");cn.native_memory=X$;function Z$(){return rA.default.native_memory_dump()}n(Z$,"native_memory_dump");cn.native_memory_dump=Z$});var sA=u(Pe=>{"use strict";var eH=Pe&&Pe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.hmac_sha256=Pe.Sha256Hmac=Pe.hash_sha1=Pe.Sha1Hash=Pe.hash_sha256=Pe.Sha256Hash=Pe.hash_md5=Pe.Md5Hash=void 0;var Dt=eH(Ir()),nA=Zo(),ra=class extends nA.NativeResource{update(e){Dt.default.hash_update(this.native_handle(),e)}finalize(e){return Dt.default.hash_digest(this.native_handle(),e)}constructor(e){super(e)}};n(ra,"Hash");var rm=class extends ra{constructor(){super(Dt.default.hash_md5_new())}};n(rm,"Md5Hash");Pe.Md5Hash=rm;function tH(t,e){return Dt.default.hash_md5_compute(t,e)}n(tH,"hash_md5");Pe.hash_md5=tH;var im=class extends ra{constructor(){super(Dt.default.hash_sha256_new())}};n(im,"Sha256Hash");Pe.Sha256Hash=im;function rH(t,e){return Dt.default.hash_sha256_compute(t,e)}n(rH,"hash_sha256");Pe.hash_sha256=rH;var nm=class extends ra{constructor(){super(Dt.default.hash_sha1_new())}};n(nm,"Sha1Hash");Pe.Sha1Hash=nm;function iH(t,e){return Dt.default.hash_sha1_compute(t,e)}n(iH,"hash_sha1");Pe.hash_sha1=iH;var sm=class extends nA.NativeResource{update(e){Dt.default.hmac_update(this.native_handle(),e)}finalize(e){return Dt.default.hmac_digest(this.native_handle(),e)}constructor(e){super(e)}};n(sm,"Hmac");var om=class extends sm{constructor(e){super(Dt.default.hmac_sha256_new(e))}};n(om,"Sha256Hmac");Pe.Sha256Hmac=om;function nH(t,e,r){return Dt.default.hmac_sha256_compute(t,e,r)}n(nH,"hmac_sha256");Pe.hmac_sha256=nH});var gw=u(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.CommonHttpProxyOptions=qr.HttpProxyAuthenticationType=qr.HttpVersion=void 0;var sH;(function(t){t[t.Unknown=0]="Unknown",t[t.Http1_0=1]="Http1_0",t[t.Http1_1=2]="Http1_1",t[t.Http2=3]="Http2"})(sH=qr.HttpVersion||(qr.HttpVersion={}));var oA;(function(t){t[t.None=0]="None",t[t.Basic=1]="Basic"})(oA=qr.HttpProxyAuthenticationType||(qr.HttpProxyAuthenticationType={}));var am=class{constructor(e,r,i=oA.None,s,o){this.host_name=e,this.port=r,this.auth_method=i,this.auth_username=s,this.auth_password=o}};n(am,"CommonHttpProxyOptions");qr.CommonHttpProxyOptions=am});var lm=u(um=>{"use strict";Object.defineProperty(um,"__esModule",{value:!0});um.BufferedEventEmitter=void 0;var oH=U("events"),cm=class{constructor(e,r){this.event=e,this.args=r}};n(cm,"BufferedEvent");var dm=class extends oH.EventEmitter{constructor(){super(),this.corked=!1}cork(){this.corked=!0}uncork(){for(this.corked=!1;this.eventQueue;){let e=this.eventQueue;super.emit(e.event,...e.args),this.eventQueue=this.eventQueue.next}}emit(e,...r){if(this.corked){let i=this.lastQueuedEvent;return this.lastQueuedEvent=new cm(e,r),i?i.next=this.lastQueuedEvent:this.eventQueue=this.lastQueuedEvent,this.listeners(e).length>0}return super.emit(e,...r)}};n(dm,"BufferedEventEmitter");um.BufferedEventEmitter=dm});var _m=u(oe=>{"use strict";var aH=oe&&oe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(oe,"__esModule",{value:!0});oe.HttpClientConnectionManager=oe.HttpClientStream=oe.HttpStream=oe.HttpClientConnection=oe.HttpProxyOptions=oe.HttpProxyConnectionType=oe.HttpConnection=oe.HttpRequest=oe.HttpHeaders=oe.HttpProxyAuthenticationType=void 0;var Ft=aH(Ir()),ww=Zo(),hm=sn(),aA=gw(),cH=gw();Object.defineProperty(oe,"HttpProxyAuthenticationType",{enumerable:!0,get:function(){return cH.HttpProxyAuthenticationType}});var cA=lm();oe.HttpHeaders=Ft.default.HttpHeaders;var dH=Ft.default.HttpRequest,pm=class extends dH{constructor(e,r,i,s){super(e,r,i,s?.native_handle())}};n(pm,"HttpRequest");oe.HttpRequest=pm;var dn=class extends(0,ww.NativeResourceMixin)(cA.BufferedEventEmitter){constructor(e){super(),this._super(e)}close(){Ft.default.http_connection_close(this.native_handle())}on(e,r){return super.on(e,r),e=="connect"&&process.nextTick(()=>{this.uncork()}),this}};n(dn,"HttpConnection");oe.HttpConnection=dn;dn.CONNECT="connect";dn.ERROR="error";dn.CLOSE="close";var dA;(function(t){t[t.Legacy=0]="Legacy",t[t.Forwarding=1]="Forwarding",t[t.Tunneling=2]="Tunneling"})(dA=oe.HttpProxyConnectionType||(oe.HttpProxyConnectionType={}));var fm=class extends aA.CommonHttpProxyOptions{constructor(e,r,i=aA.HttpProxyAuthenticationType.None,s,o,a,c){super(e,r,i,s,o),this.tls_opts=a,this.connection_type=c}create_native_handle(){return Ft.default.http_proxy_options_new(this.host_name,this.port,this.auth_method,this.auth_username,this.auth_password,this.tls_opts?this.tls_opts.native_handle():void 0,this.connection_type?this.connection_type:dA.Legacy)}};n(fm,"HttpProxyOptions");oe.HttpProxyOptions=fm;var Xc=class extends dn{constructor(e,r,i,s,o,a,c){super(c||Ft.default.http_connection_new(e!=null?e.native_handle():null,(l,p)=>{this._on_setup(l,p)},(l,p)=>{this._on_shutdown(l,p)},r,i,s.native_handle(),o?o.native_handle():void 0,a?a.create_native_handle():void 0)),this.bootstrap=e,this.socket_options=s,this.tls_opts=o}_on_setup(e,r){if(r){this.emit("error",new hm.CrtError(r));return}this.emit("connect")}_on_shutdown(e,r){if(r){this.emit("error",new hm.CrtError(r));return}this.emit("close")}request(e){let r,i=n((c,l)=>{r._on_response(c,l)},"on_response_impl"),s=n(c=>{r._on_body(c)},"on_body_impl"),o=n(c=>{r._on_complete(c)},"on_complete_impl"),a=Ft.default.http_stream_new(this.native_handle(),e,o,i,s);return r=new Cr(a,this,e)}};n(Xc,"HttpClientConnection");oe.HttpClientConnection=Xc;var Zc=class extends(0,ww.NativeResourceMixin)(cA.BufferedEventEmitter){constructor(e,r){super(),this.connection=r,this._super(e),this.cork()}activate(){Ft.default.http_stream_activate(this.native_handle())}close(){Ft.default.http_stream_close(this.native_handle())}_on_body(e){this.emit("data",e)}_on_complete(e){if(e){this.emit("error",new hm.CrtError(e)),this.close();return}this.on("end",()=>{this.close()}),this.emit("end")}};n(Zc,"HttpStream");oe.HttpStream=Zc;var Cr=class extends Zc{constructor(e,r,i){super(e,r),this.request=i}status_code(){return this.response_status_code}on(e,r){return super.on(e,r),e=="response"&&process.nextTick(()=>{this.uncork()}),this}_on_response(e,r){this.response_status_code=e;let i=new oe.HttpHeaders(r);this.emit("response",e,i)}};n(Cr,"HttpClientStream");oe.HttpClientStream=Cr;Cr.RESPONSE="response";Cr.DATA="data";Cr.ERROR="error";Cr.END="end";Cr.HEADERS="headers";var mm=class extends ww.NativeResource{constructor(e,r,i,s,o,a,c,l){super(Ft.default.http_connection_manager_new(e!=null?e.native_handle():null,r,i,s,o,a.native_handle(),c?c.native_handle():void 0,l?l.create_native_handle():void 0,void 0)),this.bootstrap=e,this.host=r,this.port=i,this.max_connections=s,this.initial_window_size=o,this.socket_options=a,this.tls_opts=c,this.proxy_options=l,this.connections=new Map}acquire(){return new Promise((e,r)=>{let i=n((s,o)=>{if(o){r(new hm.CrtError(o));return}let a=this.connections.get(s);a||(a=new Xc(this.bootstrap,this.host,this.port,this.socket_options,this.tls_opts,this.proxy_options,s),this.connections.set(s,a),a.on("close",()=>{this.connections.delete(s)})),e(a)},"on_acquired");Ft.default.http_connection_manager_acquire(this.native_handle(),i)})}release(e){Ft.default.http_connection_manager_release(this.native_handle(),e.native_handle())}close(){Ft.default.http_connection_manager_close(this.native_handle())}};n(mm,"HttpClientConnectionManager");oe.HttpClientConnectionManager=mm});var gm=u(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});rr.DEFAULT_RECONNECT_MIN_SEC=rr.DEFAULT_RECONNECT_MAX_SEC=rr.MqttWill=rr.QoS=void 0;var uH;(function(t){t[t.AtMostOnce=0]="AtMostOnce",t[t.AtLeastOnce=1]="AtLeastOnce",t[t.ExactlyOnce=2]="ExactlyOnce"})(uH=rr.QoS||(rr.QoS={}));var ym=class{constructor(e,r,i,s=!1){this.topic=e,this.qos=r,this.payload=i,this.retain=s}};n(ym,"MqttWill");rr.MqttWill=ym;rr.DEFAULT_RECONNECT_MAX_SEC=128;rr.DEFAULT_RECONNECT_MIN_SEC=1});var Sw=u(De=>{"use strict";var lH=De&&De.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,s)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),pH=De&&De.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),fH=De&&De.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&lH(e,t,r);return pH(e,t),e};Object.defineProperty(De,"__esModule",{value:!0});De.extractRegionFromEndpoint=De.buildMqtt5FinalUsername=De.populate_username_string_with_custom_authorizer=De.is_string_and_not_empty=De.add_to_username_parameter=void 0;var mH=fH(Hf());function vw(t,e,r){let i=t;return i.indexOf("?")!=-1?i+="&":i+="?",e.indexOf(r)!=-1?i+e:i+r+e}n(vw,"add_to_username_parameter");De.add_to_username_parameter=vw;function ed(t){return t!=null&&typeof t=="string"&&t!=""}n(ed,"is_string_and_not_empty");De.is_string_and_not_empty=ed;function hH(t,e,r,i,s){let o="";return t&&(o+=t),ed(e)==!1?ed(s)&&s&&(o+=s):o+=e,ed(r)&&r&&(o=vw(o,r,"x-amz-customauthorizer-name=")),ed(i)&&i&&(o=vw(o,i,"x-amz-customauthorizer-signature=")),o}n(hH,"populate_username_string_with_custom_authorizer");De.populate_username_string_with_custom_authorizer=hH;function Ew(t,e,r){e&&r.push([t,e])}n(Ew,"addParam");function _H(t){let e="",r=[];if(t){let i=!1;if((t.tokenValue||t.tokenKeyName||t.tokenSignature)&&(i=!0,!t.tokenValue||!t.tokenKeyName||!t.tokenSignature))throw new Error("Token-based custom authentication requires all token-related properties to be set");let s=t.username,o=(s??"").split("?"),a=o.slice(1);if(e=o[0],a.length>1)throw new Error("Custom auth username property value is invalid");a.length==1&&a[0].split("&").forEach((c,l,p)=>{var f;let m=c.split("=");r.push([m[0],(f=m[1])!==null&&f!==void 0?f:""])}),Ew("x-amz-customauthorizer-name",t.authorizerName,r),i&&(Ew(t.tokenKeyName,t.tokenValue,r),Ew("x-amz-customauthorizer-signature",t.tokenSignature,r))}return r.push(["SDK","NodeJSv2"]),r.push(["Version",mH.crt_version()]),(e??"")+"?"+r.map(i=>`${i[0]}=${i[1]}`).join("&")}n(_H,"buildMqtt5FinalUsername");De.buildMqtt5FinalUsername=_H;function yH(t){let e=/^[\w\-]+\.[\w\-]+\.([\w+\-]+)\./,r=t.match(e);if(r)return r[1];throw new Error("AWS region could not be extracted from endpoint.  Use 'region' property on WebsocketConfig to set manually.")}n(yH,"extractRegionFromEndpoint");De.extractRegionFromEndpoint=yH});var lA=u(zt=>{"use strict";var gH=zt&&zt.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,s)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),wH=zt&&zt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),bw=zt&&zt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&gH(e,t,r);return wH(e,t),e},EH=zt&&zt.__awaiter||function(t,e,r,i){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return n(s,"adopt"),new(r||(r=Promise))(function(o,a){function c(f){try{p(i.next(f))}catch(m){a(m)}}n(c,"fulfilled");function l(f){try{p(i.throw(f))}catch(m){a(m)}}n(l,"rejected");function p(f){f.done?o(f.value):s(f.value).then(c,l)}n(p,"step"),p((i=i.apply(t,e||[])).next())})};Object.defineProperty(zt,"__esModule",{value:!0});zt.AwsIotMqttConnectionConfigBuilder=void 0;var uA=gm(),ts=bw(on()),td=on(),vH=bw(Hf()),SH=sn(),rd=tm(),Nw=bw(Sw()),Lt=class{constructor(e){this.tls_ctx_options=e,this.params={client_id:"",host_name:"",socket_options:new ts.SocketOptions,port:8883,use_websocket:!1,clean_session:!1,keep_alive:void 0,will:void 0,username:"",password:void 0,tls_ctx:void 0,reconnect_min_sec:uA.DEFAULT_RECONNECT_MIN_SEC,reconnect_max_sec:uA.DEFAULT_RECONNECT_MAX_SEC},this.is_using_custom_authorizer=!1}static new_mtls_builder_from_path(e,r){let i=new Lt(td.TlsContextOptions.create_client_with_mtls_from_path(e,r));return i.params.port=8883,ts.is_alpn_available()&&i.tls_ctx_options.alpn_list.unshift("x-amzn-mqtt-ca"),i}static new_mtls_builder(e,r){let i=new Lt(td.TlsContextOptions.create_client_with_mtls(e,r));return i.params.port=8883,ts.is_alpn_available()&&i.tls_ctx_options.alpn_list.unshift("x-amzn-mqtt-ca"),i}static new_mtls_pkcs11_builder(e){let r=new Lt(td.TlsContextOptions.create_client_with_mtls_pkcs11(e));return r.params.port=8883,ts.is_alpn_available()&&r.tls_ctx_options.alpn_list.unshift("x-amzn-mqtt-ca"),r}static new_mtls_windows_cert_store_path_builder(e){let r=new Lt(td.TlsContextOptions.create_client_with_mtls_windows_cert_store_path(e));return r.params.port=8883,ts.is_alpn_available()&&r.tls_ctx_options.alpn_list.unshift("x-amzn-mqtt-ca"),r}static new_default_builder(){let e=new ts.TlsContextOptions;return new Lt(e)}static new_websocket_builder(...e){return this.new_with_websockets(...e)}static configure_websocket_handshake(e,r){return r&&(e.params.websocket_handshake_transform=(i,s)=>EH(this,void 0,void 0,function*(){var o,a,c;let l=(a=(o=r.create_signing_config)===null||o===void 0?void 0:o.call(r))!==null&&a!==void 0?a:{algorithm:rd.AwsSigningAlgorithm.SigV4,signature_type:rd.AwsSignatureType.HttpRequestViaQueryParams,provider:r.credentials_provider,region:r.region,service:(c=r.service)!==null&&c!==void 0?c:"iotdevicegateway",signed_body_value:rd.AwsSignedBodyValue.EmptySha256,omit_session_token:!0};try{yield(0,rd.aws_sign_request)(i,l),s()}catch(p){p instanceof SH.CrtError?s(p.error_code):s(3)}})),e}static new_with_websockets(e){let r=e?.tls_ctx_options;r||(r=new td.TlsContextOptions,r.alpn_list=[]);let i=new Lt(r);return i.params.use_websocket=!0,i.params.proxy_options=e?.proxy_options,i.tls_ctx_options&&(i.params.port=443),this.configure_websocket_handshake(i,e),i}with_certificate_authority_from_path(e,r){return this.tls_ctx_options.override_default_trust_store_from_path(e,r),this}with_certificate_authority(e){return this.tls_ctx_options.override_default_trust_store(e),this}with_endpoint(e){return this.params.host_name=e,this}with_port(e){return this.params.port=e,this}with_client_id(e){return this.params.client_id=e,this}with_clean_session(e){return this.params.clean_session=e,this}with_keep_alive_seconds(e){return this.params.keep_alive=e,this}with_timeout_ms(e){return this.with_ping_timeout_ms(e),this}with_ping_timeout_ms(e){return this.params.ping_timeout=e,this}with_protocol_operation_timeout_ms(e){return this.params.protocol_operation_timeout=e,this}with_will(e){return this.params.will=e,this}with_socket_options(e){return this.params.socket_options=e,this}with_credentials(e,r,i,s){return Lt.configure_websocket_handshake(this,{credentials_provider:rd.AwsCredentialsProvider.newStatic(r,i,s),region:e,service:"iotdevicegateway"})}with_http_proxy_options(e){return this.params.proxy_options=e,this}with_custom_authorizer(e,r,i,s){this.is_using_custom_authorizer=!0;let o=Nw.populate_username_string_with_custom_authorizer("",e,r,i,this.params.username);return this.params.username=o,this.params.password=s,this.params.use_websocket||(this.tls_ctx_options.alpn_list=["mqtt"]),this.params.port=443,this}with_username(e){return this.params.username=e,this}with_password(e){return this.params.password=e,this}with_reconnect_max_sec(e){return this.params.reconnect_max_sec=e,this}with_reconnect_min_sec(e){return this.params.reconnect_min_sec=e,this}build(){var e,r,i;if(this.params.client_id===void 0||this.params.host_name===void 0)throw"client_id and endpoint are required";return this.is_using_custom_authorizer==!1&&Nw.is_string_and_not_empty(this.params.username)&&(((e=this.params.username)===null||e===void 0?void 0:e.indexOf("x-amz-customauthorizer-name="))!=-1||((r=this.params.username)===null||r===void 0?void 0:r.indexOf("x-amz-customauthorizer-signature="))!=-1)&&(this.is_using_custom_authorizer=!0),this.is_using_custom_authorizer==!0&&this.params.port!=443&&console.log("Warning: Attempting to connect to authorizer with unsupported port. Port is not 443..."),this.params.tls_ctx===void 0&&(this.params.tls_ctx=new ts.ClientTlsContext(this.tls_ctx_options)),Nw.is_string_and_not_empty(this.params.username)==!1?this.params.username="?SDK=NodeJSv2&Version=":((i=this.params.username)===null||i===void 0?void 0:i.indexOf("?"))!=-1?this.params.username+="&SDK=NodeJSv2&Version=":this.params.username+="?SDK=NodeJSv2&Version=",this.params.username+=vH.crt_version(),this.params}};n(Lt,"AwsIotMqttConnectionConfigBuilder");zt.AwsIotMqttConnectionConfigBuilder=Lt});var wm=u(ia=>{"use strict";Object.defineProperty(ia,"__esModule",{value:!0});ia.DEFAULT_KEEP_ALIVE=ia.normalize_payload=void 0;function NH(t){if(t instanceof Buffer||typeof t=="string")return t;if(ArrayBuffer.isView(t)){let e=t;return Buffer.from(e.buffer,e.byteOffset,e.byteLength)}if(t instanceof ArrayBuffer)return Buffer.from(t);if(typeof t=="object")return JSON.stringify(t);if(!t)return"";throw new TypeError("payload parameter must be a string, object, or DataView.")}n(NH,"normalize_payload");ia.normalize_payload=NH;ia.DEFAULT_KEEP_ALIVE=1200});var pA=u(un=>{"use strict";Object.defineProperty(un,"__esModule",{value:!0});un.RetryJitterType=un.ClientSessionBehavior=void 0;var bH;(function(t){t[t.Default=0]="Default",t[t.Clean=1]="Clean",t[t.RejoinPostSuccess=2]="RejoinPostSuccess",t[t.RejoinAlways=3]="RejoinAlways"})(bH=un.ClientSessionBehavior||(un.ClientSessionBehavior={}));var xH;(function(t){t[t.Default=0]="Default",t[t.None=1]="None",t[t.Full=2]="Full",t[t.Decorrelated=3]="Decorrelated"})(xH=un.RetryJitterType||(un.RetryJitterType={}))});var fA=u(L=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});L.PacketType=L.RetainHandlingType=L.QoS=L.PayloadFormatIndicator=L.isSuccessfulPubackReasonCode=L.PubackReasonCode=L.isSuccessfulUnsubackReasonCode=L.UnsubackReasonCode=L.isSuccessfulSubackReasonCode=L.SubackReasonCode=L.isSuccessfulDisconnectReasonCode=L.DisconnectReasonCode=L.isSuccessfulConnectReasonCode=L.ConnectReasonCode=void 0;var AH;(function(t){t[t.Success=0]="Success",t[t.UnspecifiedError=128]="UnspecifiedError",t[t.MalformedPacket=129]="MalformedPacket",t[t.ProtocolError=130]="ProtocolError",t[t.ImplementationSpecificError=131]="ImplementationSpecificError",t[t.UnsupportedProtocolVersion=132]="UnsupportedProtocolVersion",t[t.ClientIdentifierNotValid=133]="ClientIdentifierNotValid",t[t.BadUsernameOrPassword=134]="BadUsernameOrPassword",t[t.NotAuthorized=135]="NotAuthorized",t[t.ServerUnavailable=136]="ServerUnavailable",t[t.ServerBusy=137]="ServerBusy",t[t.Banned=138]="Banned",t[t.BadAuthenticationMethod=140]="BadAuthenticationMethod",t[t.TopicNameInvalid=144]="TopicNameInvalid",t[t.PacketTooLarge=149]="PacketTooLarge",t[t.QuotaExceeded=151]="QuotaExceeded",t[t.PayloadFormatInvalid=153]="PayloadFormatInvalid",t[t.RetainNotSupported=154]="RetainNotSupported",t[t.QosNotSupported=155]="QosNotSupported",t[t.UseAnotherServer=156]="UseAnotherServer",t[t.ServerMoved=157]="ServerMoved",t[t.ConnectionRateExceeded=159]="ConnectionRateExceeded"})(AH=L.ConnectReasonCode||(L.ConnectReasonCode={}));function TH(t){return t<128}n(TH,"isSuccessfulConnectReasonCode");L.isSuccessfulConnectReasonCode=TH;var OH;(function(t){t[t.NormalDisconnection=0]="NormalDisconnection",t[t.DisconnectWithWillMessage=4]="DisconnectWithWillMessage",t[t.UnspecifiedError=128]="UnspecifiedError",t[t.MalformedPacket=129]="MalformedPacket",t[t.ProtocolError=130]="ProtocolError",t[t.ImplementationSpecificError=131]="ImplementationSpecificError",t[t.NotAuthorized=135]="NotAuthorized",t[t.ServerBusy=137]="ServerBusy",t[t.ServerShuttingDown=139]="ServerShuttingDown",t[t.KeepAliveTimeout=141]="KeepAliveTimeout",t[t.SessionTakenOver=142]="SessionTakenOver",t[t.TopicFilterInvalid=143]="TopicFilterInvalid",t[t.TopicNameInvalid=144]="TopicNameInvalid",t[t.ReceiveMaximumExceeded=147]="ReceiveMaximumExceeded",t[t.TopicAliasInvalid=148]="TopicAliasInvalid",t[t.PacketTooLarge=149]="PacketTooLarge",t[t.MessageRateTooHigh=150]="MessageRateTooHigh",t[t.QuotaExceeded=151]="QuotaExceeded",t[t.AdministrativeAction=152]="AdministrativeAction",t[t.PayloadFormatInvalid=153]="PayloadFormatInvalid",t[t.RetainNotSupported=154]="RetainNotSupported",t[t.QosNotSupported=155]="QosNotSupported",t[t.UseAnotherServer=156]="UseAnotherServer",t[t.ServerMoved=157]="ServerMoved",t[t.SharedSubscriptionsNotSupported=158]="SharedSubscriptionsNotSupported",t[t.ConnectionRateExceeded=159]="ConnectionRateExceeded",t[t.MaximumConnectTime=160]="MaximumConnectTime",t[t.SubscriptionIdentifiersNotSupported=161]="SubscriptionIdentifiersNotSupported",t[t.WildcardSubscriptionsNotSupported=162]="WildcardSubscriptionsNotSupported"})(OH=L.DisconnectReasonCode||(L.DisconnectReasonCode={}));function PH(t){return t<128}n(PH,"isSuccessfulDisconnectReasonCode");L.isSuccessfulDisconnectReasonCode=PH;var RH;(function(t){t[t.GrantedQoS0=0]="GrantedQoS0",t[t.GrantedQoS1=1]="GrantedQoS1",t[t.GrantedQoS2=2]="GrantedQoS2",t[t.UnspecifiedError=128]="UnspecifiedError",t[t.ImplementationSpecificError=131]="ImplementationSpecificError",t[t.NotAuthorized=135]="NotAuthorized",t[t.TopicFilterInvalid=143]="TopicFilterInvalid",t[t.PacketIdentifierInUse=145]="PacketIdentifierInUse",t[t.QuotaExceeded=151]="QuotaExceeded",t[t.SharedSubscriptionsNotSupported=158]="SharedSubscriptionsNotSupported",t[t.SubscriptionIdentifiersNotSupported=161]="SubscriptionIdentifiersNotSupported",t[t.WildcardSubscriptionsNotSupported=162]="WildcardSubscriptionsNotSupported"})(RH=L.SubackReasonCode||(L.SubackReasonCode={}));function IH(t){return t<128}n(IH,"isSuccessfulSubackReasonCode");L.isSuccessfulSubackReasonCode=IH;var qH;(function(t){t[t.Success=0]="Success",t[t.NoSubscriptionExisted=17]="NoSubscriptionExisted",t[t.UnspecifiedError=128]="UnspecifiedError",t[t.ImplementationSpecificError=131]="ImplementationSpecificError",t[t.NotAuthorized=135]="NotAuthorized",t[t.TopicFilterInvalid=143]="TopicFilterInvalid",t[t.PacketIdentifierInUse=145]="PacketIdentifierInUse"})(qH=L.UnsubackReasonCode||(L.UnsubackReasonCode={}));function CH(t){return t<128}n(CH,"isSuccessfulUnsubackReasonCode");L.isSuccessfulUnsubackReasonCode=CH;var kH;(function(t){t[t.Success=0]="Success",t[t.NoMatchingSubscribers=16]="NoMatchingSubscribers",t[t.UnspecifiedError=128]="UnspecifiedError",t[t.ImplementationSpecificError=131]="ImplementationSpecificError",t[t.NotAuthorized=135]="NotAuthorized",t[t.TopicNameInvalid=144]="TopicNameInvalid",t[t.PacketIdentifierInUse=145]="PacketIdentifierInUse",t[t.QuotaExceeded=151]="QuotaExceeded",t[t.PayloadFormatInvalid=153]="PayloadFormatInvalid"})(kH=L.PubackReasonCode||(L.PubackReasonCode={}));function MH(t){return t<128}n(MH,"isSuccessfulPubackReasonCode");L.isSuccessfulPubackReasonCode=MH;var DH;(function(t){t[t.Bytes=0]="Bytes",t[t.Utf8=1]="Utf8"})(DH=L.PayloadFormatIndicator||(L.PayloadFormatIndicator={}));var FH;(function(t){t[t.AtMostOnce=0]="AtMostOnce",t[t.AtLeastOnce=1]="AtLeastOnce",t[t.ExactlyOnce=2]="ExactlyOnce"})(FH=L.QoS||(L.QoS={}));var LH;(function(t){t[t.SendOnSubscribe=0]="SendOnSubscribe",t[t.SendOnSubscribeIfNew=1]="SendOnSubscribeIfNew",t[t.DontSend=2]="DontSend"})(LH=L.RetainHandlingType||(L.RetainHandlingType={}));var zH;(function(t){t[t.Connect=1]="Connect",t[t.Connack=2]="Connack",t[t.Publish=3]="Publish",t[t.Puback=4]="Puback",t[t.Pubrec=5]="Pubrec",t[t.Pubrel=6]="Pubrel",t[t.Pubcomp=7]="Pubcomp",t[t.Subscribe=8]="Subscribe",t[t.Suback=9]="Suback",t[t.Unsubscribe=10]="Unsubscribe",t[t.Unsuback=11]="Unsuback",t[t.Pingreq=12]="Pingreq",t[t.Pingresp=13]="Pingresp",t[t.Disconnect=14]="Disconnect",t[t.Auth=15]="Auth"})(zH=L.PacketType||(L.PacketType={}))});var Tw=u(ae=>{"use strict";var hA=ae&&ae.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,s)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),UH=ae&&ae.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),_A=ae&&ae.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&hA(e,t,r);return UH(e,t),e},yA=ae&&ae.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&hA(e,t,r)},xw=ae&&ae.__awaiter||function(t,e,r,i){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return n(s,"adopt"),new(r||(r=Promise))(function(o,a){function c(f){try{p(i.next(f))}catch(m){a(m)}}n(c,"fulfilled");function l(f){try{p(i.throw(f))}catch(m){a(m)}}n(l,"rejected");function p(f){f.done?o(f.value):s(f.value).then(c,l)}n(p,"step"),p((i=i.apply(t,e||[])).next())})},WH=ae&&ae.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ae,"__esModule",{value:!0});ae.Mqtt5Client=ae.ClientExtendedValidationAndFlowControl=ae.ClientOperationQueueBehavior=ae.HttpProxyOptions=void 0;var ln=WH(Ir()),jH=Zo(),VH=lm(),Aw=_A(on()),$H=_A(wm()),mA=sn(),HH=_m();Object.defineProperty(ae,"HttpProxyOptions",{enumerable:!0,get:function(){return HH.HttpProxyOptions}});yA(pA(),ae);yA(fA(),ae);var GH;(function(t){t[t.Default=0]="Default",t[t.FailNonQos1PublishOnDisconnect=1]="FailNonQos1PublishOnDisconnect",t[t.FailQos0PublishOnDisconnect=2]="FailQos0PublishOnDisconnect",t[t.FailAllOnDisconnect=3]="FailAllOnDisconnect"})(GH=ae.ClientOperationQueueBehavior||(ae.ClientOperationQueueBehavior={}));var BH;(function(t){t[t.None=0]="None",t[t.AwsIotCoreDefaults=1]="AwsIotCoreDefaults"})(BH=ae.ClientExtendedValidationAndFlowControl||(ae.ClientExtendedValidationAndFlowControl={}));var te=class extends(0,jH.NativeResourceMixin)(VH.BufferedEventEmitter){constructor(e){super(),this._super(ln.default.mqtt5_client_new(this,e,r=>{te._s_on_stopped(r)},r=>{te._s_on_attempting_connect(r)},(r,i,s)=>{te._s_on_connection_success(r,i,s)},(r,i,s)=>{te._s_on_connection_failure(r,new mA.CrtError(i),s)},(r,i,s)=>{te._s_on_disconnection(r,new mA.CrtError(i),s)},(r,i)=>{te._s_on_message_received(r,i)},e.clientBootstrap?e.clientBootstrap.native_handle():null,e.socketOptions?e.socketOptions.native_handle():null,e.tlsCtx?e.tlsCtx.native_handle():null,e.httpProxyOptions?e.httpProxyOptions.create_native_handle():null))}close(){ln.default.mqtt5_client_close(this.native_handle())}start(){ln.default.mqtt5_client_start(this.native_handle())}stop(e){ln.default.mqtt5_client_stop(this.native_handle(),e)}subscribe(e){return xw(this,void 0,void 0,function*(){return new Promise((r,i)=>{function s(o,a,c){return te._s_on_suback_callback(r,i,o,a,c)}n(s,"curriedPromiseCallback");try{ln.default.mqtt5_client_subscribe(this.native_handle(),e,s)}catch(o){i(o)}})})}unsubscribe(e){return xw(this,void 0,void 0,function*(){return new Promise((r,i)=>{function s(o,a,c){return te._s_on_unsuback_callback(r,i,o,a,c)}n(s,"curriedPromiseCallback");try{ln.default.mqtt5_client_unsubscribe(this.native_handle(),e,s)}catch(o){i(o)}})})}publish(e){return xw(this,void 0,void 0,function*(){return new Promise((r,i)=>{e&&e.payload&&(e.payload=$H.normalize_payload(e.payload));function s(o,a,c){return te._s_on_puback_callback(r,i,o,a,c)}n(s,"curriedPromiseCallback");try{ln.default.mqtt5_client_publish(this.native_handle(),e,s)}catch(o){i(o)}})})}getQueueStatistics(){return ln.default.mqtt5_client_get_queue_statistics(this.native_handle())}on(e,r){return super.on(e,r),this}static _s_on_stopped(e){process.nextTick(()=>{let r={};e.emit(te.STOPPED,r)})}static _s_on_attempting_connect(e){process.nextTick(()=>{let r={};e.emit(te.ATTEMPTING_CONNECT,r)})}static _s_on_connection_success(e,r,i){let s={connack:r,settings:i};process.nextTick(()=>{e.emit(te.CONNECTION_SUCCESS,s)})}static _s_on_connection_failure(e,r,i){let s={error:r};i!=null&&(s.connack=i),process.nextTick(()=>{e.emit(te.CONNECTION_FAILURE,s)})}static _s_on_disconnection(e,r,i){let s={error:r};i!=null&&(s.disconnect=i),process.nextTick(()=>{e.emit(te.DISCONNECTION,s)})}static _s_on_suback_callback(e,r,i,s,o){s==0&&o!==void 0?e(o):r(Aw.error_code_to_string(s))}static _s_on_unsuback_callback(e,r,i,s,o){s==0&&o!==void 0?e(o):r(Aw.error_code_to_string(s))}static _s_on_puback_callback(e,r,i,s,o){s==0?e(o):r(Aw.error_code_to_string(s))}static _s_on_message_received(e,r){let i={message:r};process.nextTick(()=>{e.emit(te.MESSAGE_RECEIVED,i)})}};n(te,"Mqtt5Client");ae.Mqtt5Client=te;te.ERROR="error";te.MESSAGE_RECEIVED="messageReceived";te.ATTEMPTING_CONNECT="attemptingConnect";te.CONNECTION_SUCCESS="connectionSuccess";te.CONNECTION_FAILURE="connectionFailure";te.DISCONNECTION="disconnection";te.STOPPED="stopped"});var EA=u(Wt=>{"use strict";var JH=Wt&&Wt.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,s)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),KH=Wt&&Wt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),nd=Wt&&Wt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&JH(e,t,r);return KH(e,t),e},gA=Wt&&Wt.__awaiter||function(t,e,r,i){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return n(s,"adopt"),new(r||(r=Promise))(function(o,a){function c(f){try{p(i.next(f))}catch(m){a(m)}}n(c,"fulfilled");function l(f){try{p(i.throw(f))}catch(m){a(m)}}n(l,"rejected");function p(f){f.done?o(f.value):s(f.value).then(c,l)}n(p,"step"),p((i=i.apply(t,e||[])).next())})};Object.defineProperty(Wt,"__esModule",{value:!0});Wt.AwsIotMqtt5ClientConfigBuilder=void 0;var YH=nd(Tw()),Ut=nd(on()),id=nd(tm()),QH=sn(),wA=nd(Sw()),XH=nd(wm()),Se=class{constructor(e,r,i){this.tlsContextOptions=i,this.config={hostName:e,port:r,connectProperties:{keepAliveIntervalSeconds:XH.DEFAULT_KEEP_ALIVE},extendedValidationAndFlowControlOptions:YH.ClientExtendedValidationAndFlowControl.AwsIotCoreDefaults}}static newDirectMqttBuilderWithMtlsFromPath(e,r,i){let s=new Se(e,Se.DEFAULT_DIRECT_MQTT_PORT,Ut.TlsContextOptions.create_client_with_mtls_from_path(r,i));return Ut.is_alpn_available()&&s.tlsContextOptions.alpn_list.unshift("x-amzn-mqtt-ca"),s}static newDirectMqttBuilderWithMtlsFromMemory(e,r,i){let s=new Se(e,Se.DEFAULT_DIRECT_MQTT_PORT,Ut.TlsContextOptions.create_client_with_mtls(r,i));return Ut.is_alpn_available()&&s.tlsContextOptions.alpn_list.unshift("x-amzn-mqtt-ca"),s}static newDirectMqttBuilderWithMtlsFromPkcs11(e,r){let i=new Se(e,Se.DEFAULT_DIRECT_MQTT_PORT,Ut.TlsContextOptions.create_client_with_mtls_pkcs11(r));return Ut.is_alpn_available()&&i.tlsContextOptions.alpn_list.unshift("x-amzn-mqtt-ca"),i}static newDirectMqttBuilderWithMtlsFromWindowsCertStorePath(e,r){let i=new Se(e,Se.DEFAULT_DIRECT_MQTT_PORT,Ut.TlsContextOptions.create_client_with_mtls_windows_cert_store_path(r));return Ut.is_alpn_available()&&i.tlsContextOptions.alpn_list.unshift("x-amzn-mqtt-ca"),i}static newDirectMqttBuilderWithCustomAuth(e,r){let i=new Se(e,Se.DEFAULT_WEBSOCKET_MQTT_PORT,new Ut.TlsContextOptions);return i.customAuthConfig=r,i.tlsContextOptions.alpn_list=["mqtt"],i}static newWebsocketMqttBuilderWithSigv4Auth(e,r){let i=new Ut.TlsContextOptions;i.alpn_list=[];let s=new Se(e,Se.DEFAULT_WEBSOCKET_MQTT_PORT,i),o=r?.credentialsProvider;return o||(o=id.AwsCredentialsProvider.newDefault()),s.config.websocketHandshakeTransform=(a,c)=>gA(this,void 0,void 0,function*(){var l;try{let p={algorithm:id.AwsSigningAlgorithm.SigV4,signature_type:id.AwsSignatureType.HttpRequestViaQueryParams,provider:o,region:(l=r?.region)!==null&&l!==void 0?l:wA.extractRegionFromEndpoint(e),service:"iotdevicegateway",signed_body_value:id.AwsSignedBodyValue.EmptySha256,omit_session_token:!0};yield id.aws_sign_request(a,p),c()}catch(p){p instanceof QH.CrtError?c(p.error_code):c(3)}}),s}static newWebsocketMqttBuilderWithCustomAuth(e,r){let i=new Se(e,Se.DEFAULT_WEBSOCKET_MQTT_PORT,new Ut.TlsContextOptions);return i.customAuthConfig=r,i.config.websocketHandshakeTransform=(s,o)=>gA(this,void 0,void 0,function*(){o(0)}),i}withCertificateAuthorityFromPath(e,r){return this.tlsContextOptions.override_default_trust_store_from_path(e,r),this}withCertificateAuthority(e){return this.tlsContextOptions.override_default_trust_store(e),this}withPort(e){return this.config.port=e,this}withConnectProperties(e){return this.config.connectProperties=e,this}withSessionBehavior(e){return this.config.sessionBehavior=e,this}withRetryJitterMode(e){return this.config.retryJitterMode=e,this}withMinReconnectDelayMs(e){return this.config.minReconnectDelayMs=e,this}withMaxReconnectDelayMs(e){return this.config.maxReconnectDelayMs=e,this}withMinConnectedTimeToResetReconnectDelayMs(e){return this.config.minConnectedTimeToResetReconnectDelayMs=e,this}withConnackTimeoutMs(e){return this.config.connackTimeoutMs=e,this}withOfflineQueueBehavior(e){return this.config.offlineQueueBehavior=e,this}withPingTimeoutMs(e){return this.config.pingTimeoutMs=e,this}withAckTimeoutSeconds(e){return this.config.ackTimeoutSeconds=e,this}withSocketOptions(e){return this.config.socketOptions=e,this}withHttpProxyOptions(e){return this.config.httpProxyOptions=e,this}withExtendedValidationAndFlowControlOptions(e){return this.config.extendedValidationAndFlowControlOptions=e,this}build(){var e,r;return this.config.tlsCtx===void 0&&(this.config.tlsCtx=new Ut.ClientTlsContext(this.tlsContextOptions)),this.config.connectProperties&&(this.config.connectProperties.username=wA.buildMqtt5FinalUsername(this.customAuthConfig),!((e=this.customAuthConfig)===null||e===void 0)&&e.password&&(this.config.connectProperties.password=(r=this.customAuthConfig)===null||r===void 0?void 0:r.password)),this.config}};n(Se,"AwsIotMqtt5ClientConfigBuilder");Wt.AwsIotMqtt5ClientConfigBuilder=Se;Se.DEFAULT_WEBSOCKET_MQTT_PORT=443;Se.DEFAULT_DIRECT_MQTT_PORT=8883});var SA=u(pn=>{"use strict";var ZH=pn&&pn.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,s)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),vA=pn&&pn.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&ZH(e,t,r)};Object.defineProperty(pn,"__esModule",{value:!0});vA(lA(),pn);vA(EA(),pn)});var PA=u(Ee=>{"use strict";var e3=Ee&&Ee.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,s)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),t3=Ee&&Ee.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),AA=Ee&&Ee.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&e3(e,t,r);return t3(e,t),e},na=Ee&&Ee.__awaiter||function(t,e,r,i){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return n(s,"adopt"),new(r||(r=Promise))(function(o,a){function c(f){try{p(i.next(f))}catch(m){a(m)}}n(c,"fulfilled");function l(f){try{p(i.throw(f))}catch(m){a(m)}}n(l,"rejected");function p(f){f.done?o(f.value):s(f.value).then(c,l)}n(p,"step"),p((i=i.apply(t,e||[])).next())})},r3=Ee&&Ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.MqttClientConnection=Ee.MqttClient=Ee.MqttWill=Ee.QoS=Ee.HttpProxyOptions=void 0;var ir=r3(Ir()),TA=Zo(),i3=lm(),NA=AA(wm()),bA=sn(),Em=AA(on()),n3=_m();Object.defineProperty(Ee,"HttpProxyOptions",{enumerable:!0,get:function(){return n3.HttpProxyOptions}});var xA=gm(),OA=gm();Object.defineProperty(Ee,"QoS",{enumerable:!0,get:function(){return OA.QoS}});Object.defineProperty(Ee,"MqttWill",{enumerable:!0,get:function(){return OA.MqttWill}});var vm=class extends TA.NativeResource{constructor(e=void 0){super(ir.default.mqtt_client_new(e!=null?e.native_handle():null)),this.bootstrap=e}new_connection(e){return new nr(this,e)}};n(vm,"MqttClient");Ee.MqttClient=vm;var nr=class extends(0,TA.NativeResourceMixin)(i3.BufferedEventEmitter){constructor(e,r){super(),this.client=e,this.config=r;let i=r.will?{topic:r.will.topic,qos:r.will.qos,payload:NA.normalize_payload(r.will.payload),retain:r.will.retain}:void 0;var s=xA.DEFAULT_RECONNECT_MIN_SEC,o=xA.DEFAULT_RECONNECT_MAX_SEC;r.reconnect_min_sec&&(s=r.reconnect_min_sec,o=Math.max(s,o)),r.reconnect_max_sec&&(o=r.reconnect_max_sec,s=Math.min(s,o)),this._super(ir.default.mqtt_client_connection_new(e.native_handle(),a=>{this._on_connection_interrupted(a)},(a,c)=>{this._on_connection_resumed(a,c)},r.tls_ctx?r.tls_ctx.native_handle():null,i,r.username,r.password,r.use_websocket,r.proxy_options?r.proxy_options.create_native_handle():void 0,r.websocket_handshake_transform,s,o)),this.tls_ctx=r.tls_ctx,ir.default.mqtt_client_connection_on_message(this.native_handle(),this._on_any_publish.bind(this)),this.on("error",a=>{})}close(){ir.default.mqtt_client_connection_close(this.native_handle())}on(e,r){return super.on(e,r),e=="connect"&&process.nextTick(()=>{this.uncork()}),this}connect(){return na(this,void 0,void 0,function*(){return new Promise((e,r)=>{r=this._reject(r);try{ir.default.mqtt_client_connection_connect(this.native_handle(),this.config.client_id,this.config.host_name,this.config.port,this.config.socket_options.native_handle(),this.config.keep_alive,this.config.ping_timeout,this.config.protocol_operation_timeout,this.config.clean_session,this._on_connect_callback.bind(this,e,r))}catch(i){r(i)}})})}reconnect(){return na(this,void 0,void 0,function*(){return new Promise((e,r)=>{r=this._reject(r);try{ir.default.mqtt_client_connection_reconnect(this.native_handle(),this._on_connect_callback.bind(this,e,r))}catch(i){r(i)}})})}publish(e,r,i,s=!1){return na(this,void 0,void 0,function*(){return new Promise((o,a)=>{a=this._reject(a);try{ir.default.mqtt_client_connection_publish(this.native_handle(),e,NA.normalize_payload(r),i,s,this._on_puback_callback.bind(this,o,a))}catch(c){a(c)}})})}subscribe(e,r,i){return na(this,void 0,void 0,function*(){return new Promise((s,o)=>{o=this._reject(o);try{ir.default.mqtt_client_connection_subscribe(this.native_handle(),e,r,i,this._on_suback_callback.bind(this,s,o))}catch(a){o(a)}})})}unsubscribe(e){return na(this,void 0,void 0,function*(){return new Promise((r,i)=>{i=this._reject(i);try{ir.default.mqtt_client_connection_unsubscribe(this.native_handle(),e,this._on_unsuback_callback.bind(this,r,i))}catch(s){i(s)}})})}disconnect(){return na(this,void 0,void 0,function*(){return new Promise((e,r)=>{r=this._reject(r);try{ir.default.mqtt_client_connection_disconnect(this.native_handle(),this._on_disconnect_callback.bind(this,e))}catch(i){r(i)}})})}getQueueStatistics(){return ir.default.mqtt_client_connection_get_queue_statistics(this.native_handle())}_reject(e){return r=>{e(r),process.nextTick(()=>{this.emit("error",new bA.CrtError(r))})}}_on_connection_interrupted(e){this.emit("interrupt",new bA.CrtError(e))}_on_connection_resumed(e,r){this.emit("resume",e,r)}_on_any_publish(e,r,i,s,o){this.emit("message",e,r,i,s,o)}_on_connect_callback(e,r,i,s,o){i==0&&s==0?(e(o),this.emit("connect",o)):i!=0?r("Failed to connect: "+Em.error_code_to_string(i)):r("Server rejected connection.")}_on_puback_callback(e,r,i,s){s==0?e({packet_id:i}):r("Failed to publish: "+Em.error_code_to_string(s))}_on_suback_callback(e,r,i,s,o,a){a==0?e({packet_id:i,topic:s,qos:o,error_code:a}):r("Failed to subscribe: "+Em.error_code_to_string(a))}_on_unsuback_callback(e,r,i,s){s==0?e({packet_id:i}):r("Failed to unsubscribe: "+Em.error_code_to_string(s))}_on_disconnect_callback(e){e(),this.emit("disconnect"),this.close()}};n(nr,"MqttClientConnection");Ee.MqttClientConnection=nr;nr.CONNECT="connect";nr.DISCONNECT="disconnect";nr.ERROR="error";nr.INTERRUPT="interrupt";nr.RESUME="resume";nr.MESSAGE="message"});var RA=u(H=>{"use strict";var s3=H&&H.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,s)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),o3=H&&H.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),sr=H&&H.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&s3(e,t,r);return o3(e,t),e};Object.defineProperty(H,"__esModule",{value:!0});H.CrtError=H.resource_safety=H.platform=H.mqtt5=H.mqtt=H.iot=H.io=H.http=H.crt=H.crypto=H.checksums=H.auth=void 0;var a3=sr(Hf());H.platform=a3;var c3=sr(Gx());H.resource_safety=c3;var d3=sr(tm());H.auth=d3;var u3=sr(tA());H.checksums=u3;var l3=sr(iA());H.crt=l3;var p3=sr(sA());H.crypto=p3;var f3=sr(_m());H.http=f3;var m3=sr(on());H.io=m3;var h3=sr(SA());H.iot=h3;var _3=sr(PA());H.mqtt=_3;var y3=sr(Tw());H.mqtt5=y3;var g3=sn();Object.defineProperty(H,"CrtError",{enumerable:!0,get:function(){return g3.CrtError}})});var IA=u((Sm,Ow)=>{"use strict";Object.defineProperty(Sm,"__esModule",{value:!0});Sm.isCrtAvailable=void 0;var w3=n(()=>{try{return typeof U=="function"&&typeof Ow<"u"&&Ow.require&&RA()?["md/crt-avail"]:null}catch{return null}},"isCrtAvailable");Sm.isCrtAvailable=w3});var sd=u(kr=>{"use strict";Object.defineProperty(kr,"__esModule",{value:!0});kr.defaultUserAgent=kr.UA_APP_ID_INI_NAME=kr.UA_APP_ID_ENV_NAME=void 0;var E3=rn(),qA=U("os"),Pw=U("process"),v3=IA();kr.UA_APP_ID_ENV_NAME="AWS_SDK_UA_APP_ID";kr.UA_APP_ID_INI_NAME="sdk-ua-app-id";var S3=n(({serviceId:t,clientVersion:e})=>{let r=[["aws-sdk-js",e],[`os/${(0,qA.platform)()}`,(0,qA.release)()],["lang/js"],["md/nodejs",`${Pw.versions.node}`]],i=(0,v3.isCrtAvailable)();i&&r.push(i),t&&r.push([`api/${t}`,e]),Pw.env.AWS_EXECUTION_ENV&&r.push([`exec-env/${Pw.env.AWS_EXECUTION_ENV}`]);let s=(0,E3.loadConfig)({environmentVariableSelector:a=>a[kr.UA_APP_ID_ENV_NAME],configFileSelector:a=>a[kr.UA_APP_ID_INI_NAME],default:void 0})(),o;return async()=>{if(!o){let a=await s;o=a?[...r,[`app/${a}`]]:[...r]}return o}},"defaultUserAgent");kr.defaultUserAgent=S3});var CA=u(Nm=>{"use strict";Object.defineProperty(Nm,"__esModule",{value:!0});Nm.fromBase64=void 0;var N3=_o(),b3=/^[A-Za-z0-9+/]*={0,2}$/,x3=n(t=>{if(t.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!b3.exec(t))throw new TypeError("Invalid base64 string.");let e=(0,N3.fromString)(t,"base64");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)},"fromBase64");Nm.fromBase64=x3});var kA=u(bm=>{"use strict";Object.defineProperty(bm,"__esModule",{value:!0});bm.toBase64=void 0;var A3=_o(),T3=n(t=>(0,A3.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength).toString("base64"),"toBase64");bm.toBase64=T3});var od=u(xm=>{"use strict";Object.defineProperty(xm,"__esModule",{value:!0});var MA=(A(),b(x));MA.__exportStar(CA(),xm);MA.__exportStar(kA(),xm)});var DA=u((Z_e,O3)=>{O3.exports={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}}],version:"1.1"}});var Iw=u(Am=>{"use strict";Object.defineProperty(Am,"__esModule",{value:!0});Am.partition=void 0;var P3=(A(),b(x)),R3=P3.__importDefault(DA()),{partitions:Rw}=R3.default,FA=Rw.find(t=>t.id==="aws"),I3=n(t=>{for(let e of Rw){let{regions:r,outputs:i}=e;for(let[s,o]of Object.entries(r))if(s===t)return{...i,...o}}for(let e of Rw){let{regionRegex:r,outputs:i}=e;if(new RegExp(r).test(t))return{...i}}if(!FA)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...FA.outputs}},"partition");Am.partition=I3});var LA=u(Tm=>{"use strict";Object.defineProperty(Tm,"__esModule",{value:!0});Tm.debugId=void 0;Tm.debugId="endpoints"});var zA=u(Om=>{"use strict";Object.defineProperty(Om,"__esModule",{value:!0});Om.toDebugString=void 0;function qw(t){return typeof t!="object"||t==null?t:"ref"in t?`$${qw(t.ref)}`:"fn"in t?`${t.fn}(${(t.argv||[]).map(qw).join(", ")})`:JSON.stringify(t,null,2)}n(qw,"toDebugString");Om.toDebugString=qw});var ad=u(Pm=>{"use strict";Object.defineProperty(Pm,"__esModule",{value:!0});var UA=(A(),b(x));UA.__exportStar(LA(),Pm);UA.__exportStar(zA(),Pm)});var WA=u(Im=>{"use strict";Object.defineProperty(Im,"__esModule",{value:!0});Im.EndpointError=void 0;var Rm=class extends Error{constructor(e){super(e),this.name="EndpointError"}};n(Rm,"EndpointError");Im.EndpointError=Rm});var VA=u(jA=>{"use strict";Object.defineProperty(jA,"__esModule",{value:!0})});var HA=u($A=>{"use strict";Object.defineProperty($A,"__esModule",{value:!0})});var BA=u(GA=>{"use strict";Object.defineProperty(GA,"__esModule",{value:!0})});var KA=u(JA=>{"use strict";Object.defineProperty(JA,"__esModule",{value:!0})});var QA=u(YA=>{"use strict";Object.defineProperty(YA,"__esModule",{value:!0})});var jt=u(fn=>{"use strict";Object.defineProperty(fn,"__esModule",{value:!0});var sa=(A(),b(x));sa.__exportStar(WA(),fn);sa.__exportStar(VA(),fn);sa.__exportStar(HA(),fn);sa.__exportStar(BA(),fn);sa.__exportStar(KA(),fn);sa.__exportStar(QA(),fn)});var Cw=u(qm=>{"use strict";Object.defineProperty(qm,"__esModule",{value:!0});qm.isIpAddress=void 0;var q3=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),C3=n(t=>q3.test(t)||t.startsWith("[")&&t.endsWith("]"),"isIpAddress");qm.isIpAddress=C3});var kw=u(cd=>{"use strict";Object.defineProperty(cd,"__esModule",{value:!0});cd.isValidHostLabel=void 0;var k3=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),M3=n((t,e=!1)=>{if(!e)return k3.test(t);let r=t.split(".");for(let i of r)if(!(0,cd.isValidHostLabel)(i))return!1;return!0},"isValidHostLabel");cd.isValidHostLabel=M3});var XA=u(dd=>{"use strict";Object.defineProperty(dd,"__esModule",{value:!0});dd.isVirtualHostableS3Bucket=void 0;var D3=Cw(),F3=kw(),L3=n((t,e=!1)=>{if(e){for(let r of t.split("."))if(!(0,dd.isVirtualHostableS3Bucket)(r))return!1;return!0}return!(!(0,F3.isValidHostLabel)(t)||t.length<3||t.length>63||t!==t.toLowerCase()||(0,D3.isIpAddress)(t))},"isVirtualHostableS3Bucket");dd.isVirtualHostableS3Bucket=L3});var ZA=u(Cm=>{"use strict";Object.defineProperty(Cm,"__esModule",{value:!0});Cm.parseArn=void 0;var z3=n(t=>{let e=t.split(":");if(e.length<6)return null;let[r,i,s,o,a,...c]=e;return r!=="arn"||i===""||s===""||c[0]===""?null:{partition:i,service:s,region:o,accountId:a,resourceId:c[0].includes("/")?c[0].split("/"):c}},"parseArn");Cm.parseArn=z3});var eT=u(ud=>{"use strict";Object.defineProperty(ud,"__esModule",{value:!0});var Mw=(A(),b(x));Mw.__exportStar(XA(),ud);Mw.__exportStar(ZA(),ud);Mw.__exportStar(Iw(),ud)});var tT=u(km=>{"use strict";Object.defineProperty(km,"__esModule",{value:!0});km.booleanEquals=void 0;var U3=n((t,e)=>t===e,"booleanEquals");km.booleanEquals=U3});var iT=u(Mm=>{"use strict";Object.defineProperty(Mm,"__esModule",{value:!0});Mm.getAttrPathList=void 0;var rT=jt(),W3=n(t=>{let e=t.split("."),r=[];for(let i of e){let s=i.indexOf("[");if(s!==-1){if(i.indexOf("]")!==i.length-1)throw new rT.EndpointError(`Path: '${t}' does not end with ']'`);let o=i.slice(s+1,-1);if(Number.isNaN(parseInt(o)))throw new rT.EndpointError(`Invalid array index: '${o}' in path: '${t}'`);s!==0&&r.push(i.slice(0,s)),r.push(o)}else r.push(i)}return r},"getAttrPathList");Mm.getAttrPathList=W3});var nT=u(Dm=>{"use strict";Object.defineProperty(Dm,"__esModule",{value:!0});Dm.getAttr=void 0;var j3=jt(),V3=iT(),$3=n((t,e)=>(0,V3.getAttrPathList)(e).reduce((r,i)=>{if(typeof r!="object")throw new j3.EndpointError(`Index '${i}' in '${e}' not found in '${JSON.stringify(t)}'`);return Array.isArray(r)?r[parseInt(i)]:r[i]},t),"getAttr");Dm.getAttr=$3});var sT=u(Fm=>{"use strict";Object.defineProperty(Fm,"__esModule",{value:!0});Fm.isSet=void 0;var H3=n(t=>t!=null,"isSet");Fm.isSet=H3});var oT=u(Lm=>{"use strict";Object.defineProperty(Lm,"__esModule",{value:!0});Lm.not=void 0;var G3=n(t=>!t,"not");Lm.not=G3});var cT=u(aT=>{"use strict";Object.defineProperty(aT,"__esModule",{value:!0})});var dT=u(ld=>{"use strict";Object.defineProperty(ld,"__esModule",{value:!0});ld.HttpAuthLocation=void 0;var B3;(function(t){t.HEADER="header",t.QUERY="query"})(B3=ld.HttpAuthLocation||(ld.HttpAuthLocation={}))});var lT=u(uT=>{"use strict";Object.defineProperty(uT,"__esModule",{value:!0})});var fT=u(pT=>{"use strict";Object.defineProperty(pT,"__esModule",{value:!0})});var hT=u(mT=>{"use strict";Object.defineProperty(mT,"__esModule",{value:!0})});var yT=u(_T=>{"use strict";Object.defineProperty(_T,"__esModule",{value:!0})});var wT=u(gT=>{"use strict";Object.defineProperty(gT,"__esModule",{value:!0})});var ET=u(pd=>{"use strict";Object.defineProperty(pd,"__esModule",{value:!0});pd.HostAddressType=void 0;var J3;(function(t){t.AAAA="AAAA",t.A="A"})(J3=pd.HostAddressType||(pd.HostAddressType={}))});var vT=u(fd=>{"use strict";Object.defineProperty(fd,"__esModule",{value:!0});fd.EndpointURLScheme=void 0;var K3;(function(t){t.HTTP="http",t.HTTPS="https"})(K3=fd.EndpointURLScheme||(fd.EndpointURLScheme={}))});var NT=u(ST=>{"use strict";Object.defineProperty(ST,"__esModule",{value:!0})});var xT=u(bT=>{"use strict";Object.defineProperty(bT,"__esModule",{value:!0})});var TT=u(AT=>{"use strict";Object.defineProperty(AT,"__esModule",{value:!0})});var PT=u(OT=>{"use strict";Object.defineProperty(OT,"__esModule",{value:!0})});var IT=u(RT=>{"use strict";Object.defineProperty(RT,"__esModule",{value:!0})});var CT=u(qT=>{"use strict";Object.defineProperty(qT,"__esModule",{value:!0})});var MT=u(kT=>{"use strict";Object.defineProperty(kT,"__esModule",{value:!0})});var DT=u(rs=>{"use strict";Object.defineProperty(rs,"__esModule",{value:!0});var md=(A(),b(x));md.__exportStar(TT(),rs);md.__exportStar(PT(),rs);md.__exportStar(IT(),rs);md.__exportStar(CT(),rs);md.__exportStar(MT(),rs)});var LT=u(FT=>{"use strict";Object.defineProperty(FT,"__esModule",{value:!0})});var UT=u(zT=>{"use strict";Object.defineProperty(zT,"__esModule",{value:!0})});var jT=u(WT=>{"use strict";Object.defineProperty(WT,"__esModule",{value:!0})});var $T=u(VT=>{"use strict";Object.defineProperty(VT,"__esModule",{value:!0})});var GT=u(HT=>{"use strict";Object.defineProperty(HT,"__esModule",{value:!0})});var JT=u(BT=>{"use strict";Object.defineProperty(BT,"__esModule",{value:!0})});var YT=u(KT=>{"use strict";Object.defineProperty(KT,"__esModule",{value:!0})});var XT=u(QT=>{"use strict";Object.defineProperty(QT,"__esModule",{value:!0})});var eO=u(ZT=>{"use strict";Object.defineProperty(ZT,"__esModule",{value:!0})});var rO=u(tO=>{"use strict";Object.defineProperty(tO,"__esModule",{value:!0})});var nO=u(iO=>{"use strict";Object.defineProperty(iO,"__esModule",{value:!0})});var oO=u(sO=>{"use strict";Object.defineProperty(sO,"__esModule",{value:!0})});var cO=u(aO=>{"use strict";Object.defineProperty(aO,"__esModule",{value:!0})});var uO=u(dO=>{"use strict";Object.defineProperty(dO,"__esModule",{value:!0})});var pO=u(lO=>{"use strict";Object.defineProperty(lO,"__esModule",{value:!0})});var fO=u(Q=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0});var re=(A(),b(x));re.__exportStar(cT(),Q);re.__exportStar(dT(),Q);re.__exportStar(lT(),Q);re.__exportStar(fT(),Q);re.__exportStar(hT(),Q);re.__exportStar(yT(),Q);re.__exportStar(wT(),Q);re.__exportStar(ET(),Q);re.__exportStar(vT(),Q);re.__exportStar(NT(),Q);re.__exportStar(xT(),Q);re.__exportStar(DT(),Q);re.__exportStar(LT(),Q);re.__exportStar(UT(),Q);re.__exportStar(jT(),Q);re.__exportStar($T(),Q);re.__exportStar(GT(),Q);re.__exportStar(JT(),Q);re.__exportStar(YT(),Q);re.__exportStar(XT(),Q);re.__exportStar(eO(),Q);re.__exportStar(rO(),Q);re.__exportStar(nO(),Q);re.__exportStar(oO(),Q);re.__exportStar(cO(),Q);re.__exportStar(uO(),Q);re.__exportStar(pO(),Q)});var mO=u(zm=>{"use strict";Object.defineProperty(zm,"__esModule",{value:!0});zm.parseURL=void 0;var Fw=fO(),Y3=Cw(),Dw={[Fw.EndpointURLScheme.HTTP]:80,[Fw.EndpointURLScheme.HTTPS]:443},Q3=n(t=>{let e=(()=>{try{if(t instanceof URL)return t;if(typeof t=="object"&&"hostname"in t){let{hostname:h,port:_,protocol:w="",path:g="",query:S={}}=t,ie=new URL(`${w}//${h}${_?`:${_}`:""}${g}`);return ie.search=Object.entries(S).map(([Ie,Ne])=>`${Ie}=${Ne}`).join("&"),ie}return new URL(t)}catch{return null}})();if(!e)return console.error(`Unable to parse ${JSON.stringify(t)} as a whatwg URL.`),null;let r=e.href,{host:i,hostname:s,pathname:o,protocol:a,search:c}=e;if(c)return null;let l=a.slice(0,-1);if(!Object.values(Fw.EndpointURLScheme).includes(l))return null;let p=(0,Y3.isIpAddress)(s),f=r.includes(`${i}:${Dw[l]}`)||typeof t=="string"&&t.includes(`${i}:${Dw[l]}`),m=`${i}${f?`:${Dw[l]}`:""}`;return{scheme:l,authority:m,path:o,normalizedPath:o.endsWith("/")?o:`${o}/`,isIp:p}},"parseURL");zm.parseURL=Q3});var hO=u(Um=>{"use strict";Object.defineProperty(Um,"__esModule",{value:!0});Um.stringEquals=void 0;var X3=n((t,e)=>t===e,"stringEquals");Um.stringEquals=X3});var _O=u(Wm=>{"use strict";Object.defineProperty(Wm,"__esModule",{value:!0});Wm.substring=void 0;var Z3=n((t,e,r,i)=>e>=r||t.length<r?null:i?t.substring(t.length-r,t.length-e):t.substring(e,r),"substring");Wm.substring=Z3});var yO=u(jm=>{"use strict";Object.defineProperty(jm,"__esModule",{value:!0});jm.uriEncode=void 0;var eG=n(t=>encodeURIComponent(t).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),"uriEncode");jm.uriEncode=eG});var Lw=u(Tt=>{"use strict";Object.defineProperty(Tt,"__esModule",{value:!0});Tt.aws=void 0;var Mr=(A(),b(x));Tt.aws=Mr.__importStar(eT());Mr.__exportStar(tT(),Tt);Mr.__exportStar(nT(),Tt);Mr.__exportStar(sT(),Tt);Mr.__exportStar(kw(),Tt);Mr.__exportStar(oT(),Tt);Mr.__exportStar(mO(),Tt);Mr.__exportStar(hO(),Tt);Mr.__exportStar(_O(),Tt);Mr.__exportStar(yO(),Tt)});var zw=u(Vm=>{"use strict";Object.defineProperty(Vm,"__esModule",{value:!0});Vm.evaluateTemplate=void 0;var tG=Lw(),rG=n((t,e)=>{let r=[],i={...e.endpointParams,...e.referenceRecord},s=0;for(;s<t.length;){let o=t.indexOf("{",s);if(o===-1){r.push(t.slice(s));break}r.push(t.slice(s,o));let a=t.indexOf("}",o);if(a===-1){r.push(t.slice(o));break}t[o+1]==="{"&&t[a+1]==="}"&&(r.push(t.slice(o+1,a)),s=a+2);let c=t.substring(o+1,a);if(c.includes("#")){let[l,p]=c.split("#");r.push((0,tG.getAttr)(i[l],p))}else r.push(i[c]);s=a+1}return r.join("")},"evaluateTemplate");Vm.evaluateTemplate=rG});var gO=u($m=>{"use strict";Object.defineProperty($m,"__esModule",{value:!0});$m.getReferenceValue=void 0;var iG=n(({ref:t},e)=>({...e.endpointParams,...e.referenceRecord})[t],"getReferenceValue");$m.getReferenceValue=iG});var hd=u(Hm=>{"use strict";Object.defineProperty(Hm,"__esModule",{value:!0});Hm.evaluateExpression=void 0;var nG=jt(),sG=Uw(),oG=zw(),aG=gO(),cG=n((t,e,r)=>{if(typeof t=="string")return(0,oG.evaluateTemplate)(t,r);if(t.fn)return(0,sG.callFunction)(t,r);if(t.ref)return(0,aG.getReferenceValue)(t,r);throw new nG.EndpointError(`'${e}': ${String(t)} is not a string, function or reference.`)},"evaluateExpression");Hm.evaluateExpression=cG});var Uw=u(Gm=>{"use strict";Object.defineProperty(Gm,"__esModule",{value:!0});Gm.callFunction=void 0;var dG=(A(),b(x)),uG=dG.__importStar(Lw()),lG=hd(),pG=n(({fn:t,argv:e},r)=>{let i=e.map(s=>["boolean","number"].includes(typeof s)?s:(0,lG.evaluateExpression)(s,"arg",r));return t.split(".").reduce((s,o)=>s[o],uG)(...i)},"callFunction");Gm.callFunction=pG});var wO=u(Bm=>{"use strict";Object.defineProperty(Bm,"__esModule",{value:!0});Bm.evaluateCondition=void 0;var Ww=ad(),fG=jt(),mG=Uw(),hG=n(({assign:t,...e},r)=>{var i,s;if(t&&t in r.referenceRecord)throw new fG.EndpointError(`'${t}' is already defined in Reference Record.`);let o=(0,mG.callFunction)(e,r);return(s=(i=r.logger)===null||i===void 0?void 0:i.debug)===null||s===void 0||s.call(i,Ww.debugId,`evaluateCondition: ${(0,Ww.toDebugString)(e)} = ${(0,Ww.toDebugString)(o)}`),{result:o===""?!0:!!o,...t!=null&&{toAssign:{name:t,value:o}}}},"evaluateCondition");Bm.evaluateCondition=hG});var Km=u(Jm=>{"use strict";Object.defineProperty(Jm,"__esModule",{value:!0});Jm.evaluateConditions=void 0;var EO=ad(),_G=wO(),yG=n((t=[],e)=>{var r,i;let s={};for(let o of t){let{result:a,toAssign:c}=(0,_G.evaluateCondition)(o,{...e,referenceRecord:{...e.referenceRecord,...s}});if(!a)return{result:a};c&&(s[c.name]=c.value,(i=(r=e.logger)===null||r===void 0?void 0:r.debug)===null||i===void 0||i.call(r,EO.debugId,`assign: ${c.name} := ${(0,EO.toDebugString)(c.value)}`))}return{result:!0,referenceRecord:s}},"evaluateConditions");Jm.evaluateConditions=yG});var vO=u(Ym=>{"use strict";Object.defineProperty(Ym,"__esModule",{value:!0});Ym.getEndpointHeaders=void 0;var gG=jt(),wG=hd(),EG=n((t,e)=>Object.entries(t).reduce((r,[i,s])=>({...r,[i]:s.map(o=>{let a=(0,wG.evaluateExpression)(o,"Header value entry",e);if(typeof a!="string")throw new gG.EndpointError(`Header '${i}' value '${a}' is not a string`);return a})}),{}),"getEndpointHeaders");Ym.getEndpointHeaders=EG});var NO=u(_d=>{"use strict";Object.defineProperty(_d,"__esModule",{value:!0});_d.getEndpointProperty=void 0;var SO=jt(),vG=zw(),SG=jw(),NG=n((t,e)=>{if(Array.isArray(t))return t.map(r=>(0,_d.getEndpointProperty)(r,e));switch(typeof t){case"string":return(0,vG.evaluateTemplate)(t,e);case"object":if(t===null)throw new SO.EndpointError(`Unexpected endpoint property: ${t}`);return(0,SG.getEndpointProperties)(t,e);case"boolean":return t;default:throw new SO.EndpointError(`Unexpected endpoint property type: ${typeof t}`)}},"getEndpointProperty");_d.getEndpointProperty=NG});var jw=u(Qm=>{"use strict";Object.defineProperty(Qm,"__esModule",{value:!0});Qm.getEndpointProperties=void 0;var bG=NO(),xG=n((t,e)=>Object.entries(t).reduce((r,[i,s])=>({...r,[i]:(0,bG.getEndpointProperty)(s,e)}),{}),"getEndpointProperties");Qm.getEndpointProperties=xG});var bO=u(Xm=>{"use strict";Object.defineProperty(Xm,"__esModule",{value:!0});Xm.getEndpointUrl=void 0;var AG=jt(),TG=hd(),OG=n((t,e)=>{let r=(0,TG.evaluateExpression)(t,"Endpoint URL",e);if(typeof r=="string")try{return new URL(r)}catch(i){throw console.error(`Failed to construct URL with ${r}`,i),i}throw new AG.EndpointError(`Endpoint URL must be a string, got ${typeof r}`)},"getEndpointUrl");Xm.getEndpointUrl=OG});var AO=u(Zm=>{"use strict";Object.defineProperty(Zm,"__esModule",{value:!0});Zm.evaluateEndpointRule=void 0;var xO=ad(),PG=Km(),RG=vO(),IG=jw(),qG=bO(),CG=n((t,e)=>{var r,i;let{conditions:s,endpoint:o}=t,{result:a,referenceRecord:c}=(0,PG.evaluateConditions)(s,e);if(!a)return;let l={...e,referenceRecord:{...e.referenceRecord,...c}},{url:p,properties:f,headers:m}=o;return(i=(r=e.logger)===null||r===void 0?void 0:r.debug)===null||i===void 0||i.call(r,xO.debugId,`Resolving endpoint from template: ${(0,xO.toDebugString)(o)}`),{...m!=null&&{headers:(0,RG.getEndpointHeaders)(m,l)},...f!=null&&{properties:(0,IG.getEndpointProperties)(f,l)},url:(0,qG.getEndpointUrl)(p,l)}},"evaluateEndpointRule");Zm.evaluateEndpointRule=CG});var TO=u(eh=>{"use strict";Object.defineProperty(eh,"__esModule",{value:!0});eh.evaluateErrorRule=void 0;var kG=jt(),MG=Km(),DG=hd(),FG=n((t,e)=>{let{conditions:r,error:i}=t,{result:s,referenceRecord:o}=(0,MG.evaluateConditions)(r,e);if(s)throw new kG.EndpointError((0,DG.evaluateExpression)(i,"Error",{...e,referenceRecord:{...e.referenceRecord,...o}}))},"evaluateErrorRule");eh.evaluateErrorRule=FG});var OO=u(th=>{"use strict";Object.defineProperty(th,"__esModule",{value:!0});th.evaluateTreeRule=void 0;var LG=Km(),zG=Vw(),UG=n((t,e)=>{let{conditions:r,rules:i}=t,{result:s,referenceRecord:o}=(0,LG.evaluateConditions)(r,e);if(s)return(0,zG.evaluateRules)(i,{...e,referenceRecord:{...e.referenceRecord,...o}})},"evaluateTreeRule");th.evaluateTreeRule=UG});var Vw=u(rh=>{"use strict";Object.defineProperty(rh,"__esModule",{value:!0});rh.evaluateRules=void 0;var PO=jt(),WG=AO(),jG=TO(),VG=OO(),$G=n((t,e)=>{for(let r of t)if(r.type==="endpoint"){let i=(0,WG.evaluateEndpointRule)(r,e);if(i)return i}else if(r.type==="error")(0,jG.evaluateErrorRule)(r,e);else if(r.type==="tree"){let i=(0,VG.evaluateTreeRule)(r,e);if(i)return i}else throw new PO.EndpointError(`Unknown endpoint rule: ${r}`);throw new PO.EndpointError("Rules evaluation failed")},"evaluateRules");rh.evaluateRules=$G});var RO=u($w=>{"use strict";Object.defineProperty($w,"__esModule",{value:!0});var HG=(A(),b(x));HG.__exportStar(Vw(),$w)});var IO=u(nh=>{"use strict";Object.defineProperty(nh,"__esModule",{value:!0});nh.resolveEndpoint=void 0;var ih=ad(),GG=jt(),BG=RO(),JG=n((t,e)=>{var r,i,s,o,a,c;let{endpointParams:l,logger:p}=e,{parameters:f,rules:m}=t;(i=(r=e.logger)===null||r===void 0?void 0:r.debug)===null||i===void 0||i.call(r,ih.debugId,`Initial EndpointParams: ${(0,ih.toDebugString)(l)}`);let h=Object.entries(f).filter(([,g])=>g.default!=null).map(([g,S])=>[g,S.default]);if(h.length>0)for(let[g,S]of h)l[g]=(s=l[g])!==null&&s!==void 0?s:S;let _=Object.entries(f).filter(([,g])=>g.required).map(([g])=>g);for(let g of _)if(l[g]==null)throw new GG.EndpointError(`Missing required parameter: '${g}'`);let w=(0,BG.evaluateRules)(m,{endpointParams:l,logger:p,referenceRecord:{}});if(!((o=e.endpointParams)===null||o===void 0)&&o.Endpoint)try{let g=new URL(e.endpointParams.Endpoint),{protocol:S,port:ie}=g;w.url.protocol=S,w.url.port=ie}catch{}return(c=(a=e.logger)===null||a===void 0?void 0:a.debug)===null||c===void 0||c.call(a,ih.debugId,`Resolved endpoint: ${(0,ih.toDebugString)(w)}`),w},"resolveEndpoint");nh.resolveEndpoint=JG});var gd=u(yd=>{"use strict";Object.defineProperty(yd,"__esModule",{value:!0});var Hw=(A(),b(x));Hw.__exportStar(Iw(),yd);Hw.__exportStar(IO(),yd);Hw.__exportStar(jt(),yd)});var VO=u(sh=>{"use strict";Object.defineProperty(sh,"__esModule",{value:!0});sh.ruleSet=void 0;var zO="required",hi="fn",_i="argv",oa="ref",Gw="PartitionResult",Dr="tree",wd="error",Ed="endpoint",qO={[zO]:!1,type:"String"},CO={[zO]:!0,default:!1,type:"Boolean"},UO={[oa]:"Endpoint"},WO={[hi]:"booleanEquals",[_i]:[{[oa]:"UseFIPS"},!0]},jO={[hi]:"booleanEquals",[_i]:[{[oa]:"UseDualStack"},!0]},Fr={},kO={[hi]:"booleanEquals",[_i]:[!0,{[hi]:"getAttr",[_i]:[{[oa]:Gw},"supportsFIPS"]}]},MO={[hi]:"booleanEquals",[_i]:[!0,{[hi]:"getAttr",[_i]:[{[oa]:Gw},"supportsDualStack"]}]},DO=[UO],FO=[WO],LO=[jO],KG={version:"1.0",parameters:{Region:qO,UseDualStack:CO,UseFIPS:CO,Endpoint:qO},rules:[{conditions:[{[hi]:"aws.partition",[_i]:[{[oa]:"Region"}],assign:Gw}],type:Dr,rules:[{conditions:[{[hi]:"isSet",[_i]:DO},{[hi]:"parseURL",[_i]:DO,assign:"url"}],type:Dr,rules:[{conditions:FO,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:wd},{type:Dr,rules:[{conditions:LO,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:wd},{endpoint:{url:UO,properties:Fr,headers:Fr},type:Ed}]}]},{conditions:[WO,jO],type:Dr,rules:[{conditions:[kO,MO],type:Dr,rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Fr,headers:Fr},type:Ed}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:wd}]},{conditions:FO,type:Dr,rules:[{conditions:[kO],type:Dr,rules:[{type:Dr,rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Fr,headers:Fr},type:Ed}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:wd}]},{conditions:LO,type:Dr,rules:[{conditions:[MO],type:Dr,rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Fr,headers:Fr},type:Ed}]},{error:"DualStack is enabled but this partition does not support DualStack",type:wd}]},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:Fr,headers:Fr},type:Ed}]}]};sh.ruleSet=KG});var $O=u(oh=>{"use strict";Object.defineProperty(oh,"__esModule",{value:!0});oh.defaultEndpointResolver=void 0;var YG=gd(),QG=VO(),XG=n((t,e={})=>(0,YG.resolveEndpoint)(QG.ruleSet,{endpointParams:t,logger:e.logger}),"defaultEndpointResolver");oh.defaultEndpointResolver=XG});var BO=u(ah=>{"use strict";Object.defineProperty(ah,"__esModule",{value:!0});ah.getRuntimeConfig=void 0;var ZG=C(),eB=Mn(),HO=od(),GO=di(),tB=$O(),rB=n(t=>({apiVersion:"2019-06-10",base64Decoder:t?.base64Decoder??HO.fromBase64,base64Encoder:t?.base64Encoder??HO.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??tB.defaultEndpointResolver,logger:t?.logger??new ZG.NoOpLogger,serviceId:t?.serviceId??"SSO",urlParser:t?.urlParser??eB.parseUrl,utf8Decoder:t?.utf8Decoder??GO.fromUtf8,utf8Encoder:t?.utf8Encoder??GO.toUtf8}),"getRuntimeConfig");ah.getRuntimeConfig=rB});var JO=u(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});ht.IMDS_REGION_PATH=ht.DEFAULTS_MODE_OPTIONS=ht.ENV_IMDS_DISABLED=ht.AWS_DEFAULT_REGION_ENV=ht.AWS_REGION_ENV=ht.AWS_EXECUTION_ENV=void 0;ht.AWS_EXECUTION_ENV="AWS_EXECUTION_ENV";ht.AWS_REGION_ENV="AWS_REGION";ht.AWS_DEFAULT_REGION_ENV="AWS_DEFAULT_REGION";ht.ENV_IMDS_DISABLED="AWS_EC2_METADATA_DISABLED";ht.DEFAULTS_MODE_OPTIONS=["in-region","cross-region","mobile","standard","legacy"];ht.IMDS_REGION_PATH="/latest/meta-data/placement/region"});var KO=u(ch=>{"use strict";Object.defineProperty(ch,"__esModule",{value:!0});ch.NODE_DEFAULTS_MODE_CONFIG_OPTIONS=void 0;var iB="AWS_DEFAULTS_MODE",nB="defaults_mode";ch.NODE_DEFAULTS_MODE_CONFIG_OPTIONS={environmentVariableSelector:t=>t[iB],configFileSelector:t=>t[nB],default:"legacy"}});var XO=u(dh=>{"use strict";Object.defineProperty(dh,"__esModule",{value:!0});dh.resolveDefaultsModeConfig=void 0;var sB=_r(),YO=rf(),QO=rn(),oB=ee(),mn=JO(),aB=KO(),cB=n(({region:t=(0,QO.loadConfig)(sB.NODE_REGION_CONFIG_OPTIONS),defaultsMode:e=(0,QO.loadConfig)(aB.NODE_DEFAULTS_MODE_CONFIG_OPTIONS)}={})=>(0,oB.memoize)(async()=>{let r=typeof e=="function"?await e():e;switch(r?.toLowerCase()){case"auto":return dB(t);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${mn.DEFAULTS_MODE_OPTIONS.join(", ")}, got ${r}`)}}),"resolveDefaultsModeConfig");dh.resolveDefaultsModeConfig=cB;var dB=n(async t=>{if(t){let e=typeof t=="function"?await t():t,r=await uB();return r?e===r?"in-region":"cross-region":"standard"}return"standard"},"resolveNodeDefaultsModeAuto"),uB=n(async()=>{var t;if(process.env[mn.AWS_EXECUTION_ENV]&&(process.env[mn.AWS_REGION_ENV]||process.env[mn.AWS_DEFAULT_REGION_ENV]))return(t=process.env[mn.AWS_REGION_ENV])!==null&&t!==void 0?t:process.env[mn.AWS_DEFAULT_REGION_ENV];if(!process.env[mn.ENV_IMDS_DISABLED])try{let e=await(0,YO.getInstanceMetadataEndpoint)();return(await(0,YO.httpRequest)({...e,path:mn.IMDS_REGION_PATH})).toString()}catch{}},"inferPhysicalRegion")});var vd=u(Bw=>{"use strict";Object.defineProperty(Bw,"__esModule",{value:!0});var lB=(A(),b(x));lB.__exportStar(XO(),Bw)});var tP=u(lh=>{"use strict";Object.defineProperty(lh,"__esModule",{value:!0});lh.getRuntimeConfig=void 0;var pB=(A(),b(x)),fB=pB.__importDefault(Ox()),uh=_r(),mB=Jc(),ZO=ci(),Sd=rn(),eP=Yc(),hB=Qc(),_B=Mt(),yB=sd(),gB=BO(),wB=C(),EB=vd(),vB=C(),SB=n(t=>{(0,vB.emitWarningIfUnsupportedVersion)(process.version);let e=(0,EB.resolveDefaultsModeConfig)(t),r=n(()=>e().then(wB.loadConfigsForDefaultMode),"defaultConfigProvider"),i=(0,gB.getRuntimeConfig)(t);return{...i,...t,runtime:"node",defaultsMode:e,bodyLengthChecker:t?.bodyLengthChecker??hB.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,yB.defaultUserAgent)({serviceId:i.serviceId,clientVersion:fB.default.version}),maxAttempts:t?.maxAttempts??(0,Sd.loadConfig)(ZO.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),region:t?.region??(0,Sd.loadConfig)(uh.NODE_REGION_CONFIG_OPTIONS,uh.NODE_REGION_CONFIG_FILE_OPTIONS),requestHandler:t?.requestHandler??new eP.NodeHttpHandler(r),retryMode:t?.retryMode??(0,Sd.loadConfig)({...ZO.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||_B.DEFAULT_RETRY_MODE}),sha256:t?.sha256??mB.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??eP.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,Sd.loadConfig)(uh.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS),useFipsEndpoint:t?.useFipsEndpoint??(0,Sd.loadConfig)(uh.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS)}},"getRuntimeConfig");lh.getRuntimeConfig=SB});var Nd=u(fh=>{"use strict";Object.defineProperty(fh,"__esModule",{value:!0});fh.SSOClient=void 0;var NB=_r(),bB=Ac(),xB=ne(),rP=Tc(),AB=Oc(),TB=Pc(),iP=ci(),nP=zc(),OB=C(),PB=Tx(),RB=tP(),ph=class extends OB.Client{constructor(e){let r=(0,RB.getRuntimeConfig)(e),i=(0,PB.resolveClientEndpointParameters)(r),s=(0,NB.resolveRegionConfig)(i),o=(0,xB.resolveEndpointConfig)(s),a=(0,iP.resolveRetryConfig)(o),c=(0,rP.resolveHostHeaderConfig)(a),l=(0,nP.resolveUserAgentConfig)(c);super(l),this.config=l,this.middlewareStack.use((0,iP.getRetryPlugin)(this.config)),this.middlewareStack.use((0,bB.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,rP.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,AB.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,TB.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,nP.getUserAgentPlugin)(this.config))}destroy(){super.destroy()}};n(ph,"SSOClient");fh.SSOClient=ph});var _h=u(hh=>{"use strict";Object.defineProperty(hh,"__esModule",{value:!0});hh.SSO=void 0;var IB=rw(),qB=bf(),CB=Af(),kB=iw(),MB=Nd(),mh=class extends MB.SSOClient{getRoleCredentials(e,r,i){let s=new IB.GetRoleCredentialsCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}listAccountRoles(e,r,i){let s=new qB.ListAccountRolesCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}listAccounts(e,r,i){let s=new CB.ListAccountsCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}logout(e,r,i){let s=new kB.LogoutCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}};n(mh,"SSO");hh.SSO=mh});var sP=u(aa=>{"use strict";Object.defineProperty(aa,"__esModule",{value:!0});var yh=(A(),b(x));yh.__exportStar(rw(),aa);yh.__exportStar(bf(),aa);yh.__exportStar(Af(),aa);yh.__exportStar(iw(),aa)});var oP=u(Jw=>{"use strict";Object.defineProperty(Jw,"__esModule",{value:!0});var DB=(A(),b(x));DB.__exportStar(Xn(),Jw)});var cP=u(aP=>{"use strict";Object.defineProperty(aP,"__esModule",{value:!0})});var dP=u(gh=>{"use strict";Object.defineProperty(gh,"__esModule",{value:!0});gh.paginateListAccountRoles=void 0;var FB=bf(),LB=_h(),zB=Nd(),UB=n(async(t,e,...r)=>await t.send(new FB.ListAccountRolesCommand(e),...r),"makePagedClientRequest"),WB=n(async(t,e,...r)=>await t.listAccountRoles(e,...r),"makePagedRequest");async function*jB(t,e,...r){let i=t.startingToken||void 0,s=!0,o;for(;s;){if(e.nextToken=i,e.maxResults=t.pageSize,t.client instanceof LB.SSO)o=await WB(t.client,e,...r);else if(t.client instanceof zB.SSOClient)o=await UB(t.client,e,...r);else throw new Error("Invalid client, expected SSO | SSOClient");yield o;let a=i;i=o.nextToken,s=!!(i&&(!t.stopOnSameToken||i!==a))}return void 0}n(jB,"paginateListAccountRoles");gh.paginateListAccountRoles=jB});var uP=u(wh=>{"use strict";Object.defineProperty(wh,"__esModule",{value:!0});wh.paginateListAccounts=void 0;var VB=Af(),$B=_h(),HB=Nd(),GB=n(async(t,e,...r)=>await t.send(new VB.ListAccountsCommand(e),...r),"makePagedClientRequest"),BB=n(async(t,e,...r)=>await t.listAccounts(e,...r),"makePagedRequest");async function*JB(t,e,...r){let i=t.startingToken||void 0,s=!0,o;for(;s;){if(e.nextToken=i,e.maxResults=t.pageSize,t.client instanceof $B.SSO)o=await BB(t.client,e,...r);else if(t.client instanceof HB.SSOClient)o=await GB(t.client,e,...r);else throw new Error("Invalid client, expected SSO | SSOClient");yield o;let a=i;i=o.nextToken,s=!!(i&&(!t.stopOnSameToken||i!==a))}return void 0}n(JB,"paginateListAccounts");wh.paginateListAccounts=JB});var lP=u(bd=>{"use strict";Object.defineProperty(bd,"__esModule",{value:!0});var Kw=(A(),b(x));Kw.__exportStar(cP(),bd);Kw.__exportStar(dP(),bd);Kw.__exportStar(uP(),bd)});var pP=u(yi=>{"use strict";Object.defineProperty(yi,"__esModule",{value:!0});yi.SSOServiceException=void 0;var xd=(A(),b(x));xd.__exportStar(_h(),yi);xd.__exportStar(Nd(),yi);xd.__exportStar(sP(),yi);xd.__exportStar(oP(),yi);xd.__exportStar(lP(),yi);var KB=uf();Object.defineProperty(yi,"SSOServiceException",{enumerable:!0,get:function(){return KB.SSOServiceException}})});var Eh=u(ca=>{"use strict";Object.defineProperty(ca,"__esModule",{value:!0});ca.REFRESH_MESSAGE=ca.EXPIRE_WINDOW_MS=void 0;ca.EXPIRE_WINDOW_MS=5*60*1e3;ca.REFRESH_MESSAGE="To refresh this SSO session run 'aws sso login' with the corresponding profile."});var Sh=u(vh=>{"use strict";Object.defineProperty(vh,"__esModule",{value:!0});vh.SSOOIDCServiceException=void 0;var YB=C(),da=class extends YB.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,da.prototype)}};n(da,"SSOOIDCServiceException");vh.SSOOIDCServiceException=da});var Sa=u(z=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0});z.StartDeviceAuthorizationResponseFilterSensitiveLog=z.StartDeviceAuthorizationRequestFilterSensitiveLog=z.RegisterClientResponseFilterSensitiveLog=z.RegisterClientRequestFilterSensitiveLog=z.CreateTokenResponseFilterSensitiveLog=z.CreateTokenRequestFilterSensitiveLog=z.InvalidClientMetadataException=z.UnsupportedGrantTypeException=z.UnauthorizedClientException=z.SlowDownException=z.InvalidScopeException=z.InvalidRequestException=z.InvalidGrantException=z.InvalidClientException=z.InternalServerException=z.ExpiredTokenException=z.AuthorizationPendingException=z.AccessDeniedException=void 0;var Vt=Sh(),ua=class extends Vt.SSOOIDCServiceException{constructor(e){super({name:"AccessDeniedException",$fault:"client",...e}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,ua.prototype),this.error=e.error,this.error_description=e.error_description}};n(ua,"AccessDeniedException");z.AccessDeniedException=ua;var la=class extends Vt.SSOOIDCServiceException{constructor(e){super({name:"AuthorizationPendingException",$fault:"client",...e}),this.name="AuthorizationPendingException",this.$fault="client",Object.setPrototypeOf(this,la.prototype),this.error=e.error,this.error_description=e.error_description}};n(la,"AuthorizationPendingException");z.AuthorizationPendingException=la;var pa=class extends Vt.SSOOIDCServiceException{constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,pa.prototype),this.error=e.error,this.error_description=e.error_description}};n(pa,"ExpiredTokenException");z.ExpiredTokenException=pa;var fa=class extends Vt.SSOOIDCServiceException{constructor(e){super({name:"InternalServerException",$fault:"server",...e}),this.name="InternalServerException",this.$fault="server",Object.setPrototypeOf(this,fa.prototype),this.error=e.error,this.error_description=e.error_description}};n(fa,"InternalServerException");z.InternalServerException=fa;var ma=class extends Vt.SSOOIDCServiceException{constructor(e){super({name:"InvalidClientException",$fault:"client",...e}),this.name="InvalidClientException",this.$fault="client",Object.setPrototypeOf(this,ma.prototype),this.error=e.error,this.error_description=e.error_description}};n(ma,"InvalidClientException");z.InvalidClientException=ma;var ha=class extends Vt.SSOOIDCServiceException{constructor(e){super({name:"InvalidGrantException",$fault:"client",...e}),this.name="InvalidGrantException",this.$fault="client",Object.setPrototypeOf(this,ha.prototype),this.error=e.error,this.error_description=e.error_description}};n(ha,"InvalidGrantException");z.InvalidGrantException=ha;var _a=class extends Vt.SSOOIDCServiceException{constructor(e){super({name:"InvalidRequestException",$fault:"client",...e}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,_a.prototype),this.error=e.error,this.error_description=e.error_description}};n(_a,"InvalidRequestException");z.InvalidRequestException=_a;var ya=class extends Vt.SSOOIDCServiceException{constructor(e){super({name:"InvalidScopeException",$fault:"client",...e}),this.name="InvalidScopeException",this.$fault="client",Object.setPrototypeOf(this,ya.prototype),this.error=e.error,this.error_description=e.error_description}};n(ya,"InvalidScopeException");z.InvalidScopeException=ya;var ga=class extends Vt.SSOOIDCServiceException{constructor(e){super({name:"SlowDownException",$fault:"client",...e}),this.name="SlowDownException",this.$fault="client",Object.setPrototypeOf(this,ga.prototype),this.error=e.error,this.error_description=e.error_description}};n(ga,"SlowDownException");z.SlowDownException=ga;var wa=class extends Vt.SSOOIDCServiceException{constructor(e){super({name:"UnauthorizedClientException",$fault:"client",...e}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,wa.prototype),this.error=e.error,this.error_description=e.error_description}};n(wa,"UnauthorizedClientException");z.UnauthorizedClientException=wa;var Ea=class extends Vt.SSOOIDCServiceException{constructor(e){super({name:"UnsupportedGrantTypeException",$fault:"client",...e}),this.name="UnsupportedGrantTypeException",this.$fault="client",Object.setPrototypeOf(this,Ea.prototype),this.error=e.error,this.error_description=e.error_description}};n(Ea,"UnsupportedGrantTypeException");z.UnsupportedGrantTypeException=Ea;var va=class extends Vt.SSOOIDCServiceException{constructor(e){super({name:"InvalidClientMetadataException",$fault:"client",...e}),this.name="InvalidClientMetadataException",this.$fault="client",Object.setPrototypeOf(this,va.prototype),this.error=e.error,this.error_description=e.error_description}};n(va,"InvalidClientMetadataException");z.InvalidClientMetadataException=va;var QB=n(t=>({...t}),"CreateTokenRequestFilterSensitiveLog");z.CreateTokenRequestFilterSensitiveLog=QB;var XB=n(t=>({...t}),"CreateTokenResponseFilterSensitiveLog");z.CreateTokenResponseFilterSensitiveLog=XB;var ZB=n(t=>({...t}),"RegisterClientRequestFilterSensitiveLog");z.RegisterClientRequestFilterSensitiveLog=ZB;var eJ=n(t=>({...t}),"RegisterClientResponseFilterSensitiveLog");z.RegisterClientResponseFilterSensitiveLog=eJ;var tJ=n(t=>({...t}),"StartDeviceAuthorizationRequestFilterSensitiveLog");z.StartDeviceAuthorizationRequestFilterSensitiveLog=tJ;var rJ=n(t=>({...t}),"StartDeviceAuthorizationResponseFilterSensitiveLog");z.StartDeviceAuthorizationResponseFilterSensitiveLog=rJ});var bh=u(_t=>{"use strict";Object.defineProperty(_t,"__esModule",{value:!0});_t.deserializeAws_restJson1StartDeviceAuthorizationCommand=_t.deserializeAws_restJson1RegisterClientCommand=_t.deserializeAws_restJson1CreateTokenCommand=_t.serializeAws_restJson1StartDeviceAuthorizationCommand=_t.serializeAws_restJson1RegisterClientCommand=_t.serializeAws_restJson1CreateTokenCommand=void 0;var Yw=tt(),T=C(),$t=Sa(),Qw=Sh(),iJ=n(async(t,e)=>{let{hostname:r,protocol:i="https",port:s,path:o}=await e.endpoint(),a={"content-type":"application/json"},c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/token`,l;return l=JSON.stringify({...t.clientId!=null&&{clientId:t.clientId},...t.clientSecret!=null&&{clientSecret:t.clientSecret},...t.code!=null&&{code:t.code},...t.deviceCode!=null&&{deviceCode:t.deviceCode},...t.grantType!=null&&{grantType:t.grantType},...t.redirectUri!=null&&{redirectUri:t.redirectUri},...t.refreshToken!=null&&{refreshToken:t.refreshToken},...t.scope!=null&&{scope:yP(t.scope,e)}}),new Yw.HttpRequest({protocol:i,hostname:r,port:s,method:"POST",headers:a,path:c,body:l})},"serializeAws_restJson1CreateTokenCommand");_t.serializeAws_restJson1CreateTokenCommand=iJ;var nJ=n(async(t,e)=>{let{hostname:r,protocol:i="https",port:s,path:o}=await e.endpoint(),a={"content-type":"application/json"},c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/client/register`,l;return l=JSON.stringify({...t.clientName!=null&&{clientName:t.clientName},...t.clientType!=null&&{clientType:t.clientType},...t.scopes!=null&&{scopes:yP(t.scopes,e)}}),new Yw.HttpRequest({protocol:i,hostname:r,port:s,method:"POST",headers:a,path:c,body:l})},"serializeAws_restJson1RegisterClientCommand");_t.serializeAws_restJson1RegisterClientCommand=nJ;var sJ=n(async(t,e)=>{let{hostname:r,protocol:i="https",port:s,path:o}=await e.endpoint(),a={"content-type":"application/json"},c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/device_authorization`,l;return l=JSON.stringify({...t.clientId!=null&&{clientId:t.clientId},...t.clientSecret!=null&&{clientSecret:t.clientSecret},...t.startUrl!=null&&{startUrl:t.startUrl}}),new Yw.HttpRequest({protocol:i,hostname:r,port:s,method:"POST",headers:a,path:c,body:l})},"serializeAws_restJson1StartDeviceAuthorizationCommand");_t.serializeAws_restJson1StartDeviceAuthorizationCommand=sJ;var oJ=n(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return aJ(t,e);let r=it({$metadata:nt(t)}),i=(0,T.expectNonNull)((0,T.expectObject)(await Nh(t.body,e)),"body");return i.accessToken!=null&&(r.accessToken=(0,T.expectString)(i.accessToken)),i.expiresIn!=null&&(r.expiresIn=(0,T.expectInt32)(i.expiresIn)),i.idToken!=null&&(r.idToken=(0,T.expectString)(i.idToken)),i.refreshToken!=null&&(r.refreshToken=(0,T.expectString)(i.refreshToken)),i.tokenType!=null&&(r.tokenType=(0,T.expectString)(i.tokenType)),r},"deserializeAws_restJson1CreateTokenCommand");_t.deserializeAws_restJson1CreateTokenCommand=oJ;var aJ=n(async(t,e)=>{let r={...t,body:await eE(t.body,e)},i=tE(t,r.body);switch(i){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await pJ(r,e);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await fJ(r,e);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await mJ(r,e);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await Xw(r,e);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await fP(r,e);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await _J(r,e);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await Zw(r,e);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await mP(r,e);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await hP(r,e);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await _P(r,e);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await yJ(r,e);default:let s=r.body;(0,T.throwDefaultError)({output:t,parsedBody:s,exceptionCtor:Qw.SSOOIDCServiceException,errorCode:i})}},"deserializeAws_restJson1CreateTokenCommandError"),cJ=n(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return dJ(t,e);let r=it({$metadata:nt(t)}),i=(0,T.expectNonNull)((0,T.expectObject)(await Nh(t.body,e)),"body");return i.authorizationEndpoint!=null&&(r.authorizationEndpoint=(0,T.expectString)(i.authorizationEndpoint)),i.clientId!=null&&(r.clientId=(0,T.expectString)(i.clientId)),i.clientIdIssuedAt!=null&&(r.clientIdIssuedAt=(0,T.expectLong)(i.clientIdIssuedAt)),i.clientSecret!=null&&(r.clientSecret=(0,T.expectString)(i.clientSecret)),i.clientSecretExpiresAt!=null&&(r.clientSecretExpiresAt=(0,T.expectLong)(i.clientSecretExpiresAt)),i.tokenEndpoint!=null&&(r.tokenEndpoint=(0,T.expectString)(i.tokenEndpoint)),r},"deserializeAws_restJson1RegisterClientCommand");_t.deserializeAws_restJson1RegisterClientCommand=cJ;var dJ=n(async(t,e)=>{let r={...t,body:await eE(t.body,e)},i=tE(t,r.body);switch(i){case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await Xw(r,e);case"InvalidClientMetadataException":case"com.amazonaws.ssooidc#InvalidClientMetadataException":throw await hJ(r,e);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await Zw(r,e);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await mP(r,e);default:let s=r.body;(0,T.throwDefaultError)({output:t,parsedBody:s,exceptionCtor:Qw.SSOOIDCServiceException,errorCode:i})}},"deserializeAws_restJson1RegisterClientCommandError"),uJ=n(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return lJ(t,e);let r=it({$metadata:nt(t)}),i=(0,T.expectNonNull)((0,T.expectObject)(await Nh(t.body,e)),"body");return i.deviceCode!=null&&(r.deviceCode=(0,T.expectString)(i.deviceCode)),i.expiresIn!=null&&(r.expiresIn=(0,T.expectInt32)(i.expiresIn)),i.interval!=null&&(r.interval=(0,T.expectInt32)(i.interval)),i.userCode!=null&&(r.userCode=(0,T.expectString)(i.userCode)),i.verificationUri!=null&&(r.verificationUri=(0,T.expectString)(i.verificationUri)),i.verificationUriComplete!=null&&(r.verificationUriComplete=(0,T.expectString)(i.verificationUriComplete)),r},"deserializeAws_restJson1StartDeviceAuthorizationCommand");_t.deserializeAws_restJson1StartDeviceAuthorizationCommand=uJ;var lJ=n(async(t,e)=>{let r={...t,body:await eE(t.body,e)},i=tE(t,r.body);switch(i){case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await Xw(r,e);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await fP(r,e);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await Zw(r,e);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await hP(r,e);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await _P(r,e);default:let s=r.body;(0,T.throwDefaultError)({output:t,parsedBody:s,exceptionCtor:Qw.SSOOIDCServiceException,errorCode:i})}},"deserializeAws_restJson1StartDeviceAuthorizationCommandError"),it=T.map,pJ=n(async(t,e)=>{let r=it({}),i=t.body;i.error!=null&&(r.error=(0,T.expectString)(i.error)),i.error_description!=null&&(r.error_description=(0,T.expectString)(i.error_description));let s=new $t.AccessDeniedException({$metadata:nt(t),...r});return(0,T.decorateServiceException)(s,t.body)},"deserializeAws_restJson1AccessDeniedExceptionResponse"),fJ=n(async(t,e)=>{let r=it({}),i=t.body;i.error!=null&&(r.error=(0,T.expectString)(i.error)),i.error_description!=null&&(r.error_description=(0,T.expectString)(i.error_description));let s=new $t.AuthorizationPendingException({$metadata:nt(t),...r});return(0,T.decorateServiceException)(s,t.body)},"deserializeAws_restJson1AuthorizationPendingExceptionResponse"),mJ=n(async(t,e)=>{let r=it({}),i=t.body;i.error!=null&&(r.error=(0,T.expectString)(i.error)),i.error_description!=null&&(r.error_description=(0,T.expectString)(i.error_description));let s=new $t.ExpiredTokenException({$metadata:nt(t),...r});return(0,T.decorateServiceException)(s,t.body)},"deserializeAws_restJson1ExpiredTokenExceptionResponse"),Xw=n(async(t,e)=>{let r=it({}),i=t.body;i.error!=null&&(r.error=(0,T.expectString)(i.error)),i.error_description!=null&&(r.error_description=(0,T.expectString)(i.error_description));let s=new $t.InternalServerException({$metadata:nt(t),...r});return(0,T.decorateServiceException)(s,t.body)},"deserializeAws_restJson1InternalServerExceptionResponse"),fP=n(async(t,e)=>{let r=it({}),i=t.body;i.error!=null&&(r.error=(0,T.expectString)(i.error)),i.error_description!=null&&(r.error_description=(0,T.expectString)(i.error_description));let s=new $t.InvalidClientException({$metadata:nt(t),...r});return(0,T.decorateServiceException)(s,t.body)},"deserializeAws_restJson1InvalidClientExceptionResponse"),hJ=n(async(t,e)=>{let r=it({}),i=t.body;i.error!=null&&(r.error=(0,T.expectString)(i.error)),i.error_description!=null&&(r.error_description=(0,T.expectString)(i.error_description));let s=new $t.InvalidClientMetadataException({$metadata:nt(t),...r});return(0,T.decorateServiceException)(s,t.body)},"deserializeAws_restJson1InvalidClientMetadataExceptionResponse"),_J=n(async(t,e)=>{let r=it({}),i=t.body;i.error!=null&&(r.error=(0,T.expectString)(i.error)),i.error_description!=null&&(r.error_description=(0,T.expectString)(i.error_description));let s=new $t.InvalidGrantException({$metadata:nt(t),...r});return(0,T.decorateServiceException)(s,t.body)},"deserializeAws_restJson1InvalidGrantExceptionResponse"),Zw=n(async(t,e)=>{let r=it({}),i=t.body;i.error!=null&&(r.error=(0,T.expectString)(i.error)),i.error_description!=null&&(r.error_description=(0,T.expectString)(i.error_description));let s=new $t.InvalidRequestException({$metadata:nt(t),...r});return(0,T.decorateServiceException)(s,t.body)},"deserializeAws_restJson1InvalidRequestExceptionResponse"),mP=n(async(t,e)=>{let r=it({}),i=t.body;i.error!=null&&(r.error=(0,T.expectString)(i.error)),i.error_description!=null&&(r.error_description=(0,T.expectString)(i.error_description));let s=new $t.InvalidScopeException({$metadata:nt(t),...r});return(0,T.decorateServiceException)(s,t.body)},"deserializeAws_restJson1InvalidScopeExceptionResponse"),hP=n(async(t,e)=>{let r=it({}),i=t.body;i.error!=null&&(r.error=(0,T.expectString)(i.error)),i.error_description!=null&&(r.error_description=(0,T.expectString)(i.error_description));let s=new $t.SlowDownException({$metadata:nt(t),...r});return(0,T.decorateServiceException)(s,t.body)},"deserializeAws_restJson1SlowDownExceptionResponse"),_P=n(async(t,e)=>{let r=it({}),i=t.body;i.error!=null&&(r.error=(0,T.expectString)(i.error)),i.error_description!=null&&(r.error_description=(0,T.expectString)(i.error_description));let s=new $t.UnauthorizedClientException({$metadata:nt(t),...r});return(0,T.decorateServiceException)(s,t.body)},"deserializeAws_restJson1UnauthorizedClientExceptionResponse"),yJ=n(async(t,e)=>{let r=it({}),i=t.body;i.error!=null&&(r.error=(0,T.expectString)(i.error)),i.error_description!=null&&(r.error_description=(0,T.expectString)(i.error_description));let s=new $t.UnsupportedGrantTypeException({$metadata:nt(t),...r});return(0,T.decorateServiceException)(s,t.body)},"deserializeAws_restJson1UnsupportedGrantTypeExceptionResponse"),yP=n((t,e)=>t.filter(r=>r!=null).map(r=>r),"serializeAws_restJson1Scopes"),nt=n(t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),"deserializeMetadata"),gJ=n((t=new Uint8Array,e)=>t instanceof Uint8Array?Promise.resolve(t):e.streamCollector(t)||Promise.resolve(new Uint8Array),"collectBody"),wJ=n((t,e)=>gJ(t,e).then(r=>e.utf8Encoder(r)),"collectBodyString"),Nh=n((t,e)=>wJ(t,e).then(r=>r.length?JSON.parse(r):{}),"parseBody"),eE=n(async(t,e)=>{let r=await Nh(t,e);return r.message=r.message??r.Message,r},"parseErrorBody"),tE=n((t,e)=>{let r=n((o,a)=>Object.keys(o).find(c=>c.toLowerCase()===a.toLowerCase()),"findKey"),i=n(o=>{let a=o;return typeof a=="number"&&(a=a.toString()),a.indexOf(",")>=0&&(a=a.split(",")[0]),a.indexOf(":")>=0&&(a=a.split(":")[0]),a.indexOf("#")>=0&&(a=a.split("#")[1]),a},"sanitizeErrorCode"),s=r(t.headers,"x-amzn-errortype");if(s!==void 0)return i(t.headers[s]);if(e.code!==void 0)return i(e.code);if(e.__type!==void 0)return i(e.__type)},"loadRestJsonErrorCode")});var rE=u(xh=>{"use strict";Object.defineProperty(xh,"__esModule",{value:!0});xh.CreateTokenCommand=void 0;var EJ=ne(),vJ=me(),SJ=C(),gP=Sa(),wP=bh(),Na=class extends SJ.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,vJ.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,EJ.getEndpointPlugin)(r,Na.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"SSOOIDCClient",commandName:"CreateTokenCommand",inputFilterSensitiveLog:gP.CreateTokenRequestFilterSensitiveLog,outputFilterSensitiveLog:gP.CreateTokenResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,wP.serializeAws_restJson1CreateTokenCommand)(e,r)}deserialize(e,r){return(0,wP.deserializeAws_restJson1CreateTokenCommand)(e,r)}};n(Na,"CreateTokenCommand");xh.CreateTokenCommand=Na});var iE=u(Ah=>{"use strict";Object.defineProperty(Ah,"__esModule",{value:!0});Ah.RegisterClientCommand=void 0;var NJ=ne(),bJ=me(),xJ=C(),EP=Sa(),vP=bh(),ba=class extends xJ.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,bJ.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,NJ.getEndpointPlugin)(r,ba.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"SSOOIDCClient",commandName:"RegisterClientCommand",inputFilterSensitiveLog:EP.RegisterClientRequestFilterSensitiveLog,outputFilterSensitiveLog:EP.RegisterClientResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,vP.serializeAws_restJson1RegisterClientCommand)(e,r)}deserialize(e,r){return(0,vP.deserializeAws_restJson1RegisterClientCommand)(e,r)}};n(ba,"RegisterClientCommand");Ah.RegisterClientCommand=ba});var nE=u(Th=>{"use strict";Object.defineProperty(Th,"__esModule",{value:!0});Th.StartDeviceAuthorizationCommand=void 0;var AJ=ne(),TJ=me(),OJ=C(),SP=Sa(),NP=bh(),xa=class extends OJ.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,TJ.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,AJ.getEndpointPlugin)(r,xa.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"SSOOIDCClient",commandName:"StartDeviceAuthorizationCommand",inputFilterSensitiveLog:SP.StartDeviceAuthorizationRequestFilterSensitiveLog,outputFilterSensitiveLog:SP.StartDeviceAuthorizationResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,NP.serializeAws_restJson1StartDeviceAuthorizationCommand)(e,r)}deserialize(e,r){return(0,NP.deserializeAws_restJson1StartDeviceAuthorizationCommand)(e,r)}};n(xa,"StartDeviceAuthorizationCommand");Th.StartDeviceAuthorizationCommand=xa});var bP=u(Oh=>{"use strict";Object.defineProperty(Oh,"__esModule",{value:!0});Oh.resolveClientEndpointParameters=void 0;var PJ=n(t=>({...t,useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"awsssooidc"}),"resolveClientEndpointParameters");Oh.resolveClientEndpointParameters=PJ});var xP=u((zwe,RJ)=>{RJ.exports={name:"@aws-sdk/client-sso-oidc",description:"AWS SDK for JavaScript Sso Oidc Client for Node.js, Browser and React Native",version:"3.279.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","generate:client":"node ../../scripts/generate-clients/single-service --solo sso-oidc"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.272.0","@aws-sdk/fetch-http-handler":"3.272.0","@aws-sdk/hash-node":"3.272.0","@aws-sdk/invalid-dependency":"3.272.0","@aws-sdk/middleware-content-length":"3.272.0","@aws-sdk/middleware-endpoint":"3.272.0","@aws-sdk/middleware-host-header":"3.278.0","@aws-sdk/middleware-logger":"3.272.0","@aws-sdk/middleware-recursion-detection":"3.272.0","@aws-sdk/middleware-retry":"3.272.0","@aws-sdk/middleware-serde":"3.272.0","@aws-sdk/middleware-stack":"3.272.0","@aws-sdk/middleware-user-agent":"3.272.0","@aws-sdk/node-config-provider":"3.272.0","@aws-sdk/node-http-handler":"3.272.0","@aws-sdk/protocol-http":"3.272.0","@aws-sdk/smithy-client":"3.279.0","@aws-sdk/types":"3.272.0","@aws-sdk/url-parser":"3.272.0","@aws-sdk/util-base64":"3.208.0","@aws-sdk/util-body-length-browser":"3.188.0","@aws-sdk/util-body-length-node":"3.208.0","@aws-sdk/util-defaults-mode-browser":"3.279.0","@aws-sdk/util-defaults-mode-node":"3.279.0","@aws-sdk/util-endpoints":"3.272.0","@aws-sdk/util-retry":"3.272.0","@aws-sdk/util-user-agent-browser":"3.272.0","@aws-sdk/util-user-agent-node":"3.272.0","@aws-sdk/util-utf8":"3.254.0",tslib:"^2.3.1"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.208.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.19.2",typescript:"~4.6.2"},overrides:{typedoc:{typescript:"~4.6.2"}},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso-oidc",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso-oidc"}}});var FP=u(Ph=>{"use strict";Object.defineProperty(Ph,"__esModule",{value:!0});Ph.ruleSet=void 0;var CP="required",gi="fn",wi="argv",Aa="ref",sE="PartitionResult",Lr="tree",Ad="error",Td="endpoint",AP={[CP]:!1,type:"String"},TP={[CP]:!0,default:!1,type:"Boolean"},kP={[Aa]:"Endpoint"},MP={[gi]:"booleanEquals",[wi]:[{[Aa]:"UseFIPS"},!0]},DP={[gi]:"booleanEquals",[wi]:[{[Aa]:"UseDualStack"},!0]},zr={},OP={[gi]:"booleanEquals",[wi]:[!0,{[gi]:"getAttr",[wi]:[{[Aa]:sE},"supportsFIPS"]}]},PP={[gi]:"booleanEquals",[wi]:[!0,{[gi]:"getAttr",[wi]:[{[Aa]:sE},"supportsDualStack"]}]},RP=[kP],IP=[MP],qP=[DP],IJ={version:"1.0",parameters:{Region:AP,UseDualStack:TP,UseFIPS:TP,Endpoint:AP},rules:[{conditions:[{[gi]:"aws.partition",[wi]:[{[Aa]:"Region"}],assign:sE}],type:Lr,rules:[{conditions:[{[gi]:"isSet",[wi]:RP},{[gi]:"parseURL",[wi]:RP,assign:"url"}],type:Lr,rules:[{conditions:IP,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Ad},{type:Lr,rules:[{conditions:qP,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Ad},{endpoint:{url:kP,properties:zr,headers:zr},type:Td}]}]},{conditions:[MP,DP],type:Lr,rules:[{conditions:[OP,PP],type:Lr,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:zr,headers:zr},type:Td}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Ad}]},{conditions:IP,type:Lr,rules:[{conditions:[OP],type:Lr,rules:[{type:Lr,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:zr,headers:zr},type:Td}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:Ad}]},{conditions:qP,type:Lr,rules:[{conditions:[PP],type:Lr,rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:zr,headers:zr},type:Td}]},{error:"DualStack is enabled but this partition does not support DualStack",type:Ad}]},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:zr,headers:zr},type:Td}]}]};Ph.ruleSet=IJ});var LP=u(Rh=>{"use strict";Object.defineProperty(Rh,"__esModule",{value:!0});Rh.defaultEndpointResolver=void 0;var qJ=gd(),CJ=FP(),kJ=n((t,e={})=>(0,qJ.resolveEndpoint)(CJ.ruleSet,{endpointParams:t,logger:e.logger}),"defaultEndpointResolver");Rh.defaultEndpointResolver=kJ});var WP=u(Ih=>{"use strict";Object.defineProperty(Ih,"__esModule",{value:!0});Ih.getRuntimeConfig=void 0;var MJ=C(),DJ=Mn(),zP=od(),UP=di(),FJ=LP(),LJ=n(t=>({apiVersion:"2019-06-10",base64Decoder:t?.base64Decoder??zP.fromBase64,base64Encoder:t?.base64Encoder??zP.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??FJ.defaultEndpointResolver,logger:t?.logger??new MJ.NoOpLogger,serviceId:t?.serviceId??"SSO OIDC",urlParser:t?.urlParser??DJ.parseUrl,utf8Decoder:t?.utf8Decoder??UP.fromUtf8,utf8Encoder:t?.utf8Encoder??UP.toUtf8}),"getRuntimeConfig");Ih.getRuntimeConfig=LJ});var $P=u(Ch=>{"use strict";Object.defineProperty(Ch,"__esModule",{value:!0});Ch.getRuntimeConfig=void 0;var zJ=(A(),b(x)),UJ=zJ.__importDefault(xP()),qh=_r(),WJ=Jc(),jP=ci(),Od=rn(),VP=Yc(),jJ=Qc(),VJ=Mt(),$J=sd(),HJ=WP(),GJ=C(),BJ=vd(),JJ=C(),KJ=n(t=>{(0,JJ.emitWarningIfUnsupportedVersion)(process.version);let e=(0,BJ.resolveDefaultsModeConfig)(t),r=n(()=>e().then(GJ.loadConfigsForDefaultMode),"defaultConfigProvider"),i=(0,HJ.getRuntimeConfig)(t);return{...i,...t,runtime:"node",defaultsMode:e,bodyLengthChecker:t?.bodyLengthChecker??jJ.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,$J.defaultUserAgent)({serviceId:i.serviceId,clientVersion:UJ.default.version}),maxAttempts:t?.maxAttempts??(0,Od.loadConfig)(jP.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),region:t?.region??(0,Od.loadConfig)(qh.NODE_REGION_CONFIG_OPTIONS,qh.NODE_REGION_CONFIG_FILE_OPTIONS),requestHandler:t?.requestHandler??new VP.NodeHttpHandler(r),retryMode:t?.retryMode??(0,Od.loadConfig)({...jP.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||VJ.DEFAULT_RETRY_MODE}),sha256:t?.sha256??WJ.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??VP.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,Od.loadConfig)(qh.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS),useFipsEndpoint:t?.useFipsEndpoint??(0,Od.loadConfig)(qh.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS)}},"getRuntimeConfig");Ch.getRuntimeConfig=KJ});var oE=u(Mh=>{"use strict";Object.defineProperty(Mh,"__esModule",{value:!0});Mh.SSOOIDCClient=void 0;var YJ=_r(),QJ=Ac(),XJ=ne(),HP=Tc(),ZJ=Oc(),e4=Pc(),GP=ci(),BP=zc(),t4=C(),r4=bP(),i4=$P(),kh=class extends t4.Client{constructor(e){let r=(0,i4.getRuntimeConfig)(e),i=(0,r4.resolveClientEndpointParameters)(r),s=(0,YJ.resolveRegionConfig)(i),o=(0,XJ.resolveEndpointConfig)(s),a=(0,GP.resolveRetryConfig)(o),c=(0,HP.resolveHostHeaderConfig)(a),l=(0,BP.resolveUserAgentConfig)(c);super(l),this.config=l,this.middlewareStack.use((0,GP.getRetryPlugin)(this.config)),this.middlewareStack.use((0,QJ.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,HP.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,ZJ.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,e4.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,BP.getUserAgentPlugin)(this.config))}destroy(){super.destroy()}};n(kh,"SSOOIDCClient");Mh.SSOOIDCClient=kh});var JP=u(Fh=>{"use strict";Object.defineProperty(Fh,"__esModule",{value:!0});Fh.SSOOIDC=void 0;var n4=rE(),s4=iE(),o4=nE(),a4=oE(),Dh=class extends a4.SSOOIDCClient{createToken(e,r,i){let s=new n4.CreateTokenCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}registerClient(e,r,i){let s=new s4.RegisterClientCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}startDeviceAuthorization(e,r,i){let s=new o4.StartDeviceAuthorizationCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}};n(Dh,"SSOOIDC");Fh.SSOOIDC=Dh});var KP=u(Pd=>{"use strict";Object.defineProperty(Pd,"__esModule",{value:!0});var aE=(A(),b(x));aE.__exportStar(rE(),Pd);aE.__exportStar(iE(),Pd);aE.__exportStar(nE(),Pd)});var YP=u(cE=>{"use strict";Object.defineProperty(cE,"__esModule",{value:!0});var c4=(A(),b(x));c4.__exportStar(Sa(),cE)});var dE=u(hn=>{"use strict";Object.defineProperty(hn,"__esModule",{value:!0});hn.SSOOIDCServiceException=void 0;var Lh=(A(),b(x));Lh.__exportStar(JP(),hn);Lh.__exportStar(oE(),hn);Lh.__exportStar(KP(),hn);Lh.__exportStar(YP(),hn);var d4=Sh();Object.defineProperty(hn,"SSOOIDCServiceException",{enumerable:!0,get:function(){return d4.SSOOIDCServiceException}})});var QP=u(zh=>{"use strict";Object.defineProperty(zh,"__esModule",{value:!0});zh.getSsoOidcClient=void 0;var u4=dE(),uE={},l4=n(t=>{if(uE[t])return uE[t];let e=new u4.SSOOIDCClient({region:t});return uE[t]=e,e},"getSsoOidcClient");zh.getSsoOidcClient=l4});var XP=u(Uh=>{"use strict";Object.defineProperty(Uh,"__esModule",{value:!0});Uh.getNewSsoOidcToken=void 0;var p4=dE(),f4=QP(),m4=n((t,e)=>(0,f4.getSsoOidcClient)(e).send(new p4.CreateTokenCommand({clientId:t.clientId,clientSecret:t.clientSecret,refreshToken:t.refreshToken,grantType:"refresh_token"})),"getNewSsoOidcToken");Uh.getNewSsoOidcToken=m4});var ZP=u(Wh=>{"use strict";Object.defineProperty(Wh,"__esModule",{value:!0});Wh.validateTokenExpiry=void 0;var h4=ee(),_4=Eh(),y4=n(t=>{if(t.expiration&&t.expiration.getTime()<Date.now())throw new h4.TokenProviderError(`Token is expired. ${_4.REFRESH_MESSAGE}`,!1)},"validateTokenExpiry");Wh.validateTokenExpiry=y4});var eR=u(jh=>{"use strict";Object.defineProperty(jh,"__esModule",{value:!0});jh.validateTokenKey=void 0;var g4=ee(),w4=Eh(),E4=n((t,e,r=!1)=>{if(typeof e>"u")throw new g4.TokenProviderError(`Value not present for '${t}' in SSO Token${r?". Cannot refresh":""}. ${w4.REFRESH_MESSAGE}`,!1)},"validateTokenKey");jh.validateTokenKey=E4});var tR=u(Vh=>{"use strict";Object.defineProperty(Vh,"__esModule",{value:!0});Vh.writeSSOTokenToFile=void 0;var v4=xr(),S4=U("fs"),{writeFile:N4}=S4.promises,b4=n((t,e)=>{let r=(0,v4.getSSOTokenFilepath)(t),i=JSON.stringify(e,null,2);return N4(r,i)},"writeSSOTokenToFile");Vh.writeSSOTokenToFile=b4});var lE=u(Hh=>{"use strict";Object.defineProperty(Hh,"__esModule",{value:!0});Hh.fromSso=void 0;var Rd=ee(),$h=xr(),rR=Eh(),x4=XP(),iR=ZP(),is=eR(),A4=tR(),nR=new Date(0),T4=n((t={})=>async()=>{let e=await(0,$h.parseKnownFiles)(t),r=(0,$h.getProfileName)(t),i=e[r];if(i){if(!i.sso_session)throw new Rd.TokenProviderError(`Profile '${r}' is missing required property 'sso_session'.`)}else throw new Rd.TokenProviderError(`Profile '${r}' could not be found in shared credentials file.`,!1);let s=i.sso_session,a=(await(0,$h.loadSsoSessionData)(t))[s];if(!a)throw new Rd.TokenProviderError(`Sso session '${s}' could not be found in shared credentials file.`,!1);for(let _ of["sso_start_url","sso_region"])if(!a[_])throw new Rd.TokenProviderError(`Sso session '${s}' is missing required property '${_}'.`,!1);let c=a.sso_start_url,l=a.sso_region,p;try{p=await(0,$h.getSSOTokenFromFile)(s)}catch{throw new Rd.TokenProviderError(`The SSO session token associated with profile=${r} was not found or is invalid. ${rR.REFRESH_MESSAGE}`,!1)}(0,is.validateTokenKey)("accessToken",p.accessToken),(0,is.validateTokenKey)("expiresAt",p.expiresAt);let{accessToken:f,expiresAt:m}=p,h={token:f,expiration:new Date(m)};if(h.expiration.getTime()-Date.now()>rR.EXPIRE_WINDOW_MS)return h;if(Date.now()-nR.getTime()<30*1e3)return(0,iR.validateTokenExpiry)(h),h;(0,is.validateTokenKey)("clientId",p.clientId,!0),(0,is.validateTokenKey)("clientSecret",p.clientSecret,!0),(0,is.validateTokenKey)("refreshToken",p.refreshToken,!0);try{nR.setTime(Date.now());let _=await(0,x4.getNewSsoOidcToken)(p,l);(0,is.validateTokenKey)("accessToken",_.accessToken),(0,is.validateTokenKey)("expiresIn",_.expiresIn);let w=new Date(Date.now()+_.expiresIn*1e3);try{await(0,A4.writeSSOTokenToFile)(s,{...p,accessToken:_.accessToken,expiresAt:w.toISOString(),refreshToken:_.refreshToken})}catch{}return{token:_.accessToken,expiration:w}}catch{return(0,iR.validateTokenExpiry)(h),h}},"fromSso");Hh.fromSso=T4});var sR=u(Gh=>{"use strict";Object.defineProperty(Gh,"__esModule",{value:!0});Gh.fromStatic=void 0;var O4=ee(),P4=n(({token:t})=>async()=>{if(!t||!t.token)throw new O4.TokenProviderError("Please pass a valid token to fromStatic",!1);return t},"fromStatic");Gh.fromStatic=P4});var oR=u(Bh=>{"use strict";Object.defineProperty(Bh,"__esModule",{value:!0});Bh.nodeProvider=void 0;var pE=ee(),R4=lE(),I4=n((t={})=>(0,pE.memoize)((0,pE.chain)((0,R4.fromSso)(t),async()=>{throw new pE.TokenProviderError("Could not load token from any providers",!1)}),e=>e.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5,e=>e.expiration!==void 0),"nodeProvider");Bh.nodeProvider=I4});var aR=u(Id=>{"use strict";Object.defineProperty(Id,"__esModule",{value:!0});var fE=(A(),b(x));fE.__exportStar(lE(),Id);fE.__exportStar(sR(),Id);fE.__exportStar(oR(),Id)});var dR=u(Jh=>{"use strict";Object.defineProperty(Jh,"__esModule",{value:!0});Jh.resolveSSOCredentials=void 0;var cR=pP(),qd=ee(),q4=xr(),C4=aR(),k4=15*60*1e3,Cd=!1,M4=n(async({ssoStartUrl:t,ssoSession:e,ssoAccountId:r,ssoRegion:i,ssoRoleName:s,ssoClient:o,profile:a})=>{let c,l="To refresh this SSO session run aws sso login with the corresponding profile.";if(e)try{let S=await(0,C4.fromSso)({profile:a})();c={accessToken:S.token,expiresAt:new Date(S.expiration).toISOString()}}catch(S){throw new qd.CredentialsProviderError(S.message,Cd)}else try{c=await(0,q4.getSSOTokenFromFile)(t)}catch{throw new qd.CredentialsProviderError(`The SSO session associated with this profile is invalid. ${l}`,Cd)}if(new Date(c.expiresAt).getTime()-Date.now()<=k4)throw new qd.CredentialsProviderError(`The SSO session associated with this profile has expired. ${l}`,Cd);let{accessToken:p}=c,f=o||new cR.SSOClient({region:i}),m;try{m=await f.send(new cR.GetRoleCredentialsCommand({accountId:r,roleName:s,accessToken:p}))}catch(S){throw qd.CredentialsProviderError.from(S,Cd)}let{roleCredentials:{accessKeyId:h,secretAccessKey:_,sessionToken:w,expiration:g}={}}=m;if(!h||!_||!w||!g)throw new qd.CredentialsProviderError("SSO returns an invalid temporary credential.",Cd);return{accessKeyId:h,secretAccessKey:_,sessionToken:w,expiration:new Date(g)}},"resolveSSOCredentials");Jh.resolveSSOCredentials=M4});var mE=u(Kh=>{"use strict";Object.defineProperty(Kh,"__esModule",{value:!0});Kh.validateSsoProfile=void 0;var D4=ee(),F4=n(t=>{let{sso_start_url:e,sso_account_id:r,sso_region:i,sso_role_name:s}=t;if(!e||!r||!i||!s)throw new D4.CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(t).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,!1);return t},"validateSsoProfile");Kh.validateSsoProfile=F4});var lR=u(Yh=>{"use strict";Object.defineProperty(Yh,"__esModule",{value:!0});Yh.fromSSO=void 0;var kd=ee(),hE=xr(),L4=ew(),uR=dR(),z4=mE(),U4=n((t={})=>async()=>{let{ssoStartUrl:e,ssoAccountId:r,ssoRegion:i,ssoRoleName:s,ssoClient:o,ssoSession:a}=t,c=(0,hE.getProfileName)(t);if(!e&&!r&&!i&&!s&&!a){let p=(await(0,hE.parseKnownFiles)(t))[c];if(!p)throw new kd.CredentialsProviderError(`Profile ${c} was not found.`);if(!(0,L4.isSsoProfile)(p))throw new kd.CredentialsProviderError(`Profile ${c} is not configured with SSO credentials.`);if(p?.sso_session){let S=(await(0,hE.loadSsoSessionData)(t))[p.sso_session],ie=` configurations in profile ${c} and sso-session ${p.sso_session}`;if(i&&i!==S.sso_region)throw new kd.CredentialsProviderError("Conflicting SSO region"+ie,!1);if(e&&e!==S.sso_start_url)throw new kd.CredentialsProviderError("Conflicting SSO start_url"+ie,!1);p.sso_region=S.sso_region,p.sso_start_url=S.sso_start_url}let{sso_start_url:f,sso_account_id:m,sso_region:h,sso_role_name:_,sso_session:w}=(0,z4.validateSsoProfile)(p);return(0,uR.resolveSSOCredentials)({ssoStartUrl:f,ssoSession:w,ssoAccountId:m,ssoRegion:h,ssoRoleName:_,ssoClient:o,profile:c})}else{if(!e||!r||!i||!s)throw new kd.CredentialsProviderError('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"');return(0,uR.resolveSSOCredentials)({ssoStartUrl:e,ssoSession:a,ssoAccountId:r,ssoRegion:i,ssoRoleName:s,ssoClient:o,profile:c})}},"fromSSO");Yh.fromSSO=U4});var fR=u(pR=>{"use strict";Object.defineProperty(pR,"__esModule",{value:!0})});var Xh=u(Ta=>{"use strict";Object.defineProperty(Ta,"__esModule",{value:!0});var Qh=(A(),b(x));Qh.__exportStar(lR(),Ta);Qh.__exportStar(ew(),Ta);Qh.__exportStar(fR(),Ta);Qh.__exportStar(mE(),Ta)});var hR=u(Oa=>{"use strict";Object.defineProperty(Oa,"__esModule",{value:!0});Oa.resolveSsoCredentials=Oa.isSsoProfile=void 0;var mR=Xh(),W4=Xh();Object.defineProperty(Oa,"isSsoProfile",{enumerable:!0,get:function(){return W4.isSsoProfile}});var j4=n(t=>{let{sso_start_url:e,sso_account_id:r,sso_session:i,sso_region:s,sso_role_name:o}=(0,mR.validateSsoProfile)(t);return(0,mR.fromSSO)({ssoStartUrl:e,ssoAccountId:r,ssoSession:i,ssoRegion:s,ssoRoleName:o})()},"resolveSsoCredentials");Oa.resolveSsoCredentials=j4});var _R=u(Pa=>{"use strict";Object.defineProperty(Pa,"__esModule",{value:!0});Pa.resolveStaticCredentials=Pa.isStaticCredsProfile=void 0;var V4=n(t=>Boolean(t)&&typeof t=="object"&&typeof t.aws_access_key_id=="string"&&typeof t.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof t.aws_session_token)>-1,"isStaticCredsProfile");Pa.isStaticCredsProfile=V4;var $4=n(t=>Promise.resolve({accessKeyId:t.aws_access_key_id,secretAccessKey:t.aws_secret_access_key,sessionToken:t.aws_session_token}),"resolveStaticCredentials");Pa.resolveStaticCredentials=$4});var _E=u(Zh=>{"use strict";Object.defineProperty(Zh,"__esModule",{value:!0});Zh.fromWebToken=void 0;var H4=ee(),G4=n(t=>()=>{let{roleArn:e,roleSessionName:r,webIdentityToken:i,providerId:s,policyArns:o,policy:a,durationSeconds:c,roleAssumerWithWebIdentity:l}=t;if(!l)throw new H4.CredentialsProviderError(`Role Arn '${e}' needs to be assumed with web identity, but no role assumption callback was provided.`,!1);return l({RoleArn:e,RoleSessionName:r??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:i,ProviderId:s,PolicyArns:o,Policy:a,DurationSeconds:c})},"fromWebToken");Zh.fromWebToken=G4});var yR=u(e_=>{"use strict";Object.defineProperty(e_,"__esModule",{value:!0});e_.fromTokenFile=void 0;var B4=ee(),J4=U("fs"),K4=_E(),Y4="AWS_WEB_IDENTITY_TOKEN_FILE",Q4="AWS_ROLE_ARN",X4="AWS_ROLE_SESSION_NAME",Z4=n((t={})=>async()=>eK(t),"fromTokenFile");e_.fromTokenFile=Z4;var eK=n(t=>{var e,r,i;let s=(e=t?.webIdentityTokenFile)!==null&&e!==void 0?e:process.env[Y4],o=(r=t?.roleArn)!==null&&r!==void 0?r:process.env[Q4],a=(i=t?.roleSessionName)!==null&&i!==void 0?i:process.env[X4];if(!s||!o)throw new B4.CredentialsProviderError("Web identity configuration not specified");return(0,K4.fromWebToken)({...t,webIdentityToken:(0,J4.readFileSync)(s,{encoding:"ascii"}),roleArn:o,roleSessionName:a})()},"resolveTokenFile")});var yE=u(t_=>{"use strict";Object.defineProperty(t_,"__esModule",{value:!0});var gR=(A(),b(x));gR.__exportStar(yR(),t_);gR.__exportStar(_E(),t_)});var wR=u(Ra=>{"use strict";Object.defineProperty(Ra,"__esModule",{value:!0});Ra.resolveWebIdentityCredentials=Ra.isWebIdentityProfile=void 0;var tK=yE(),rK=n(t=>Boolean(t)&&typeof t=="object"&&typeof t.web_identity_token_file=="string"&&typeof t.role_arn=="string"&&["undefined","string"].indexOf(typeof t.role_session_name)>-1,"isWebIdentityProfile");Ra.isWebIdentityProfile=rK;var iK=n(async(t,e)=>(0,tK.fromTokenFile)({webIdentityTokenFile:t.web_identity_token_file,roleArn:t.role_arn,roleSessionName:t.role_session_name,roleAssumerWithWebIdentity:e.roleAssumerWithWebIdentity})(),"resolveWebIdentityCredentials");Ra.resolveWebIdentityCredentials=iK});var Yg=u(i_=>{"use strict";Object.defineProperty(i_,"__esModule",{value:!0});i_.resolveProfileData=void 0;var nK=ee(),ER=fx(),vR=gx(),SR=hR(),r_=_R(),NR=wR(),sK=n(async(t,e,r,i={})=>{let s=e[t];if(Object.keys(i).length>0&&(0,r_.isStaticCredsProfile)(s))return(0,r_.resolveStaticCredentials)(s);if((0,ER.isAssumeRoleProfile)(s))return(0,ER.resolveAssumeRoleCredentials)(t,e,r,i);if((0,r_.isStaticCredsProfile)(s))return(0,r_.resolveStaticCredentials)(s);if((0,NR.isWebIdentityProfile)(s))return(0,NR.resolveWebIdentityCredentials)(s,r);if((0,vR.isProcessProfile)(s))return(0,vR.resolveProcessCredentials)(r,t);if((0,SR.isSsoProfile)(s))return(0,SR.resolveSsoCredentials)(s);throw new nK.CredentialsProviderError(`Profile ${t} could not be found or parsed in shared credentials file.`)},"resolveProfileData");i_.resolveProfileData=sK});var xR=u(n_=>{"use strict";Object.defineProperty(n_,"__esModule",{value:!0});n_.fromIni=void 0;var bR=xr(),oK=Yg(),aK=n((t={})=>async()=>{let e=await(0,bR.parseKnownFiles)(t);return(0,oK.resolveProfileData)((0,bR.getProfileName)(t),e,t)},"fromIni");n_.fromIni=aK});var AR=u(gE=>{"use strict";Object.defineProperty(gE,"__esModule",{value:!0});var cK=(A(),b(x));cK.__exportStar(xR(),gE)});var TR=u(ns=>{"use strict";Object.defineProperty(ns,"__esModule",{value:!0});ns.remoteProvider=ns.ENV_IMDS_DISABLED=void 0;var s_=rf(),dK=ee();ns.ENV_IMDS_DISABLED="AWS_EC2_METADATA_DISABLED";var uK=n(t=>process.env[s_.ENV_CMDS_RELATIVE_URI]||process.env[s_.ENV_CMDS_FULL_URI]?(0,s_.fromContainerMetadata)(t):process.env[ns.ENV_IMDS_DISABLED]?async()=>{throw new dK.CredentialsProviderError("EC2 Instance Metadata Service access disabled")}:(0,s_.fromInstanceMetadata)(t),"remoteProvider");ns.remoteProvider=uK});var OR=u(o_=>{"use strict";Object.defineProperty(o_,"__esModule",{value:!0});o_.defaultProvider=void 0;var lK=kg(),pK=AR(),fK=Zg(),mK=Xh(),hK=yE(),wE=ee(),_K=xr(),yK=TR(),gK=n((t={})=>(0,wE.memoize)((0,wE.chain)(...t.profile||process.env[_K.ENV_PROFILE]?[]:[(0,lK.fromEnv)()],(0,mK.fromSSO)(t),(0,pK.fromIni)(t),(0,fK.fromProcess)(t),(0,hK.fromTokenFile)(t),(0,yK.remoteProvider)(t),async()=>{throw new wE.CredentialsProviderError("Could not load credentials from any providers",!1)}),e=>e.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5,e=>e.expiration!==void 0),"defaultProvider");o_.defaultProvider=gK});var vE=u(EE=>{"use strict";Object.defineProperty(EE,"__esModule",{value:!0});var wK=(A(),b(x));wK.__exportStar(OR(),EE)});var KR=u(a_=>{"use strict";Object.defineProperty(a_,"__esModule",{value:!0});a_.ruleSet=void 0;var LR="required",M="type",J="fn",K="argv",_n="ref",ss="properties",os="headers",PR=!1,EK=!0,NE="PartitionResult",Ht="tree",as="booleanEquals",Ve="stringEquals",zR="sigv4",UR="us-east-1",WR="sts",fe="endpoint",jR="https://sts.{Region}.{PartitionResult#dnsSuffix}",Md="error",bE="getAttr",RR={[LR]:!1,[M]:"String"},SE={[LR]:!0,default:!1,[M]:"Boolean"},$e={[_n]:"Region"},VR={[_n]:"UseFIPS"},$R={[_n]:"UseDualStack"},IR={[J]:"isSet",[K]:[{[_n]:"Endpoint"}]},HR={[_n]:"Endpoint"},Ye={url:"https://sts.amazonaws.com",[ss]:{authSchemes:[{name:zR,signingRegion:UR,signingName:WR}]},[os]:{}},Ei={},qR={conditions:[{[J]:Ve,[K]:[$e,"aws-global"]}],[fe]:Ye,[M]:fe},GR={[J]:as,[K]:[VR,!0]},BR={[J]:as,[K]:[$R,!0]},CR={[J]:as,[K]:[!0,{[J]:bE,[K]:[{[_n]:NE},"supportsFIPS"]}]},JR={[_n]:NE},kR={[J]:as,[K]:[!0,{[J]:bE,[K]:[JR,"supportsDualStack"]}]},MR={url:jR,[ss]:{},[os]:{}},vK=[HR],DR=[GR],FR=[BR],SK={version:"1.0",parameters:{Region:RR,UseDualStack:SE,UseFIPS:SE,Endpoint:RR,UseGlobalEndpoint:SE},rules:[{conditions:[{[J]:"aws.partition",[K]:[$e],assign:NE}],[M]:Ht,rules:[{conditions:[{[J]:as,[K]:[{[_n]:"UseGlobalEndpoint"},EK]},{[J]:as,[K]:[VR,PR]},{[J]:as,[K]:[$R,PR]},{[J]:"not",[K]:[IR]}],[M]:Ht,rules:[{conditions:[{[J]:Ve,[K]:[$e,"ap-northeast-1"]}],endpoint:Ye,[M]:fe},{conditions:[{[J]:Ve,[K]:[$e,"ap-south-1"]}],endpoint:Ye,[M]:fe},{conditions:[{[J]:Ve,[K]:[$e,"ap-southeast-1"]}],endpoint:Ye,[M]:fe},{conditions:[{[J]:Ve,[K]:[$e,"ap-southeast-2"]}],endpoint:Ye,[M]:fe},qR,{conditions:[{[J]:Ve,[K]:[$e,"ca-central-1"]}],endpoint:Ye,[M]:fe},{conditions:[{[J]:Ve,[K]:[$e,"eu-central-1"]}],endpoint:Ye,[M]:fe},{conditions:[{[J]:Ve,[K]:[$e,"eu-north-1"]}],endpoint:Ye,[M]:fe},{conditions:[{[J]:Ve,[K]:[$e,"eu-west-1"]}],endpoint:Ye,[M]:fe},{conditions:[{[J]:Ve,[K]:[$e,"eu-west-2"]}],endpoint:Ye,[M]:fe},{conditions:[{[J]:Ve,[K]:[$e,"eu-west-3"]}],endpoint:Ye,[M]:fe},{conditions:[{[J]:Ve,[K]:[$e,"sa-east-1"]}],endpoint:Ye,[M]:fe},{conditions:[{[J]:Ve,[K]:[$e,UR]}],endpoint:Ye,[M]:fe},{conditions:[{[J]:Ve,[K]:[$e,"us-east-2"]}],endpoint:Ye,[M]:fe},{conditions:[{[J]:Ve,[K]:[$e,"us-west-1"]}],endpoint:Ye,[M]:fe},{conditions:[{[J]:Ve,[K]:[$e,"us-west-2"]}],endpoint:Ye,[M]:fe},{endpoint:{url:jR,[ss]:{authSchemes:[{name:zR,signingRegion:"{Region}",signingName:WR}]},[os]:Ei},[M]:fe}]},{conditions:[IR,{[J]:"parseURL",[K]:vK,assign:"url"}],[M]:Ht,rules:[{conditions:DR,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[M]:Md},{[M]:Ht,rules:[{conditions:FR,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[M]:Md},{endpoint:{url:HR,[ss]:Ei,[os]:Ei},[M]:fe}]}]},{conditions:[GR,BR],[M]:Ht,rules:[{conditions:[CR,kR],[M]:Ht,rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",[ss]:Ei,[os]:Ei},[M]:fe}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[M]:Md}]},{conditions:DR,[M]:Ht,rules:[{conditions:[CR],[M]:Ht,rules:[{[M]:Ht,rules:[{conditions:[{[J]:Ve,[K]:["aws-us-gov",{[J]:bE,[K]:[JR,"name"]}]}],endpoint:MR,[M]:fe},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",[ss]:Ei,[os]:Ei},[M]:fe}]}]},{error:"FIPS is enabled but this partition does not support FIPS",[M]:Md}]},{conditions:FR,[M]:Ht,rules:[{conditions:[kR],[M]:Ht,rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",[ss]:Ei,[os]:Ei},[M]:fe}]},{error:"DualStack is enabled but this partition does not support DualStack",[M]:Md}]},{[M]:Ht,rules:[qR,{endpoint:MR,[M]:fe}]}]}]};a_.ruleSet=SK});var YR=u(c_=>{"use strict";Object.defineProperty(c_,"__esModule",{value:!0});c_.defaultEndpointResolver=void 0;var NK=gd(),bK=KR(),xK=n((t,e={})=>(0,NK.resolveEndpoint)(bK.ruleSet,{endpointParams:t,logger:e.logger}),"defaultEndpointResolver");c_.defaultEndpointResolver=xK});var ZR=u(d_=>{"use strict";Object.defineProperty(d_,"__esModule",{value:!0});d_.getRuntimeConfig=void 0;var AK=C(),TK=Mn(),QR=od(),XR=di(),OK=YR(),PK=n(t=>({apiVersion:"2011-06-15",base64Decoder:t?.base64Decoder??QR.fromBase64,base64Encoder:t?.base64Encoder??QR.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??OK.defaultEndpointResolver,logger:t?.logger??new AK.NoOpLogger,serviceId:t?.serviceId??"STS",urlParser:t?.urlParser??TK.parseUrl,utf8Decoder:t?.utf8Decoder??XR.fromUtf8,utf8Encoder:t?.utf8Encoder??XR.toUtf8}),"getRuntimeConfig");d_.getRuntimeConfig=PK});var rI=u(l_=>{"use strict";Object.defineProperty(l_,"__esModule",{value:!0});l_.getRuntimeConfig=void 0;var RK=(A(),b(x)),IK=RK.__importDefault(x0()),qK=qg(),u_=_r(),CK=vE(),kK=Jc(),eI=ci(),Dd=rn(),tI=Yc(),MK=Qc(),DK=Mt(),FK=sd(),LK=ZR(),zK=C(),UK=vd(),WK=C(),jK=n(t=>{(0,WK.emitWarningIfUnsupportedVersion)(process.version);let e=(0,UK.resolveDefaultsModeConfig)(t),r=n(()=>e().then(zK.loadConfigsForDefaultMode),"defaultConfigProvider"),i=(0,LK.getRuntimeConfig)(t);return{...i,...t,runtime:"node",defaultsMode:e,bodyLengthChecker:t?.bodyLengthChecker??MK.calculateBodyLength,credentialDefaultProvider:t?.credentialDefaultProvider??(0,qK.decorateDefaultCredentialProvider)(CK.defaultProvider),defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,FK.defaultUserAgent)({serviceId:i.serviceId,clientVersion:IK.default.version}),maxAttempts:t?.maxAttempts??(0,Dd.loadConfig)(eI.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),region:t?.region??(0,Dd.loadConfig)(u_.NODE_REGION_CONFIG_OPTIONS,u_.NODE_REGION_CONFIG_FILE_OPTIONS),requestHandler:t?.requestHandler??new tI.NodeHttpHandler(r),retryMode:t?.retryMode??(0,Dd.loadConfig)({...eI.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||DK.DEFAULT_RETRY_MODE}),sha256:t?.sha256??kK.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??tI.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,Dd.loadConfig)(u_.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS),useFipsEndpoint:t?.useFipsEndpoint??(0,Dd.loadConfig)(u_.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS)}},"getRuntimeConfig");l_.getRuntimeConfig=jK});var f_=u(p_=>{"use strict";Object.defineProperty(p_,"__esModule",{value:!0});p_.STSClient=void 0;var VK=_r(),$K=Ac(),HK=ne(),iI=Tc(),GK=Oc(),BK=Pc(),nI=ci(),JK=N0(),sI=zc(),KK=C(),YK=b0(),QK=rI(),Ia=class extends KK.Client{constructor(e){let r=(0,QK.getRuntimeConfig)(e),i=(0,YK.resolveClientEndpointParameters)(r),s=(0,VK.resolveRegionConfig)(i),o=(0,HK.resolveEndpointConfig)(s),a=(0,nI.resolveRetryConfig)(o),c=(0,iI.resolveHostHeaderConfig)(a),l=(0,JK.resolveStsAuthConfig)(c,{stsClientCtor:Ia}),p=(0,sI.resolveUserAgentConfig)(l);super(p),this.config=p,this.middlewareStack.use((0,nI.getRetryPlugin)(this.config)),this.middlewareStack.use((0,$K.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,iI.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,GK.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,BK.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,sI.getUserAgentPlugin)(this.config))}destroy(){super.destroy()}};n(Ia,"STSClient");p_.STSClient=Ia});var oI=u(h_=>{"use strict";Object.defineProperty(h_,"__esModule",{value:!0});h_.STS=void 0;var XK=vp(),ZK=Ag(),e6=bp(),t6=Tg(),r6=Og(),i6=Pg(),n6=Rg(),s6=Ig(),o6=f_(),m_=class extends o6.STSClient{assumeRole(e,r,i){let s=new XK.AssumeRoleCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}assumeRoleWithSAML(e,r,i){let s=new ZK.AssumeRoleWithSAMLCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}assumeRoleWithWebIdentity(e,r,i){let s=new e6.AssumeRoleWithWebIdentityCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}decodeAuthorizationMessage(e,r,i){let s=new t6.DecodeAuthorizationMessageCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}getAccessKeyInfo(e,r,i){let s=new r6.GetAccessKeyInfoCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}getCallerIdentity(e,r,i){let s=new i6.GetCallerIdentityCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}getFederationToken(e,r,i){let s=new n6.GetFederationTokenCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}getSessionToken(e,r,i){let s=new s6.GetSessionTokenCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}};n(m_,"STS");h_.STS=m_});var aI=u(Ur=>{"use strict";Object.defineProperty(Ur,"__esModule",{value:!0});var yn=(A(),b(x));yn.__exportStar(vp(),Ur);yn.__exportStar(Ag(),Ur);yn.__exportStar(bp(),Ur);yn.__exportStar(Tg(),Ur);yn.__exportStar(Og(),Ur);yn.__exportStar(Pg(),Ur);yn.__exportStar(Rg(),Ur);yn.__exportStar(Ig(),Ur)});var lI=u(Wr=>{"use strict";Object.defineProperty(Wr,"__esModule",{value:!0});Wr.decorateDefaultCredentialProvider=Wr.getDefaultRoleAssumerWithWebIdentity=Wr.getDefaultRoleAssumer=void 0;var cI=qg(),dI=f_(),uI=n((t,e)=>e?n(class extends t{constructor(i){super(i);for(let s of e)this.middlewareStack.use(s)}},"CustomizableSTSClient"):t,"getCustomizableStsClientCtor"),a6=n((t={},e)=>(0,cI.getDefaultRoleAssumer)(t,uI(dI.STSClient,e)),"getDefaultRoleAssumer");Wr.getDefaultRoleAssumer=a6;var c6=n((t={},e)=>(0,cI.getDefaultRoleAssumerWithWebIdentity)(t,uI(dI.STSClient,e)),"getDefaultRoleAssumerWithWebIdentity");Wr.getDefaultRoleAssumerWithWebIdentity=c6;var d6=n(t=>e=>t({roleAssumer:(0,Wr.getDefaultRoleAssumer)(e),roleAssumerWithWebIdentity:(0,Wr.getDefaultRoleAssumerWithWebIdentity)(e),...e}),"decorateDefaultCredentialProvider");Wr.decorateDefaultCredentialProvider=d6});var pI=u(xE=>{"use strict";Object.defineProperty(xE,"__esModule",{value:!0});var u6=(A(),b(x));u6.__exportStar(er(),xE)});var fI=u(vi=>{"use strict";Object.defineProperty(vi,"__esModule",{value:!0});vi.STSServiceException=void 0;var Fd=(A(),b(x));Fd.__exportStar(oI(),vi);Fd.__exportStar(f_(),vi);Fd.__exportStar(aI(),vi);Fd.__exportStar(lI(),vi);Fd.__exportStar(pI(),vi);var l6=fp();Object.defineProperty(vi,"STSServiceException",{enumerable:!0,get:function(){return l6.STSServiceException}})});var xI=u(__=>{"use strict";Object.defineProperty(__,"__esModule",{value:!0});__.ruleSet=void 0;var vI="required",Ni="fn",bi="argv",qa="ref",AE="PartitionResult",Si="tree",Ld="error",zd="endpoint",mI={[vI]:!1,type:"String"},hI={[vI]:!0,default:!1,type:"Boolean"},SI={[qa]:"Endpoint"},NI={[Ni]:"booleanEquals",[bi]:[{[qa]:"UseFIPS"},!0]},bI={[Ni]:"booleanEquals",[bi]:[{[qa]:"UseDualStack"},!0]},jr={},_I={[Ni]:"booleanEquals",[bi]:[!0,{[Ni]:"getAttr",[bi]:[{[qa]:AE},"supportsFIPS"]}]},yI={[Ni]:"booleanEquals",[bi]:[!0,{[Ni]:"getAttr",[bi]:[{[qa]:AE},"supportsDualStack"]}]},gI=[SI],wI=[NI],EI=[bI],p6={version:"1.0",parameters:{Region:mI,UseDualStack:hI,UseFIPS:hI,Endpoint:mI},rules:[{conditions:[{[Ni]:"aws.partition",[bi]:[{[qa]:"Region"}],assign:AE}],type:Si,rules:[{conditions:[{[Ni]:"isSet",[bi]:gI},{[Ni]:"parseURL",[bi]:gI,assign:"url"}],type:Si,rules:[{conditions:wI,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Ld},{type:Si,rules:[{conditions:EI,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Ld},{endpoint:{url:SI,properties:jr,headers:jr},type:zd}]}]},{conditions:[NI,bI],type:Si,rules:[{conditions:[_I,yI],type:Si,rules:[{endpoint:{url:"https://rds-data-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:jr,headers:jr},type:zd}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Ld}]},{conditions:wI,type:Si,rules:[{conditions:[_I],type:Si,rules:[{endpoint:{url:"https://rds-data-fips.{Region}.{PartitionResult#dnsSuffix}",properties:jr,headers:jr},type:zd}]},{error:"FIPS is enabled but this partition does not support FIPS",type:Ld}]},{conditions:EI,type:Si,rules:[{conditions:[yI],type:Si,rules:[{endpoint:{url:"https://rds-data.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:jr,headers:jr},type:zd}]},{error:"DualStack is enabled but this partition does not support DualStack",type:Ld}]},{endpoint:{url:"https://rds-data.{Region}.{PartitionResult#dnsSuffix}",properties:jr,headers:jr},type:zd}]}]};__.ruleSet=p6});var AI=u(y_=>{"use strict";Object.defineProperty(y_,"__esModule",{value:!0});y_.defaultEndpointResolver=void 0;var f6=gd(),m6=xI(),h6=n((t,e={})=>(0,f6.resolveEndpoint)(m6.ruleSet,{endpointParams:t,logger:e.logger}),"defaultEndpointResolver");y_.defaultEndpointResolver=h6});var PI=u(g_=>{"use strict";Object.defineProperty(g_,"__esModule",{value:!0});g_.getRuntimeConfig=void 0;var _6=C(),y6=Mn(),TI=od(),OI=di(),g6=AI(),w6=n(t=>({apiVersion:"2018-08-01",base64Decoder:t?.base64Decoder??TI.fromBase64,base64Encoder:t?.base64Encoder??TI.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??g6.defaultEndpointResolver,logger:t?.logger??new _6.NoOpLogger,serviceId:t?.serviceId??"RDS Data",urlParser:t?.urlParser??y6.parseUrl,utf8Decoder:t?.utf8Decoder??OI.fromUtf8,utf8Encoder:t?.utf8Encoder??OI.toUtf8}),"getRuntimeConfig");g_.getRuntimeConfig=w6});var qI=u(E_=>{"use strict";Object.defineProperty(E_,"__esModule",{value:!0});E_.getRuntimeConfig=void 0;var E6=(A(),b(x)),v6=E6.__importDefault(Ab()),S6=fI(),w_=_r(),N6=vE(),b6=Jc(),RI=ci(),Ud=rn(),II=Yc(),x6=Qc(),A6=Mt(),T6=sd(),O6=PI(),P6=C(),R6=vd(),I6=C(),q6=n(t=>{(0,I6.emitWarningIfUnsupportedVersion)(process.version);let e=(0,R6.resolveDefaultsModeConfig)(t),r=n(()=>e().then(P6.loadConfigsForDefaultMode),"defaultConfigProvider"),i=(0,O6.getRuntimeConfig)(t);return{...i,...t,runtime:"node",defaultsMode:e,bodyLengthChecker:t?.bodyLengthChecker??x6.calculateBodyLength,credentialDefaultProvider:t?.credentialDefaultProvider??(0,S6.decorateDefaultCredentialProvider)(N6.defaultProvider),defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,T6.defaultUserAgent)({serviceId:i.serviceId,clientVersion:v6.default.version}),maxAttempts:t?.maxAttempts??(0,Ud.loadConfig)(RI.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),region:t?.region??(0,Ud.loadConfig)(w_.NODE_REGION_CONFIG_OPTIONS,w_.NODE_REGION_CONFIG_FILE_OPTIONS),requestHandler:t?.requestHandler??new II.NodeHttpHandler(r),retryMode:t?.retryMode??(0,Ud.loadConfig)({...RI.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||A6.DEFAULT_RETRY_MODE}),sha256:t?.sha256??b6.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??II.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,Ud.loadConfig)(w_.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS),useFipsEndpoint:t?.useFipsEndpoint??(0,Ud.loadConfig)(w_.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS)}},"getRuntimeConfig");E_.getRuntimeConfig=q6});var TE=u(S_=>{"use strict";Object.defineProperty(S_,"__esModule",{value:!0});S_.RDSDataClient=void 0;var C6=_r(),k6=Ac(),M6=ne(),CI=Tc(),D6=Oc(),F6=Pc(),kI=ci(),MI=ui(),DI=zc(),L6=C(),z6=xb(),U6=qI(),v_=class extends L6.Client{constructor(e){let r=(0,U6.getRuntimeConfig)(e),i=(0,z6.resolveClientEndpointParameters)(r),s=(0,C6.resolveRegionConfig)(i),o=(0,M6.resolveEndpointConfig)(s),a=(0,kI.resolveRetryConfig)(o),c=(0,CI.resolveHostHeaderConfig)(a),l=(0,MI.resolveAwsAuthConfig)(c),p=(0,DI.resolveUserAgentConfig)(l);super(p),this.config=p,this.middlewareStack.use((0,kI.getRetryPlugin)(this.config)),this.middlewareStack.use((0,k6.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,CI.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,D6.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,F6.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,MI.getAwsAuthPlugin)(this.config)),this.middlewareStack.use((0,DI.getUserAgentPlugin)(this.config))}destroy(){super.destroy()}};n(v_,"RDSDataClient");S_.RDSDataClient=v_});var FI=u(b_=>{"use strict";Object.defineProperty(b_,"__esModule",{value:!0});b_.RDSData=void 0;var W6=wy(),j6=Ey(),V6=vy(),$6=Sy(),H6=Ny(),G6=by(),B6=TE(),N_=class extends B6.RDSDataClient{batchExecuteStatement(e,r,i){let s=new W6.BatchExecuteStatementCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}beginTransaction(e,r,i){let s=new j6.BeginTransactionCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}commitTransaction(e,r,i){let s=new V6.CommitTransactionCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}executeSql(e,r,i){let s=new $6.ExecuteSqlCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}executeStatement(e,r,i){let s=new H6.ExecuteStatementCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}rollbackTransaction(e,r,i){let s=new G6.RollbackTransactionCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}};n(N_,"RDSData");b_.RDSData=N_});var LI=u(gn=>{"use strict";Object.defineProperty(gn,"__esModule",{value:!0});var Ca=(A(),b(x));Ca.__exportStar(wy(),gn);Ca.__exportStar(Ey(),gn);Ca.__exportStar(vy(),gn);Ca.__exportStar(Sy(),gn);Ca.__exportStar(Ny(),gn);Ca.__exportStar(by(),gn)});var zI=u(OE=>{"use strict";Object.defineProperty(OE,"__esModule",{value:!0});var J6=(A(),b(x));J6.__exportStar(ri(),OE)});var UI=u(wn=>{"use strict";Object.defineProperty(wn,"__esModule",{value:!0});wn.RDSDataServiceException=void 0;var x_=(A(),b(x));x_.__exportStar(FI(),wn);x_.__exportStar(TE(),wn);x_.__exportStar(LI(),wn);x_.__exportStar(zI(),wn);var K6=Du();Object.defineProperty(wn,"RDSDataServiceException",{enumerable:!0,get:function(){return K6.RDSDataServiceException}})});import Y6 from"path";function CE(t){return t===void 0}n(CE,"isUndefined");function Ge(t){return typeof t=="string"}n(Ge,"isString");function kE(t){return typeof t=="number"}n(kE,"isNumber");function jd(t){return typeof t=="boolean"}n(jd,"isBoolean");function Vd(t){return t===null}n(Vd,"isNull");function ME(t){return t instanceof Date}n(ME,"isDate");function DE(t){return typeof t=="bigint"}n(DE,"isBigInt");function yt(t){return typeof t=="function"}n(yt,"isFunction");function st(t){return typeof t=="object"&&t!==null}n(st,"isObject");function FE(t){return t[t.length-1]}n(FE,"getLast");function d(t){return Object.freeze(t)}n(d,"freeze");function xi(t){return Array.isArray(t)}n(xi,"isReadonlyArray");function Ai(t){return t}n(Ai,"noop");var F=d({is(t){return t.kind==="IdentifierNode"},create(t){return d({kind:"IdentifierNode",name:t})}});var ot=d({is(t){return t.kind==="SchemableIdentifierNode"},create(t){return d({kind:"SchemableIdentifierNode",identifier:F.create(t)})},createWithSchema(t,e){return d({kind:"SchemableIdentifierNode",schema:F.create(t),identifier:F.create(e)})}});var at=d({is(t){return t.kind==="TableNode"},create(t){return d({kind:"TableNode",table:ot.create(t)})},createWithSchema(t,e){return d({kind:"TableNode",table:ot.createWithSchema(t,e)})}});var ce=d({is(t){return t.kind==="AlterTableNode"},create(t){return d({kind:"AlterTableNode",table:at.create(t)})},cloneWithTableProps(t,e){return d({...t,...e})},cloneWithColumnAlteration(t,e){return d({...t,columnAlterations:t.columnAlterations?[...t.columnAlterations,e]:[e]})}});var or=d({is(t){return t.kind==="CreateIndexNode"},create(t){return d({kind:"CreateIndexNode",name:F.create(t)})},cloneWith(t,e){return d({...t,...e})}});var $d=d({is(t){return t.kind==="CreateSchemaNode"},create(t,e){return d({kind:"CreateSchemaNode",schema:F.create(t),...e})},cloneWith(t,e){return d({...t,...e})}});var LE=["preserve rows","delete rows","drop"],gt=d({is(t){return t.kind==="CreateTableNode"},create(t){return d({kind:"CreateTableNode",table:t,columns:d([])})},cloneWithColumn(t,e){return d({...t,columns:d([...t.columns,e])})},cloneWithConstraint(t,e){return d({...t,constraints:t.constraints?d([...t.constraints,e]):d([e])})},cloneWithFrontModifier(t,e){return d({...t,frontModifiers:t.frontModifiers?d([...t.frontModifiers,e]):d([e])})},cloneWithEndModifier(t,e){return d({...t,endModifiers:t.endModifiers?d([...t.endModifiers,e]):d([e])})},cloneWith(t,e){return d({...t,...e})}});var cs=d({is(t){return t.kind==="DropIndexNode"},create(t,e){return d({kind:"DropIndexNode",name:ot.create(t),...e})},cloneWith(t,e){return d({...t,...e})}});var Ma=d({is(t){return t.kind==="DropSchemaNode"},create(t,e){return d({kind:"DropSchemaNode",schema:F.create(t),...e})},cloneWith(t,e){return d({...t,...e})}});var Da=d({is(t){return t.kind==="DropTableNode"},create(t,e){return d({kind:"DropTableNode",table:t,...e})},cloneWith(t,e){return d({...t,...e})}});var Ot=d({is(t){return t.kind==="AliasNode"},create(t,e){return d({kind:"AliasNode",node:t,alias:e})}});function Fe(t){return st(t)&&yt(t.toOperationNode)}n(Fe,"isOperationNodeSource");function zE(t){return st(t)&&"expressionType"in t&&Fe(t)}n(zE,"isExpression");function UE(t){return st(t)&&"expression"in t&&Ge(t.alias)&&Fe(t)}n(UE,"isAliasedExpression");var ds=d({is(t){return t.kind==="AndNode"},create(t,e){return d({kind:"AndNode",left:t,right:e})}});var us=d({is(t){return t.kind==="OrNode"},create(t,e){return d({kind:"OrNode",left:t,right:e})}});var ls=d({is(t){return t.kind==="OnNode"},create(t){return d({kind:"OnNode",on:t})},cloneWithOperation(t,e,r){return d({...t,on:e==="And"?ds.create(t.on,r):us.create(t.on,r)})}});var ct=d({is(t){return t.kind==="JoinNode"},create(t,e){return d({kind:"JoinNode",joinType:t,table:e,on:void 0})},createWithOn(t,e,r){return d({kind:"JoinNode",joinType:t,table:e,on:ls.create(r)})},cloneWithOn(t,e){return d({...t,on:t.on?ls.cloneWithOperation(t.on,"And",e):ls.create(e)})},cloneWithOrOn(t,e){return d({...t,on:t.on?ls.cloneWithOperation(t.on,"Or",e):ls.create(e)})}});var Vr=d({is(t){return t.kind==="OrderByNode"},create(t){return d({kind:"OrderByNode",items:d([t])})},cloneWithItem(t,e){return d({...t,items:d([...t.items,e])})}});var P_=d({is(t){return t.kind==="PartitionByNode"},create(t){return d({kind:"PartitionByNode",items:d(t)})},cloneWithItems(t,e){return d({...t,items:d([...t.items,...e])})}});var Fa=d({is(t){return t.kind==="OverNode"},create(){return d({kind:"OverNode"})},cloneWithOrderByItem(t,e){return d({...t,orderBy:t.orderBy?Vr.cloneWithItem(t.orderBy,e):Vr.create(e)})},cloneWithPartitionByItems(t,e){return d({...t,partitionBy:t.partitionBy?P_.cloneWithItems(t.partitionBy,e):P_.create(e)})}});var En=d({is(t){return t.kind==="FromNode"},create(t){return d({kind:"FromNode",froms:d(t)})},cloneWithFroms(t,e){return d({...t,froms:d([...t.froms,...e])})}});var R_=d({is(t){return t.kind==="GroupByNode"},create(t){return d({kind:"GroupByNode",items:d(t)})},cloneWithItems(t,e){return d({...t,items:d([...t.items,...e])})}});var La=d({is(t){return t.kind==="HavingNode"},create(t){return d({kind:"HavingNode",having:t})},cloneWithOperation(t,e,r){return d({...t,having:e==="And"?ds.create(t.having,r):us.create(t.having,r)})}});var k=d({is(t){return t.kind==="SelectQueryNode"},create(t,e){return d({kind:"SelectQueryNode",from:En.create(t),...e&&{with:e}})},cloneWithSelections(t,e){return d({...t,selections:t.selections?d([...t.selections,...e]):d(e)})},cloneWithDistinctOn(t,e){return d({...t,distinctOn:t.distinctOn?d([...t.distinctOn,...e]):d(e)})},cloneWithFrontModifier(t,e){return d({...t,frontModifiers:t.frontModifiers?d([...t.frontModifiers,e]):d([e])})},cloneWithEndModifier(t,e){return d({...t,endModifiers:t.endModifiers?d([...t.endModifiers,e]):d([e])})},cloneWithOrderByItem(t,e){return d({...t,orderBy:t.orderBy?Vr.cloneWithItem(t.orderBy,e):Vr.create(e)})},cloneWithGroupByItems(t,e){return d({...t,groupBy:t.groupBy?R_.cloneWithItems(t.groupBy,e):R_.create(e)})},cloneWithLimit(t,e){return d({...t,limit:e})},cloneWithOffset(t,e){return d({...t,offset:e})},cloneWithHaving(t,e){return d({...t,having:t.having?La.cloneWithOperation(t.having,"And",e):La.create(e)})},cloneWithOrHaving(t,e){return d({...t,having:t.having?La.cloneWithOperation(t.having,"Or",e):La.create(e)})},cloneWithSetOperation(t,e){return d({...t,setOperations:t.setOperations?d([...t.setOperations,e]):d([e])})},cloneWithExplain(t,e){return d({...t,explain:e})},cloneWithoutSelections(t){return d({...t,selections:[]})},cloneWithoutLimit(t){return d({...t,limit:void 0})},cloneWithoutOffset(t){return d({...t,offset:void 0})},cloneWithoutOrderBy(t){return d({...t,orderBy:void 0})}});var ar=d({is(t){return t.kind==="SelectModifierNode"},create(t){return d({kind:"SelectModifierNode",modifier:t})},createWithExpression(t){return d({kind:"SelectModifierNode",rawModifier:t})}});var Hd=d({is(t){return t.kind==="BinaryOperationNode"},create(t,e,r){return d({kind:"BinaryOperationNode",leftOperand:t,operator:e,rightOperand:r})}});var de=d({is(t){return t.kind==="RawNode"},create(t,e){return d({kind:"RawNode",sqlFragments:d(t),parameters:d(e)})},createWithSql(t){return de.create([t],[])},createWithChild(t){return de.create(["",""],[t])},createWithChildren(t){return de.create(new Array(t.length+1).fill(""),t)}});var WE=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","?","?&","!<","!>","<=>","!~","~","~*","!~*","&&","||","@@","@@@","!!","<->"];var Gd=d({is(t){return t.kind==="OperatorNode"},create(t){return d({kind:"OperatorNode",operator:t})}});var Bd=d({is(t){return t.kind==="ParensNode"},create(t){return d({kind:"ParensNode",node:t})}});var W=d({is(t){return t.kind==="ColumnNode"},create(t){return d({kind:"ColumnNode",column:F.create(t)})}});var ps=d({is(t){return t.kind==="SelectAllNode"},create(){return d({kind:"SelectAllNode"})}});var vn=d({is(t){return t.kind==="ReferenceNode"},create(t,e){return d({kind:"ReferenceNode",table:t,column:e})},createSelectAll(t){return d({kind:"ReferenceNode",table:t,column:ps.create()})}});function Gr(t){return Ge(t)?Hr(t):t.toOperationNode()}n(Gr,"parseSimpleReferenceExpression");function Ti(t){return xi(t)?t.map(e=>$r(e)):[$r(t)]}n(Ti,"parseReferenceExpressionOrList");function $r(t){return Sn(t)?fs(t):Gr(t)}n($r,"parseReferenceExpression");function Hr(t){let e=".";if(t.includes(e)){let r=t.split(e).map(VE);if(r.length===3)return YI(r);if(r.length===2)return QI(r);throw new Error(`invalid column reference ${t}`)}else return W.create(t)}n(Hr,"parseStringReference");function jE(t){let e=" as ";if(t.includes(e)){let[r,i]=t.split(e).map(VE);return Ot.create(Hr(r),F.create(i))}else return Hr(t)}n(jE,"parseAliasedStringReference");function za(t){return W.create(t)}n(za,"parseColumnName");function YI(t){let[e,r,i]=t;return vn.create(at.createWithSchema(e,r),W.create(i))}n(YI,"parseStringReferenceWithTableAndSchema");function QI(t){let[e,r]=t;return vn.create(at.create(e),W.create(r))}n(QI,"parseStringReferenceWithTable");function VE(t){return t.trim()}n(VE,"trim");var Jd=d({is(t){return t.kind==="PrimitiveValueListNode"},create(t){return d({kind:"PrimitiveValueListNode",values:d([...t])})}});var ms=d({is(t){return t.kind==="ValueListNode"},create(t){return d({kind:"ValueListNode",values:d(t)})}});var dt=d({is(t){return t.kind==="ValueNode"},create(t){return d({kind:"ValueNode",value:t})},createImmediate(t){return d({kind:"ValueNode",value:t,immediate:!0})}});function Kd(t){return xi(t)?XI(t):cr(t)}n(Kd,"parseValueExpressionOrList");function cr(t){return Sn(t)?fs(t):dt.create(t)}n(cr,"parseValueExpression");function XI(t){return t.some(Sn)?ms.create(t.map(e=>cr(e))):Jd.create(t)}n(XI,"parseValueExpressionList");function Le(t){return k_("where",t)}n(Le,"parseWhere");function q_(t){return k_("having",t)}n(q_,"parseHaving");function C_(t){return k_("on",t)}n(C_,"parseOn");function ue(t,e,r){return Hd.create($r(t),M_(e),$r(r))}n(ue,"parseReferentialFilter");function k_(t,e){if(e.length===3)return ZI(e[0],e[1],e[2]);if(e.length===1)return tq(t,e[0]);throw $E(t,e)}n(k_,"parseFilterExpression");function ZI(t,e,r){return(e==="is"||e==="is not")&&(Vd(r)||jd(r))?eq(t,e,r):Hd.create($r(t),M_(e),Kd(r))}n(ZI,"parseFilter");function eq(t,e,r){return Hd.create($r(t),M_(e),dt.createImmediate(r))}n(eq,"parseIs");function M_(t){if(Ge(t)&&WE.includes(t))return Gd.create(t);if(Fe(t))return t.toOperationNode();throw new Error(`invalid comparison operator ${JSON.stringify(t)} passed to a filter method`)}n(M_,"parseComparisonOperatorExpression");function tq(t,e){if(yt(e))return rq[t](e);if(Fe(e)){let r=e.toOperationNode();if(de.is(r))return r}throw $E(t,e)}n(tq,"parseOneArgFilterExpression");function $E(t,e){return new Error(`invalid arguments passed to a '${t}' method: ${JSON.stringify(e)}`)}n($E,"createFilterExpressionError");var rq=d({where(t){let r=t(I_()).toOperationNode();if(!r.where)throw new Error("no `where` methods called inside a group callback");return Bd.create(r.where.where)},having(t){let r=t(I_()).toOperationNode();if(!r.having)throw new Error("no `having` methods called inside a group callback");return Bd.create(r.having.having)},on(t){let r=t(Yd("InnerJoin","table")).toOperationNode();if(!r.on)throw new Error("no `on` methods called inside a group callback");return Bd.create(r.on.on)}});function ze(t,e){if(e.length===3)return nq(t,e[0],e[1],e[2]);if(e.length===2)return iq(t,e[0],e[1]);throw new Error("not implemented")}n(ze,"parseJoin");function iq(t,e,r){return r(Yd(t,e)).toOperationNode()}n(iq,"parseCallbackJoin");function nq(t,e,r,i){return ct.createWithOn(t,Oi(e),ue(r,"=",i))}n(nq,"parseSingleOnJoin");var hs=d({is(t){return t.kind==="SelectionNode"},create(t){return d({kind:"SelectionNode",selection:t})},createSelectAll(){return d({kind:"SelectionNode",selection:ps.create()})},createSelectAllFromTable(t){return d({kind:"SelectionNode",selection:vn.createSelectAll(t)})}});var Ua=class{#e;get dynamicReference(){return this.#e}get refType(){}constructor(e){this.#e=e}toOperationNode(){return Gr(this.#e)}};n(Ua,"DynamicReferenceBuilder");function HE(t){return st(t)&&Fe(t)&&Ge(t.dynamicReference)}n(HE,"isDynamicReferenceBuilder");function Pi(t){return xi(t)?t.map(e=>GE(e)):[GE(t)]}n(Pi,"parseSelectExpressionOrList");function GE(t){return Ge(t)?hs.create(jE(t)):HE(t)?hs.create(t.toOperationNode()):hs.create(Qd(t))}n(GE,"parseSelectExpression");function dr(t){return t?Array.isArray(t)?t.map(BE):[BE(t)]:[hs.createSelectAll()]}n(dr,"parseSelectAll");function BE(t){if(Ge(t))return hs.createSelectAllFromTable(ve(t));throw new Error(`invalid value selectAll expression: ${JSON.stringify(t)}`)}n(BE,"parseSelectAllArg");var Qe=d({is(t){return t.kind==="InsertQueryNode"},create(t,e,r){return d({kind:"InsertQueryNode",into:t,...e&&{with:e},replace:r})},cloneWith(t,e){return d({...t,...e})}});var Ri=d({is(t){return t.kind==="UpdateQueryNode"},create(t,e){return d({kind:"UpdateQueryNode",table:t,...e&&{with:e}})},cloneWithFromItems(t,e){return d({...t,from:t.from?En.cloneWithFroms(t.from,e):En.create(e)})},cloneWithUpdates(t,e){return d({...t,updates:t.updates?d([...t.updates,...e]):e})},cloneWithExplain(t,e){return d({...t,explain:e})}});var D_=d({is(t){return t.kind==="UsingNode"},create(t){return d({kind:"UsingNode",tables:d(t)})},cloneWithTables(t,e){return d({...t,tables:d([...t.tables,...e])})}});var Br=d({is(t){return t.kind==="DeleteQueryNode"},create(t,e){return d({kind:"DeleteQueryNode",from:En.create(t),...e&&{with:e}})},cloneWithOrderByItem(t,e){return d({...t,orderBy:t.orderBy?Vr.cloneWithItem(t.orderBy,e):Vr.create(e)})},cloneWithLimit(t,e){return d({...t,limit:e})},cloneWithExplain(t,e){return d({...t,explain:e})},cloneWithUsing(t,e){return d({...t,using:t.using!==void 0?D_.cloneWithTables(t.using,e):D_.create(e)})}});var Re=d({is(t){return t.kind==="WhereNode"},create(t){return d({kind:"WhereNode",where:t})},cloneWithOperation(t,e,r){return d({...t,where:e==="And"?ds.create(t.where,r):us.create(t.where,r)})}});var F_=d({is(t){return t.kind==="ReturningNode"},create(t){return d({kind:"ReturningNode",selections:d(t)})},cloneWithSelections(t,e){return d({...t,selections:t.selections?d([...t.selections,...e]):d(e)})}});var q=d({is(t){return Br.is(t)||Qe.is(t)||Ri.is(t)||k.is(t)},cloneWithWhere(t,e){return d({...t,where:t.where?Re.cloneWithOperation(t.where,"And",e):Re.create(e)})},cloneWithOrWhere(t,e){return d({...t,where:t.where?Re.cloneWithOperation(t.where,"Or",e):Re.create(e)})},cloneWithJoin(t,e){return d({...t,joins:t.joins?d([...t.joins,e]):d([e])})},cloneWithReturning(t,e){return d({...t,returning:t.returning?F_.cloneWithSelections(t.returning,e):F_.create(e)})},cloneWithoutWhere(t){return d({...t,where:void 0})}});var JE=d({is(t){return t.kind==="OrderByItemNode"},create(t,e){return d({kind:"OrderByItemNode",orderBy:t,direction:e})}});function _s(t,e){return JE.create(sq(t),oq(e))}n(_s,"parseOrderBy");function sq(t){return $r(t)}n(sq,"parseOrderByExpression");function oq(t){if(t)return t==="asc"||t==="desc"?de.createWithSql(t):t.toOperationNode()}n(oq,"parseOrderByDirectionExpression");function R(t,e){Object.defineProperties(t.prototype,{then:{enumerable:!1,value:()=>{throw new Error(e)}}})}n(R,"preventAwait");var Xd=d({is(t){return t.kind==="LimitNode"},create(t){return d({kind:"LimitNode",limit:dt.create(t)})}});var KE=d({is(t){return t.kind==="OffsetNode"},create(t){return d({kind:"OffsetNode",offset:dt.create(t)})}});var YE=d({is(t){return t.kind==="GroupByItemNode"},create(t){return d({kind:"GroupByItemNode",groupBy:t})}});function QE(t){return Ti(t).map(YE.create)}n(QE,"parseGroupBy");var Bt=class extends Error{node;constructor(e){super("no result"),this.node=e}};n(Bt,"NoResultError");var Ii=d({is(t){return t.kind==="ExplainNode"},create(t,e){return d({kind:"ExplainNode",format:t,options:e})}});var Zd=d({is(t){return t.kind==="SetOperationNode"},create(t,e,r){return d({kind:"SetOperationNode",operator:t,expression:e,all:r})}});function Nn(t,e,r){return Zd.create(t,e.toOperationNode(),r)}n(Nn,"parseSetOperation");var XE=d({is(t){return t.kind==="UnaryOperationNode"},create(t,e){return d({kind:"UnaryOperationNode",operator:t,operand:e})}});function he(t){return ZE("exists",t)}n(he,"parseExists");function _e(t){return ZE("not exists",t)}n(_e,"parseNotExists");function ZE(t,e){return XE.create(Gd.create(t),Kd(e))}n(ZE,"parseUnaryOperation");var N=class{#e;constructor(e){this.#e=d(e)}get expressionType(){}where(...e){return new N({...this.#e,queryNode:q.cloneWithWhere(this.#e.queryNode,Le(e))})}whereRef(e,r,i){return new N({...this.#e,queryNode:q.cloneWithWhere(this.#e.queryNode,ue(e,r,i))})}orWhere(...e){return new N({...this.#e,queryNode:q.cloneWithOrWhere(this.#e.queryNode,Le(e))})}orWhereRef(e,r,i){return new N({...this.#e,queryNode:q.cloneWithOrWhere(this.#e.queryNode,ue(e,r,i))})}whereExists(e){return new N({...this.#e,queryNode:q.cloneWithWhere(this.#e.queryNode,he(e))})}whereNotExists(e){return new N({...this.#e,queryNode:q.cloneWithWhere(this.#e.queryNode,_e(e))})}orWhereExists(e){return new N({...this.#e,queryNode:q.cloneWithOrWhere(this.#e.queryNode,he(e))})}orWhereNotExists(e){return new N({...this.#e,queryNode:q.cloneWithOrWhere(this.#e.queryNode,_e(e))})}having(...e){return new N({...this.#e,queryNode:k.cloneWithHaving(this.#e.queryNode,q_(e))})}havingRef(e,r,i){return new N({...this.#e,queryNode:k.cloneWithHaving(this.#e.queryNode,ue(e,r,i))})}orHaving(...e){return new N({...this.#e,queryNode:k.cloneWithOrHaving(this.#e.queryNode,q_(e))})}orHavingRef(e,r,i){return new N({...this.#e,queryNode:k.cloneWithOrHaving(this.#e.queryNode,ue(e,r,i))})}havingExists(e){return new N({...this.#e,queryNode:k.cloneWithHaving(this.#e.queryNode,he(e))})}havingNotExist(e){return new N({...this.#e,queryNode:k.cloneWithHaving(this.#e.queryNode,_e(e))})}orHavingExists(e){return new N({...this.#e,queryNode:k.cloneWithOrHaving(this.#e.queryNode,he(e))})}orHavingNotExists(e){return new N({...this.#e,queryNode:k.cloneWithOrHaving(this.#e.queryNode,_e(e))})}select(e){return new N({...this.#e,queryNode:k.cloneWithSelections(this.#e.queryNode,Pi(e))})}distinctOn(e){return new N({...this.#e,queryNode:k.cloneWithDistinctOn(this.#e.queryNode,Ti(e))})}modifyFront(e){return new N({...this.#e,queryNode:k.cloneWithFrontModifier(this.#e.queryNode,ar.createWithExpression(e.toOperationNode()))})}modifyEnd(e){return new N({...this.#e,queryNode:k.cloneWithEndModifier(this.#e.queryNode,ar.createWithExpression(e.toOperationNode()))})}distinct(){return new N({...this.#e,queryNode:k.cloneWithFrontModifier(this.#e.queryNode,ar.create("Distinct"))})}forUpdate(){return new N({...this.#e,queryNode:k.cloneWithEndModifier(this.#e.queryNode,ar.create("ForUpdate"))})}forShare(){return new N({...this.#e,queryNode:k.cloneWithEndModifier(this.#e.queryNode,ar.create("ForShare"))})}forKeyShare(){return new N({...this.#e,queryNode:k.cloneWithEndModifier(this.#e.queryNode,ar.create("ForKeyShare"))})}forNoKeyUpdate(){return new N({...this.#e,queryNode:k.cloneWithEndModifier(this.#e.queryNode,ar.create("ForNoKeyUpdate"))})}skipLocked(){return new N({...this.#e,queryNode:k.cloneWithEndModifier(this.#e.queryNode,ar.create("SkipLocked"))})}noWait(){return new N({...this.#e,queryNode:k.cloneWithEndModifier(this.#e.queryNode,ar.create("NoWait"))})}selectAll(e){return new N({...this.#e,queryNode:k.cloneWithSelections(this.#e.queryNode,dr(e))})}innerJoin(...e){return new N({...this.#e,queryNode:q.cloneWithJoin(this.#e.queryNode,ze("InnerJoin",e))})}leftJoin(...e){return new N({...this.#e,queryNode:q.cloneWithJoin(this.#e.queryNode,ze("LeftJoin",e))})}rightJoin(...e){return new N({...this.#e,queryNode:q.cloneWithJoin(this.#e.queryNode,ze("RightJoin",e))})}fullJoin(...e){return new N({...this.#e,queryNode:q.cloneWithJoin(this.#e.queryNode,ze("FullJoin",e))})}innerJoinLateral(...e){return new N({...this.#e,queryNode:q.cloneWithJoin(this.#e.queryNode,ze("LateralInnerJoin",e))})}leftJoinLateral(...e){return new N({...this.#e,queryNode:q.cloneWithJoin(this.#e.queryNode,ze("LateralLeftJoin",e))})}orderBy(e,r){return new N({...this.#e,queryNode:k.cloneWithOrderByItem(this.#e.queryNode,_s(e,r))})}groupBy(e){return new N({...this.#e,queryNode:k.cloneWithGroupByItems(this.#e.queryNode,QE(e))})}limit(e){return new N({...this.#e,queryNode:k.cloneWithLimit(this.#e.queryNode,Xd.create(e))})}offset(e){return new N({...this.#e,queryNode:k.cloneWithOffset(this.#e.queryNode,KE.create(e))})}union(e){return new N({...this.#e,queryNode:k.cloneWithSetOperation(this.#e.queryNode,Nn("union",e,!1))})}unionAll(e){return new N({...this.#e,queryNode:k.cloneWithSetOperation(this.#e.queryNode,Nn("union",e,!0))})}intersect(e){return new N({...this.#e,queryNode:k.cloneWithSetOperation(this.#e.queryNode,Nn("intersect",e,!1))})}intersectAll(e){return new N({...this.#e,queryNode:k.cloneWithSetOperation(this.#e.queryNode,Nn("intersect",e,!0))})}except(e){return new N({...this.#e,queryNode:k.cloneWithSetOperation(this.#e.queryNode,Nn("except",e,!1))})}exceptAll(e){return new N({...this.#e,queryNode:k.cloneWithSetOperation(this.#e.queryNode,Nn("except",e,!0))})}as(e){return new eu(this,e)}clearSelect(){return new N({...this.#e,queryNode:k.cloneWithoutSelections(this.#e.queryNode)})}clearWhere(){return new N({...this.#e,queryNode:q.cloneWithoutWhere(this.#e.queryNode)})}clearLimit(){return new N({...this.#e,queryNode:k.cloneWithoutLimit(this.#e.queryNode)})}clearOffset(){return new N({...this.#e,queryNode:k.cloneWithoutOffset(this.#e.queryNode)})}clearOrderBy(){return new N({...this.#e,queryNode:k.cloneWithoutOrderBy(this.#e.queryNode)})}$call(e){return e(this)}call(e){return this.$call(e)}$if(e,r){return e?r(this):new N({...this.#e})}if(e,r){return this.$if(e,r)}$castTo(){return new N(this.#e)}castTo(){return this.$castTo()}$assertType(){return new N(this.#e)}assertType(){return new N(this.#e)}withPlugin(e){return new N({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile();return(await this.#e.executor.executeQuery(e,this.#e.queryId)).rows}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=Bt){let r=await this.executeTakeFirst();if(r===void 0)throw new e(this.toOperationNode());return r}async*stream(e=100){let r=this.compile(),i=this.#e.executor.stream(r,e,this.#e.queryId);for await(let s of i)yield*s.rows}async explain(e,r){return await new N({...this.#e,queryNode:k.cloneWithExplain(this.#e.queryNode,Ii.create(e,r?.toOperationNode()))}).execute()}};n(N,"SelectQueryBuilder");R(N,"don't await SelectQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");var eu=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return Ot.create(this.#e.toOperationNode(),F.create(this.#t))}};n(eu,"AliasedSelectQueryBuilder");var bn=class{nodeStack=[];#e=d({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this)});transformNode(e){if(!e)return e;this.nodeStack.push(e);let r=this.transformNodeImpl(e);return this.nodeStack.pop(),d(r)}transformNodeImpl(e){return this.#e[e.kind](e)}transformNodeList(e){return e&&d(e.map(r=>this.transformNode(r)))}transformSelectQuery(e){return{kind:"SelectQueryNode",from:this.transformNode(e.from),selections:this.transformNodeList(e.selections),distinctOn:this.transformNodeList(e.distinctOn),joins:this.transformNodeList(e.joins),groupBy:this.transformNode(e.groupBy),orderBy:this.transformNode(e.orderBy),where:this.transformNode(e.where),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),limit:this.transformNode(e.limit),offset:this.transformNode(e.offset),with:this.transformNode(e.with),having:this.transformNode(e.having),explain:this.transformNode(e.explain),setOperations:this.transformNodeList(e.setOperations)}}transformSelection(e){return{kind:"SelectionNode",selection:this.transformNode(e.selection)}}transformColumn(e){return{kind:"ColumnNode",column:this.transformNode(e.column)}}transformAlias(e){return{kind:"AliasNode",node:this.transformNode(e.node),alias:this.transformNode(e.alias)}}transformTable(e){return{kind:"TableNode",table:this.transformNode(e.table)}}transformFrom(e){return{kind:"FromNode",froms:this.transformNodeList(e.froms)}}transformReference(e){return{kind:"ReferenceNode",table:this.transformNode(e.table),column:this.transformNode(e.column)}}transformAnd(e){return{kind:"AndNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformOr(e){return{kind:"OrNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformValueList(e){return{kind:"ValueListNode",values:this.transformNodeList(e.values)}}transformParens(e){return{kind:"ParensNode",node:this.transformNode(e.node)}}transformJoin(e){return{kind:"JoinNode",joinType:e.joinType,table:this.transformNode(e.table),on:this.transformNode(e.on)}}transformRaw(e){return{kind:"RawNode",sqlFragments:d([...e.sqlFragments]),parameters:this.transformNodeList(e.parameters)}}transformWhere(e){return{kind:"WhereNode",where:this.transformNode(e.where)}}transformInsertQuery(e){return{kind:"InsertQueryNode",into:this.transformNode(e.into),columns:this.transformNodeList(e.columns),values:this.transformNode(e.values),returning:this.transformNode(e.returning),onConflict:this.transformNode(e.onConflict),onDuplicateKey:this.transformNode(e.onDuplicateKey),with:this.transformNode(e.with),ignore:e.ignore,replace:e.replace,explain:this.transformNode(e.explain)}}transformValues(e){return{kind:"ValuesNode",values:this.transformNodeList(e.values)}}transformDeleteQuery(e){return{kind:"DeleteQueryNode",from:this.transformNode(e.from),using:this.transformNode(e.using),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),returning:this.transformNode(e.returning),with:this.transformNode(e.with),orderBy:this.transformNode(e.orderBy),limit:this.transformNode(e.limit),explain:this.transformNode(e.explain)}}transformReturning(e){return{kind:"ReturningNode",selections:this.transformNodeList(e.selections)}}transformCreateTable(e){return{kind:"CreateTableNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),constraints:this.transformNodeList(e.constraints),temporary:e.temporary,ifNotExists:e.ifNotExists,onCommit:e.onCommit,frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers)}}transformColumnDefinition(e){return{kind:"ColumnDefinitionNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),references:this.transformNode(e.references),primaryKey:e.primaryKey,autoIncrement:e.autoIncrement,unique:e.unique,notNull:e.notNull,unsigned:e.unsigned,defaultTo:this.transformNode(e.defaultTo),check:this.transformNode(e.check),generated:this.transformNode(e.generated),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers)}}transformAddColumn(e){return{kind:"AddColumnNode",column:this.transformNode(e.column)}}transformDropTable(e){return{kind:"DropTableNode",table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformOrderBy(e){return{kind:"OrderByNode",items:this.transformNodeList(e.items)}}transformOrderByItem(e){return{kind:"OrderByItemNode",orderBy:this.transformNode(e.orderBy),direction:this.transformNode(e.direction)}}transformGroupBy(e){return{kind:"GroupByNode",items:this.transformNodeList(e.items)}}transformGroupByItem(e){return{kind:"GroupByItemNode",groupBy:this.transformNode(e.groupBy)}}transformUpdateQuery(e){return{kind:"UpdateQueryNode",table:this.transformNode(e.table),from:this.transformNode(e.from),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),updates:this.transformNodeList(e.updates),returning:this.transformNode(e.returning),with:this.transformNode(e.with),explain:this.transformNode(e.explain)}}transformColumnUpdate(e){return{kind:"ColumnUpdateNode",column:this.transformNode(e.column),value:this.transformNode(e.value)}}transformLimit(e){return{kind:"LimitNode",limit:this.transformNode(e.limit)}}transformOffset(e){return{kind:"OffsetNode",offset:this.transformNode(e.offset)}}transformOnConflict(e){return{kind:"OnConflictNode",columns:this.transformNodeList(e.columns),constraint:this.transformNode(e.constraint),indexExpression:this.transformNode(e.indexExpression),indexWhere:this.transformNode(e.indexWhere),updates:this.transformNodeList(e.updates),updateWhere:this.transformNode(e.updateWhere),doNothing:e.doNothing}}transformOnDuplicateKey(e){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(e.updates)}}transformCreateIndex(e){return{kind:"CreateIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),expression:this.transformNode(e.expression),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists}}transformList(e){return{kind:"ListNode",items:this.transformNodeList(e.items)}}transformDropIndex(e){return{kind:"DropIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformPrimaryKeyConstraint(e){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformUniqueConstraint(e){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformForeignKeyConstraint(e){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(e.columns),references:this.transformNode(e.references),name:this.transformNode(e.name),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformSetOperation(e){return{kind:"SetOperationNode",operator:e.operator,expression:this.transformNode(e.expression),all:e.all}}transformReferences(e){return{kind:"ReferencesNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformCheckConstraint(e){return{kind:"CheckConstraintNode",expression:this.transformNode(e.expression),name:this.transformNode(e.name)}}transformWith(e){return{kind:"WithNode",expressions:this.transformNodeList(e.expressions),recursive:e.recursive}}transformCommonTableExpression(e){return{kind:"CommonTableExpressionNode",name:this.transformNode(e.name),expression:this.transformNode(e.expression)}}transformCommonTableExpressionName(e){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns)}}transformHaving(e){return{kind:"HavingNode",having:this.transformNode(e.having)}}transformCreateSchema(e){return{kind:"CreateSchemaNode",schema:this.transformNode(e.schema),ifNotExists:e.ifNotExists}}transformDropSchema(e){return{kind:"DropSchemaNode",schema:this.transformNode(e.schema),ifExists:e.ifExists,cascade:e.cascade}}transformAlterTable(e){return{kind:"AlterTableNode",table:this.transformNode(e.table),renameTo:this.transformNode(e.renameTo),setSchema:this.transformNode(e.setSchema),columnAlterations:this.transformNodeList(e.columnAlterations),addConstraint:this.transformNode(e.addConstraint),dropConstraint:this.transformNode(e.dropConstraint)}}transformDropColumn(e){return{kind:"DropColumnNode",column:this.transformNode(e.column)}}transformRenameColumn(e){return{kind:"RenameColumnNode",column:this.transformNode(e.column),renameTo:this.transformNode(e.renameTo)}}transformAlterColumn(e){return{kind:"AlterColumnNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),dataTypeExpression:this.transformNode(e.dataTypeExpression),setDefault:this.transformNode(e.setDefault),dropDefault:e.dropDefault,setNotNull:e.setNotNull,dropNotNull:e.dropNotNull}}transformModifyColumn(e){return{kind:"ModifyColumnNode",column:this.transformNode(e.column)}}transformAddConstraint(e){return{kind:"AddConstraintNode",constraint:this.transformNode(e.constraint)}}transformDropConstraint(e){return{kind:"DropConstraintNode",constraintName:this.transformNode(e.constraintName),ifExists:e.ifExists,modifier:e.modifier}}transformCreateView(e){return{kind:"CreateViewNode",name:this.transformNode(e.name),temporary:e.temporary,orReplace:e.orReplace,ifNotExists:e.ifNotExists,materialized:e.materialized,columns:this.transformNodeList(e.columns),as:this.transformNode(e.as)}}transformDropView(e){return{kind:"DropViewNode",name:this.transformNode(e.name),ifExists:e.ifExists,materialized:e.materialized,cascade:e.cascade}}transformGenerated(e){return{kind:"GeneratedNode",byDefault:e.byDefault,always:e.always,identity:e.identity,stored:e.stored,expression:this.transformNode(e.expression)}}transformDefaultValue(e){return{kind:"DefaultValueNode",defaultValue:this.transformNode(e.defaultValue)}}transformOn(e){return{kind:"OnNode",on:this.transformNode(e.on)}}transformSelectModifier(e){return{kind:"SelectModifierNode",modifier:e.modifier,rawModifier:this.transformNode(e.rawModifier)}}transformCreateType(e){return{kind:"CreateTypeNode",name:this.transformNode(e.name),enum:this.transformNode(e.enum)}}transformDropType(e){return{kind:"DropTypeNode",name:this.transformNode(e.name),ifExists:e.ifExists}}transformExplain(e){return{kind:"ExplainNode",format:e.format,options:this.transformNode(e.options)}}transformSchemableIdentifier(e){return{kind:"SchemableIdentifierNode",schema:this.transformNode(e.schema),identifier:this.transformNode(e.identifier)}}transformAggregateFunction(e){return{kind:"AggregateFunctionNode",aggregated:this.transformNode(e.aggregated),distinct:e.distinct,filter:this.transformNode(e.filter),func:e.func,over:this.transformNode(e.over)}}transformOver(e){return{kind:"OverNode",orderBy:this.transformNode(e.orderBy),partitionBy:this.transformNode(e.partitionBy)}}transformPartitionBy(e){return{kind:"PartitionByNode",items:this.transformNodeList(e.items)}}transformPartitionByItem(e){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(e.partitionBy)}}transformBinaryOperation(e){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(e.leftOperand),operator:this.transformNode(e.operator),rightOperand:this.transformNode(e.rightOperand)}}transformUnaryOperation(e){return{kind:"UnaryOperationNode",operator:this.transformNode(e.operator),operand:this.transformNode(e.operand)}}transformUsing(e){return{kind:"UsingNode",tables:this.transformNodeList(e.tables)}}transformDataType(e){return e}transformSelectAll(e){return e}transformIdentifier(e){return e}transformValue(e){return e}transformPrimitiveValueList(e){return e}transformOperator(e){return e}transformDefaultInsertValue(e){return e}};n(bn,"OperationNodeTransformer");var aq=d({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0}),Wa=class extends bn{#e;#t=new Set;constructor(e){super(),this.#e=e}transformNodeImpl(e){if(!this.#r(e))return super.transformNodeImpl(e);let r=this.#i(e);for(let s of r)this.#t.add(s);let i=super.transformNodeImpl(e);for(let s of r)this.#t.delete(s);return i}transformSchemableIdentifier(e){let r=super.transformSchemableIdentifier(e);return r.schema||!this.#t.has(e.identifier.name)?r:{...r,schema:F.create(this.#e)}}transformReferences(e){let r=super.transformReferences(e);return r.table.table.schema?r:{...r,table:at.createWithSchema(this.#e,r.table.table.identifier.name)}}#r(e){return e.kind in aq}#i(e){let r=new Set;if("name"in e&&e.name&&ot.is(e.name)&&this.#s(e.name,r),"from"in e&&e.from)for(let i of e.from.froms)this.#n(i,r);if("into"in e&&e.into&&this.#n(e.into,r),"table"in e&&e.table&&this.#n(e.table,r),"joins"in e&&e.joins)for(let i of e.joins)this.#n(i.table,r);return"with"in e&&e.with&&this.#o(e.with,r),r}#n(e,r){let i=at.is(e)?e:Ot.is(e)&&at.is(e.node)?e.node:null;i&&this.#s(i.table,r)}#s(e,r){this.#t.has(e.identifier.name)||r.add(e.identifier.name)}#o(e,r){for(let i of e.expressions)r.delete(i.name.table.table.identifier.name)}};n(Wa,"WithSchemaTransformer");var Jt=class{#e;constructor(e){this.#e=new Wa(e)}transformQuery(e){return this.#e.transformNode(e.node)}async transformResult(e){return e.result}};n(Jt,"WithSchemaPlugin");var ev=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function tv(t){let e="";for(let r=0;r<t;++r)e+=cq();return e}n(tv,"randomString");function cq(){return ev[~~(Math.random()*ev.length)]}n(cq,"randomChar");function j(){return new tu}n(j,"createQueryId");var tu=class{#e;get queryId(){return this.#e===void 0&&(this.#e=tv(8)),this.#e}};n(tu,"LazyQueryId");var qe=d({is(t){return t.kind==="AggregateFunctionNode"},create(t,e){return d({kind:"AggregateFunctionNode",func:t,aggregated:e})},cloneWithDistinct(t){return d({...t,distinct:!0})},cloneWithFilter(t,e){return d({...t,filter:t.filter?Re.cloneWithOperation(t.filter,"And",e):Re.create(e)})},cloneWithOrFilter(t,e){return d({...t,filter:t.filter?Re.cloneWithOperation(t.filter,"Or",e):Re.create(e)})},cloneWithOver(t,e){return d({...t,over:e})}});function rv(t){return de.create(t.length>1?["coalesce(",...new Array(t.length-1).fill(", "),")"]:["coalesce(",")"],Ti(t))}n(rv,"parseCoalesce");var ys=class{#e;#t;#r;constructor(){this.#e=new Promise((e,r)=>{this.#r=r,this.#t=e})}get promise(){return this.#e}resolve=e=>{this.#t&&this.#t(e)};reject=e=>{this.#r&&this.#r(e)}};n(ys,"Deferred");var iv=new Set;function nv(t){iv.has(t)||(iv.add(t),console.log(t))}n(nv,"logOnce");var dq=d([]),xn=class{#e;constructor(e=dq){this.#e=e}get plugins(){return this.#e}transformQuery(e,r){for(let i of this.#e){let s=i.transformQuery({node:e,queryId:r});if(s.kind===e.kind)e=s;else throw new Error(["KyselyPlugin.transformQuery must return a node","of the same kind that was given to it.",`The plugin was given a ${e.kind}`,`but it returned a ${s.kind}`].join(" "))}return e}async executeQuery(e,r){return await this.provideConnection(async i=>{let s=await i.executeQuery(e),o=await this.#t(s,r);return uq(s,o),o})}async*stream(e,r,i){let s=new ys,o=new ys;this.provideConnection(async c=>(s.resolve(c),await o.promise)).catch(c=>s.reject(c));let a=await s.promise;try{for await(let c of a.streamQuery(e,r))yield await this.#t(c,i)}finally{o.resolve()}}async#t(e,r){for(let i of this.#e)e=await i.transformResult({result:e,queryId:r});return e}};n(xn,"QueryExecutorBase");function uq(t,e){let{numAffectedRows:r}=t;r===void 0&&t.numUpdatedOrDeletedRows===void 0||r!==void 0&&e.numAffectedRows!==void 0||nv("kysely:warning: outdated driver/plugin detected! QueryResult.numUpdatedOrDeletedRows is deprecated and will be removed in a future release.")}n(uq,"warnOfOutdatedDriverOrPlugins");var Jr=class extends xn{get adapter(){throw new Error("this query cannot be compiled to SQL")}compileQuery(){throw new Error("this query cannot be compiled to SQL")}provideConnection(){throw new Error("this query cannot be executed")}withConnectionProvider(){throw new Error("this query cannot have a connection provider")}withPlugin(e){return new Jr([...this.plugins,e])}withPlugins(e){return new Jr([...this.plugins,...e])}withPluginAtFront(e){return new Jr([e,...this.plugins])}withoutPlugins(){return new Jr([])}};n(Jr,"NoopQueryExecutor");var An=new Jr;var be=class{#e;constructor(e){this.#e=d(e)}get expressionType(){}as(e){return new ru(this,e)}$castTo(){return new be({...this.#e})}castTo(){return this.$castTo()}withPlugin(e){return new be({...this.#e,plugins:this.#e.plugins!==void 0?d([...this.#e.plugins,e]):d([e])})}toOperationNode(){let e=this.#e.plugins!==void 0?An.withPlugins(this.#e.plugins):An;return this.#t(e)}async execute(e){let r=this.#e.plugins!==void 0?e.getExecutor().withPlugins(this.#e.plugins):e.getExecutor();return r.executeQuery(this.#r(r),this.#e.queryId)}#t(e){return e.transformQuery(this.#e.rawNode,this.#e.queryId)}#r(e){return e.compileQuery(this.#t(e),this.#e.queryId)}};n(be,"RawBuilder");R(be,"don't await RawBuilder instances directly. To execute the query you need to call `execute`");var ru=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return Ot.create(this.#e.toOperationNode(),Fe(this.#t)?this.#t.toOperationNode():F.create(this.#t))}};n(ru,"AliasedRawBuilder");var ye=class{#e;constructor(e){this.#e=d(e)}get expressionType(){}as(e){return new iu(this,e)}distinct(){return new ye({...this.#e,aggregateFunctionNode:qe.cloneWithDistinct(this.#e.aggregateFunctionNode)})}filterWhere(...e){return new ye({...this.#e,aggregateFunctionNode:qe.cloneWithFilter(this.#e.aggregateFunctionNode,Le(e))})}filterWhereExists(e){return new ye({...this.#e,aggregateFunctionNode:qe.cloneWithFilter(this.#e.aggregateFunctionNode,he(e))})}filterWhereNotExists(e){return new ye({...this.#e,aggregateFunctionNode:qe.cloneWithFilter(this.#e.aggregateFunctionNode,_e(e))})}filterWhereRef(e,r,i){return new ye({...this.#e,aggregateFunctionNode:qe.cloneWithFilter(this.#e.aggregateFunctionNode,ue(e,r,i))})}orFilterWhere(...e){return new ye({...this.#e,aggregateFunctionNode:qe.cloneWithOrFilter(this.#e.aggregateFunctionNode,Le(e))})}orFilterWhereExists(e){return new ye({...this.#e,aggregateFunctionNode:qe.cloneWithOrFilter(this.#e.aggregateFunctionNode,he(e))})}orFilterWhereNotExists(e){return new ye({...this.#e,aggregateFunctionNode:qe.cloneWithOrFilter(this.#e.aggregateFunctionNode,_e(e))})}orFilterWhereRef(e,r,i){return new ye({...this.#e,aggregateFunctionNode:qe.cloneWithOrFilter(this.#e.aggregateFunctionNode,ue(e,r,i))})}over(e){let r=sv();return new ye({...this.#e,aggregateFunctionNode:qe.cloneWithOver(this.#e.aggregateFunctionNode,(e?e(r):r).toOperationNode())})}toOperationNode(){return this.#e.aggregateFunctionNode}};n(ye,"AggregateFunctionBuilder");R(ye,"don't await AggregateFunctionBuilder instances. They are never executed directly and are always just a part of a query.");var iu=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return Ot.create(this.#e.toOperationNode(),F.create(this.#t))}};n(iu,"AliasedAggregateFunctionBuilder");var Tn=class{constructor(){this.avg=this.avg.bind(this),this.coalesce=this.coalesce.bind(this),this.count=this.count.bind(this),this.countAll=this.countAll.bind(this),this.max=this.max.bind(this),this.min=this.min.bind(this),this.sum=this.sum.bind(this)}avg(e){return new ye({aggregateFunctionNode:qe.create("avg",Gr(e))})}coalesce(e,...r){return new be({queryId:j(),rawNode:rv([e,...r])})}count(e){return new ye({aggregateFunctionNode:qe.create("count",Gr(e))})}countAll(e){return new ye({aggregateFunctionNode:qe.create("count",dr(e)[0].selection)})}max(e){return new ye({aggregateFunctionNode:qe.create("max",Gr(e))})}min(e){return new ye({aggregateFunctionNode:qe.create("min",Gr(e))})}sum(e){return new ye({aggregateFunctionNode:qe.create("sum",Gr(e))})}};n(Tn,"FunctionModule");var On=class{#e;constructor(e){this.#e=d(e)}get fn(){return new Tn}selectFrom(e){return new N({queryId:j(),executor:this.#e.executor,queryNode:k.create(Kt(e))})}withSchema(e){return new On({...this.#e,executor:this.#e.executor.withPluginAtFront(new Jt(e))})}ref(e){return new be({queryId:j(),plugins:this.#e.executor.plugins,rawNode:de.createWithChild(Hr(e))})}};n(On,"ExpressionBuilder");var Be=class{#e;constructor(e){this.#e=d(e)}on(...e){return new Be({...this.#e,joinNode:ct.cloneWithOn(this.#e.joinNode,C_(e))})}orOn(...e){return new Be({...this.#e,joinNode:ct.cloneWithOrOn(this.#e.joinNode,C_(e))})}onRef(e,r,i){return new Be({...this.#e,joinNode:ct.cloneWithOn(this.#e.joinNode,ue(e,r,i))})}orOnRef(e,r,i){return new Be({...this.#e,joinNode:ct.cloneWithOrOn(this.#e.joinNode,ue(e,r,i))})}onExists(e){return new Be({...this.#e,joinNode:ct.cloneWithOn(this.#e.joinNode,he(e))})}onNotExists(e){return new Be({...this.#e,joinNode:ct.cloneWithOn(this.#e.joinNode,_e(e))})}orOnExists(e){return new Be({...this.#e,joinNode:ct.cloneWithOrOn(this.#e.joinNode,he(e))})}orOnNotExists(e){return new Be({...this.#e,joinNode:ct.cloneWithOrOn(this.#e.joinNode,_e(e))})}onTrue(){return new Be({...this.#e,joinNode:ct.cloneWithOn(this.#e.joinNode,de.createWithSql("true"))})}toOperationNode(){return this.#e.joinNode}};n(Be,"JoinBuilder");R(Be,"don't await JoinBuilder instances. They are never executed directly and are always just a part of a query.");var ov=d({is(t){return t.kind==="PartitionByItemNode"},create(t){return d({kind:"PartitionByItemNode",partitionBy:t})}});function av(t){return Ti(t).map(ov.create)}n(av,"parsePartitionBy");var Kr=class{#e;constructor(e){this.#e=d(e)}orderBy(e,r){return new Kr({overNode:Fa.cloneWithOrderByItem(this.#e.overNode,_s(e,r))})}partitionBy(e){return new Kr({overNode:Fa.cloneWithPartitionByItems(this.#e.overNode,av(e))})}toOperationNode(){return this.#e.overNode}};n(Kr,"OverBuilder");R(Kr,"don't await OverBuilder instances. They are never executed directly and are always just a part of a query.");var cv=d({is(t){return t.kind==="ValuesNode"},create(t){return d({kind:"ValuesNode",values:d(t)})}});var dv=d({is(t){return t.kind==="DefaultInsertValueNode"},create(){return d({kind:"DefaultInsertValueNode"})}});function uv(t){return lq(Array.isArray(t)?t:[t])}n(uv,"parseInsertObjectOrList");function lq(t){let e=pq(t);return[d([...e.keys()].map(W.create)),cv.create(t.map(r=>fq(r,e)))]}n(lq,"parseInsertColumnsAndValues");function pq(t){let e=new Map;for(let r of t){let i=Object.keys(r);for(let s of i)!e.has(s)&&r[s]!==void 0&&e.set(s,e.size)}return e}n(pq,"parseColumnNamesAndIndexes");function fq(t,e){let r=Object.keys(t),i=Array.from({length:e.size}),s=!1;for(let a of r){let c=e.get(a);if(c!==void 0){let l=t[a];Sn(l)&&(s=!0),i[c]=l}}if(r.length<e.size||s){let a=dv.create();return ms.create(i.map(c=>CE(c)?a:cr(c)))}return Jd.create(i)}n(fq,"parseRowValues");var lv=d({is(t){return t.kind==="ColumnUpdateNode"},create(t,e){return d({kind:"ColumnUpdateNode",column:t,value:e})}});function gs(t){return Object.entries(t).filter(([e,r])=>r!==void 0).map(([e,r])=>lv.create(W.create(e),cr(r)))}n(gs,"parseUpdateObject");var pv=d({is(t){return t.kind==="OnDuplicateKeyNode"},create(t){return d({kind:"OnDuplicateKeyNode",updates:t})}});var ja=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get insertId(){return this.#e}get numInsertedOrUpdatedRows(){return this.#t}};n(ja,"InsertResult");var Z=d({is(t){return t.kind==="OnConflictNode"},create(){return d({kind:"OnConflictNode"})},cloneWith(t,e){return d({...t,...e})},cloneWithIndexWhere(t,e){return d({...t,indexWhere:t.indexWhere?Re.cloneWithOperation(t.indexWhere,"And",e):Re.create(e)})},cloneWithIndexOrWhere(t,e){return d({...t,indexWhere:t.indexWhere?Re.cloneWithOperation(t.indexWhere,"Or",e):Re.create(e)})},cloneWithUpdateWhere(t,e){return d({...t,updateWhere:t.updateWhere?Re.cloneWithOperation(t.updateWhere,"And",e):Re.create(e)})},cloneWithUpdateOrWhere(t,e){return d({...t,updateWhere:t.updateWhere?Re.cloneWithOperation(t.updateWhere,"Or",e):Re.create(e)})},cloneWithoutIndexWhere(t){return d({...t,indexWhere:void 0})},cloneWithoutUpdateWhere(t){return d({...t,updateWhere:void 0})}});var xe=class{#e;constructor(e){this.#e=d(e)}column(e){let r=W.create(e);return new xe({...this.#e,onConflictNode:Z.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?d([...this.#e.onConflictNode.columns,r]):d([r])})})}columns(e){let r=e.map(W.create);return new xe({...this.#e,onConflictNode:Z.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?d([...this.#e.onConflictNode.columns,...r]):d(r)})})}constraint(e){return new xe({...this.#e,onConflictNode:Z.cloneWith(this.#e.onConflictNode,{constraint:F.create(e)})})}expression(e){return new xe({...this.#e,onConflictNode:Z.cloneWith(this.#e.onConflictNode,{indexExpression:e.toOperationNode()})})}where(...e){return new xe({...this.#e,onConflictNode:Z.cloneWithIndexWhere(this.#e.onConflictNode,Le(e))})}whereRef(e,r,i){return new xe({...this.#e,onConflictNode:Z.cloneWithIndexWhere(this.#e.onConflictNode,ue(e,r,i))})}orWhere(...e){return new xe({...this.#e,onConflictNode:Z.cloneWithIndexOrWhere(this.#e.onConflictNode,Le(e))})}orWhereRef(e,r,i){return new xe({...this.#e,onConflictNode:Z.cloneWithIndexOrWhere(this.#e.onConflictNode,ue(e,r,i))})}whereExists(e){return new xe({...this.#e,onConflictNode:Z.cloneWithIndexWhere(this.#e.onConflictNode,he(e))})}whereNotExists(e){return new xe({...this.#e,onConflictNode:Z.cloneWithIndexWhere(this.#e.onConflictNode,_e(e))})}orWhereExists(e){return new xe({...this.#e,onConflictNode:Z.cloneWithIndexOrWhere(this.#e.onConflictNode,he(e))})}orWhereNotExists(e){return new xe({...this.#e,onConflictNode:Z.cloneWithIndexOrWhere(this.#e.onConflictNode,_e(e))})}clearWhere(){return new xe({...this.#e,onConflictNode:Z.cloneWithoutIndexWhere(this.#e.onConflictNode)})}doNothing(){return new Va({...this.#e,onConflictNode:Z.cloneWith(this.#e.onConflictNode,{doNothing:!0})})}doUpdateSet(e){return new Xe({...this.#e,onConflictNode:Z.cloneWith(this.#e.onConflictNode,{updates:gs(e)})})}};n(xe,"OnConflictBuilder");R(xe,"don't await OnConflictBuilder instances.");var Va=class{#e;constructor(e){this.#e=d(e)}toOperationNode(){return this.#e.onConflictNode}};n(Va,"OnConflictDoNothingBuilder");R(Va,"don't await OnConflictDoNothingBuilder instances.");var Xe=class{#e;constructor(e){this.#e=d(e)}where(...e){return new Xe({...this.#e,onConflictNode:Z.cloneWithUpdateWhere(this.#e.onConflictNode,Le(e))})}whereRef(e,r,i){return new Xe({...this.#e,onConflictNode:Z.cloneWithUpdateWhere(this.#e.onConflictNode,ue(e,r,i))})}orWhere(...e){return new Xe({...this.#e,onConflictNode:Z.cloneWithUpdateOrWhere(this.#e.onConflictNode,Le(e))})}orWhereRef(e,r,i){return new Xe({...this.#e,onConflictNode:Z.cloneWithUpdateOrWhere(this.#e.onConflictNode,ue(e,r,i))})}whereExists(e){return new Xe({...this.#e,onConflictNode:Z.cloneWithUpdateWhere(this.#e.onConflictNode,he(e))})}whereNotExists(e){return new Xe({...this.#e,onConflictNode:Z.cloneWithUpdateWhere(this.#e.onConflictNode,_e(e))})}orWhereExists(e){return new Xe({...this.#e,onConflictNode:Z.cloneWithUpdateOrWhere(this.#e.onConflictNode,he(e))})}orWhereNotExists(e){return new Xe({...this.#e,onConflictNode:Z.cloneWithUpdateOrWhere(this.#e.onConflictNode,_e(e))})}clearWhere(){return new Xe({...this.#e,onConflictNode:Z.cloneWithoutUpdateWhere(this.#e.onConflictNode)})}toOperationNode(){return this.#e.onConflictNode}};n(Xe,"OnConflictUpdateBuilder");R(Xe,"don't await OnConflictUpdateBuilder instances.");var ge=class{#e;constructor(e){this.#e=d(e)}values(e){let[r,i]=uv(e);return new ge({...this.#e,queryNode:Qe.cloneWith(this.#e.queryNode,{columns:r,values:i})})}columns(e){return new ge({...this.#e,queryNode:Qe.cloneWith(this.#e.queryNode,{columns:d(e.map(W.create))})})}expression(e){return new ge({...this.#e,queryNode:Qe.cloneWith(this.#e.queryNode,{values:fs(e)})})}ignore(){return new ge({...this.#e,queryNode:Qe.cloneWith(this.#e.queryNode,{ignore:!0})})}onConflict(e){return new ge({...this.#e,queryNode:Qe.cloneWith(this.#e.queryNode,{onConflict:e(new xe({onConflictNode:Z.create()})).toOperationNode()})})}onDuplicateKeyUpdate(e){return new ge({...this.#e,queryNode:Qe.cloneWith(this.#e.queryNode,{onDuplicateKey:pv.create(gs(e))})})}returning(e){return new ge({...this.#e,queryNode:q.cloneWithReturning(this.#e.queryNode,Pi(e))})}returningAll(){return new ge({...this.#e,queryNode:q.cloneWithReturning(this.#e.queryNode,dr())})}$call(e){return e(this)}call(e){return this.$call(e)}$if(e,r){return e?r(this):new ge({...this.#e})}if(e,r){return this.$if(e,r)}$castTo(){return new ge(this.#e)}castTo(){return this.$castTo()}$assertType(){return new ge(this.#e)}assertType(){return new ge(this.#e)}withPlugin(e){return new ge({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile(),r=e.query,i=await this.#e.executor.executeQuery(e,this.#e.queryId);return this.#e.executor.adapter.supportsReturning&&r.returning?i.rows:[new ja(i.insertId,i.numAffectedRows??i.numUpdatedOrDeletedRows)]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=Bt){let r=await this.executeTakeFirst();if(r===void 0)throw new e(this.toOperationNode());return r}async explain(e,r){return await new ge({...this.#e,queryNode:Qe.cloneWith(this.#e.queryNode,{explain:Ii.create(e,r?.toOperationNode())})}).execute()}};n(ge,"InsertQueryBuilder");R(ge,"don't await InsertQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");var $a=class{#e;constructor(e){this.#e=e}get numDeletedRows(){return this.#e}};n($a,"DeleteResult");var G=class{#e;constructor(e){this.#e=d(e)}where(...e){return new G({...this.#e,queryNode:q.cloneWithWhere(this.#e.queryNode,Le(e))})}whereRef(e,r,i){return new G({...this.#e,queryNode:q.cloneWithWhere(this.#e.queryNode,ue(e,r,i))})}orWhere(...e){return new G({...this.#e,queryNode:q.cloneWithOrWhere(this.#e.queryNode,Le(e))})}orWhereRef(e,r,i){return new G({...this.#e,queryNode:q.cloneWithOrWhere(this.#e.queryNode,ue(e,r,i))})}whereExists(e){return new G({...this.#e,queryNode:q.cloneWithWhere(this.#e.queryNode,he(e))})}whereNotExists(e){return new G({...this.#e,queryNode:q.cloneWithWhere(this.#e.queryNode,_e(e))})}orWhereExists(e){return new G({...this.#e,queryNode:q.cloneWithOrWhere(this.#e.queryNode,he(e))})}orWhereNotExists(e){return new G({...this.#e,queryNode:q.cloneWithOrWhere(this.#e.queryNode,_e(e))})}clearWhere(){return new G({...this.#e,queryNode:q.cloneWithoutWhere(this.#e.queryNode)})}using(e){return new G({...this.#e,queryNode:Br.cloneWithUsing(this.#e.queryNode,Kt(e))})}innerJoin(...e){return new G({...this.#e,queryNode:q.cloneWithJoin(this.#e.queryNode,ze("InnerJoin",e))})}leftJoin(...e){return new G({...this.#e,queryNode:q.cloneWithJoin(this.#e.queryNode,ze("LeftJoin",e))})}rightJoin(...e){return new G({...this.#e,queryNode:q.cloneWithJoin(this.#e.queryNode,ze("RightJoin",e))})}fullJoin(...e){return new G({...this.#e,queryNode:q.cloneWithJoin(this.#e.queryNode,ze("FullJoin",e))})}returning(e){return new G({...this.#e,queryNode:q.cloneWithReturning(this.#e.queryNode,Pi(e))})}returningAll(){return new G({...this.#e,queryNode:q.cloneWithReturning(this.#e.queryNode,dr())})}orderBy(e,r){return new G({...this.#e,queryNode:Br.cloneWithOrderByItem(this.#e.queryNode,_s(e,r))})}limit(e){return new G({...this.#e,queryNode:Br.cloneWithLimit(this.#e.queryNode,Xd.create(e))})}$call(e){return e(this)}call(e){return this.$call(e)}$if(e,r){return e?r(this):new G({...this.#e})}if(e,r){return this.$if(e,r)}$castTo(){return new G(this.#e)}castTo(){return this.$castTo()}$assertType(){return new G(this.#e)}assertType(){return new G(this.#e)}withPlugin(e){return new G({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile(),r=e.query,i=await this.#e.executor.executeQuery(e,this.#e.queryId);return this.#e.executor.adapter.supportsReturning&&r.returning?i.rows:[new $a(i.numAffectedRows??i.numUpdatedOrDeletedRows??0n)]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=Bt){let r=await this.executeTakeFirst();if(r===void 0)throw new e(this.toOperationNode());return r}async explain(e,r){return await new G({...this.#e,queryNode:Br.cloneWithExplain(this.#e.queryNode,Ii.create(e,r?.toOperationNode()))}).execute()}};n(G,"DeleteQueryBuilder");R(G,"don't await DeleteQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");var Ha=class{#e;constructor(e){this.#e=e}get numUpdatedRows(){return this.#e}};n(Ha,"UpdateResult");var Y=class{#e;constructor(e){this.#e=d(e)}where(...e){return new Y({...this.#e,queryNode:q.cloneWithWhere(this.#e.queryNode,Le(e))})}whereRef(e,r,i){return new Y({...this.#e,queryNode:q.cloneWithWhere(this.#e.queryNode,ue(e,r,i))})}orWhere(...e){return new Y({...this.#e,queryNode:q.cloneWithOrWhere(this.#e.queryNode,Le(e))})}orWhereRef(e,r,i){return new Y({...this.#e,queryNode:q.cloneWithOrWhere(this.#e.queryNode,ue(e,r,i))})}whereExists(e){return new Y({...this.#e,queryNode:q.cloneWithWhere(this.#e.queryNode,he(e))})}whereNotExists(e){return new Y({...this.#e,queryNode:q.cloneWithWhere(this.#e.queryNode,_e(e))})}orWhereExists(e){return new Y({...this.#e,queryNode:q.cloneWithOrWhere(this.#e.queryNode,he(e))})}orWhereNotExists(e){return new Y({...this.#e,queryNode:q.cloneWithOrWhere(this.#e.queryNode,_e(e))})}clearWhere(){return new Y({...this.#e,queryNode:q.cloneWithoutWhere(this.#e.queryNode)})}from(e){return new Y({...this.#e,queryNode:Ri.cloneWithFromItems(this.#e.queryNode,Kt(e))})}innerJoin(...e){return new Y({...this.#e,queryNode:q.cloneWithJoin(this.#e.queryNode,ze("InnerJoin",e))})}leftJoin(...e){return new Y({...this.#e,queryNode:q.cloneWithJoin(this.#e.queryNode,ze("LeftJoin",e))})}rightJoin(...e){return new Y({...this.#e,queryNode:q.cloneWithJoin(this.#e.queryNode,ze("RightJoin",e))})}fullJoin(...e){return new Y({...this.#e,queryNode:q.cloneWithJoin(this.#e.queryNode,ze("FullJoin",e))})}set(e){return new Y({...this.#e,queryNode:Ri.cloneWithUpdates(this.#e.queryNode,gs(e))})}returning(e){return new Y({...this.#e,queryNode:q.cloneWithReturning(this.#e.queryNode,Pi(e))})}returningAll(){return new Y({...this.#e,queryNode:q.cloneWithReturning(this.#e.queryNode,dr())})}$call(e){return e(this)}call(e){return this.$call(e)}$if(e,r){return e?r(this):new Y({...this.#e})}if(e,r){return this.$if(e,r)}$castTo(){return new Y(this.#e)}castTo(){return this.$castTo()}$assertType(){return new Y(this.#e)}assertType(){return new Y(this.#e)}withPlugin(e){return new Y({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile(),r=e.query,i=await this.#e.executor.executeQuery(e,this.#e.queryId);return this.#e.executor.adapter.supportsReturning&&r.returning?i.rows:[new Ha(i.numAffectedRows??i.numUpdatedOrDeletedRows??0n)]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=Bt){let r=await this.executeTakeFirst();if(r===void 0)throw new e(this.toOperationNode());return r}async explain(e,r){return await new Y({...this.#e,queryNode:Ri.cloneWithExplain(this.#e.queryNode,Ii.create(e,r?.toOperationNode()))}).execute()}};n(Y,"UpdateQueryBuilder");R(Y,"don't await UpdateQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");var fv=d({is(t){return t.kind==="CommonTableExpressionNode"},create(t,e){return d({kind:"CommonTableExpressionNode",name:t,expression:e})}});var L_=d({is(t){return t.kind==="CommonTableExpressionNameNode"},create(t,e){return d({kind:"CommonTableExpressionNameNode",table:at.create(t),columns:e?d(e.map(W.create)):void 0})}});function z_(t,e){let r=e(mv());return fv.create(mq(t),r.toOperationNode())}n(z_,"parseCommonTableExpression");function mq(t){if(t.includes("(")){let e=t.split(/[\(\)]/),r=e[0],i=e[1].split(",").map(s=>s.trim());return L_.create(r,i)}else return L_.create(t)}n(mq,"parseCommonTableExpressionName");var Ga=d({is(t){return t.kind==="WithNode"},create(t,e){return d({kind:"WithNode",expressions:d([t]),...e})},cloneWithExpression(t,e){return d({...t,expressions:d([...t.expressions,e])})}});var wt=class{#e;constructor(e){this.#e=d(e)}selectFrom(e){return new N({queryId:j(),executor:this.#e.executor,queryNode:k.create(Kt(e),this.#e.withNode)})}insertInto(e){return new ge({queryId:j(),executor:this.#e.executor,queryNode:Qe.create(ve(e),this.#e.withNode)})}replaceInto(e){return new ge({queryId:j(),executor:this.#e.executor,queryNode:Qe.create(ve(e),this.#e.withNode,!0)})}deleteFrom(e){return new G({queryId:j(),executor:this.#e.executor,queryNode:Br.create(Kt(e),this.#e.withNode)})}updateTable(e){return new Y({queryId:j(),executor:this.#e.executor,queryNode:Ri.create(Oi(e),this.#e.withNode)})}with(e,r){let i=z_(e,r);return new wt({...this.#e,withNode:this.#e.withNode?Ga.cloneWithExpression(this.#e.withNode,i):Ga.create(i)})}withRecursive(e,r){let i=z_(e,r);return new wt({...this.#e,withNode:this.#e.withNode?Ga.cloneWithExpression(this.#e.withNode,i):Ga.create(i,{recursive:!0})})}withPlugin(e){return new wt({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new wt({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new wt({...this.#e,executor:this.#e.executor.withPluginAtFront(new Jt(e))})}};n(wt,"QueryCreator");function I_(){return new N({queryId:j(),executor:An,queryNode:k.create(Kt([]))})}n(I_,"createSelectQueryBuilder");function U_(){return new On({executor:An})}n(U_,"createExpressionBuilder");function mv(){return new wt({executor:An})}n(mv,"createQueryCreator");function Yd(t,e){return new Be({joinNode:ct.create(t,Oi(e))})}n(Yd,"createJoinBuilder");function sv(){return new Kr({overNode:Fa.create()})}n(sv,"createOverBuilder");function fs(t){if(Fe(t))return t.toOperationNode();if(yt(t))return t(U_()).toOperationNode();throw new Error(`invalid expression: ${JSON.stringify(t)}`)}n(fs,"parseExpression");function Qd(t){if(Fe(t))return t.toOperationNode();if(yt(t))return t(U_()).toOperationNode();throw new Error(`invalid aliased expression: ${JSON.stringify(t)}`)}n(Qd,"parseAliasedExpression");function Sn(t){return zE(t)||UE(t)||yt(t)}n(Sn,"isExpressionOrFactory");function Kt(t){return xi(t)?t.map(e=>Oi(e)):[Oi(t)]}n(Kt,"parseTableExpressionOrList");function Oi(t){return Ge(t)?hq(t):Qd(t)}n(Oi,"parseTableExpression");function hq(t){let e=" as ";if(t.includes(e)){let[r,i]=t.split(e).map(hv);return Ot.create(ve(r),F.create(i))}else return ve(t)}n(hq,"parseAliasedTable");function ve(t){let e=".";if(t.includes(e)){let[r,i]=t.split(e).map(hv);return at.createWithSchema(r,i)}else return at.create(t)}n(ve,"parseTable");function hv(t){return t.trim()}n(hv,"trim");var W_=d({is(t){return t.kind==="AddColumnNode"},create(t){return d({kind:"AddColumnNode",column:t})}});var Yr=d({is(t){return t.kind==="AlterColumnNode"},create(t){return d({kind:"AlterColumnNode",column:W.create(t)})},cloneWith(t,e){return d({...t,...e})}});var le=d({is(t){return t.kind==="ColumnDefinitionNode"},create(t,e){return d({kind:"ColumnDefinitionNode",column:W.create(t),dataType:e})},cloneWithFrontModifier(t,e){return d({...t,frontModifiers:t.frontModifiers?d([...t.frontModifiers,e]):[e]})},cloneWithEndModifier(t,e){return d({...t,endModifiers:t.endModifiers?d([...t.endModifiers,e]):[e]})},cloneWith(t,e){return d({...t,...e})}});var j_=d({is(t){return t.kind==="DropColumnNode"},create(t){return d({kind:"DropColumnNode",column:W.create(t)})}});var V_=d({is(t){return t.kind==="RenameColumnNode"},create(t,e){return d({kind:"RenameColumnNode",column:W.create(t),renameTo:W.create(e)})}});var ws=d({is(t){return t.kind==="CheckConstraintNode"},create(t,e){return d({kind:"CheckConstraintNode",expression:t,name:e?F.create(e):void 0})}});var _v=["no action","restrict","cascade","set null","set default"],Es=d({is(t){return t.kind==="ReferencesNode"},create(t,e){return d({kind:"ReferencesNode",table:t,columns:d([...e])})},cloneWithOnDelete(t,e){return d({...t,onDelete:e})},cloneWithOnUpdate(t,e){return d({...t,onUpdate:e})}});function nu(t){return Fe(t)?t.toOperationNode():dt.createImmediate(t)}n(nu,"parseDefaultValueExpression");var Ba=d({is(t){return t.kind==="GeneratedNode"},create(t){return d({kind:"GeneratedNode",...t})},createWithExpression(t){return d({kind:"GeneratedNode",always:!0,expression:t})},cloneWith(t,e){return d({...t,...e})}});var yv=d({is(t){return t.kind==="DefaultValueNode"},create(t){return d({kind:"DefaultValueNode",defaultValue:t})}});function vs(t){if(_v.includes(t))return t;throw new Error(`invalid OnModifyForeignAction ${t}`)}n(vs,"parseOnModifyForeignAction");var X=class{#e;constructor(e){this.#e=e}autoIncrement(){return new X(le.cloneWith(this.#e,{autoIncrement:!0}))}primaryKey(){return new X(le.cloneWith(this.#e,{primaryKey:!0}))}references(e){let r=Hr(e);if(!vn.is(r)||ps.is(r.column))throw new Error(`invalid call references('${e}'). The reference must have format table.column or schema.table.column`);return new X(le.cloneWith(this.#e,{references:Es.create(r.table,[r.column])}))}onDelete(e){if(!this.#e.references)throw new Error("on delete constraint can only be added for foreign keys");return new X(le.cloneWith(this.#e,{references:Es.cloneWithOnDelete(this.#e.references,vs(e))}))}onUpdate(e){if(!this.#e.references)throw new Error("on update constraint can only be added for foreign keys");return new X(le.cloneWith(this.#e,{references:Es.cloneWithOnUpdate(this.#e.references,vs(e))}))}unique(){return new X(le.cloneWith(this.#e,{unique:!0}))}notNull(){return new X(le.cloneWith(this.#e,{notNull:!0}))}unsigned(){return new X(le.cloneWith(this.#e,{unsigned:!0}))}defaultTo(e){return new X(le.cloneWith(this.#e,{defaultTo:yv.create(nu(e))}))}check(e){return new X(le.cloneWith(this.#e,{check:ws.create(e.toOperationNode())}))}generatedAlwaysAs(e){return new X(le.cloneWith(this.#e,{generated:Ba.createWithExpression(e.toOperationNode())}))}generatedAlwaysAsIdentity(){return new X(le.cloneWith(this.#e,{generated:Ba.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new X(le.cloneWith(this.#e,{generated:Ba.create({identity:!0,byDefault:!0})}))}stored(){if(!this.#e.generated)throw new Error("stored() can only be called after generatedAlwaysAs");return new X(le.cloneWith(this.#e,{generated:Ba.cloneWith(this.#e.generated,{stored:!0})}))}modifyFront(e){return new X(le.cloneWithFrontModifier(this.#e,e.toOperationNode()))}modifyEnd(e){return new X(le.cloneWithEndModifier(this.#e,e.toOperationNode()))}toOperationNode(){return this.#e}};n(X,"ColumnDefinitionBuilder");R(X,"don't await ColumnDefinitionBuilder instances directly.");var $_=d({is(t){return t.kind==="ModifyColumnNode"},create(t){return d({kind:"ModifyColumnNode",column:t})}});var su=d({is(t){return t.kind==="DataTypeNode"},create(t){return d({kind:"DataTypeNode",dataType:t})}});function Pn(t){return Fe(t)?t.toOperationNode():su.create(t)}n(Pn,"parseDataTypeExpression");var Rn=d({is(t){return t.kind==="ForeignKeyConstraintNode"},create(t,e,r,i){return d({kind:"ForeignKeyConstraintNode",columns:t,references:Es.create(e,r),name:i?F.create(i):void 0})},cloneWith(t,e){return d({...t,...e})}});var Yt=class{#e;constructor(e){this.#e=e}onDelete(e){return new Yt(Rn.cloneWith(this.#e,{onDelete:vs(e)}))}onUpdate(e){return new Yt(Rn.cloneWith(this.#e,{onUpdate:vs(e)}))}toOperationNode(){return this.#e}};n(Yt,"ForeignKeyConstraintBuilder");R(Yt,"don't await ForeignKeyConstraintBuilder instances directly.");var Ja=d({is(t){return t.kind==="AddConstraintNode"},create(t){return d({kind:"AddConstraintNode",constraint:t})}});var ou=d({is(t){return t.kind==="UniqueConstraintNode"},create(t,e){return d({kind:"UniqueConstraintNode",columns:d(t.map(W.create)),name:e?F.create(e):void 0})}});var Ss=d({is(t){return t.kind==="DropConstraintNode"},create(t){return d({kind:"DropConstraintNode",constraintName:F.create(t)})},cloneWith(t,e){return d({...t,...e})}});var Ci=class{alterColumnNode;constructor(e){this.alterColumnNode=e}setDataType(e){return new qi(Yr.cloneWith(this.alterColumnNode,{dataType:su.create(e)}))}setDefault(e){return new qi(Yr.cloneWith(this.alterColumnNode,{setDefault:nu(e)}))}dropDefault(){return new qi(Yr.cloneWith(this.alterColumnNode,{dropDefault:!0}))}setNotNull(){return new qi(Yr.cloneWith(this.alterColumnNode,{setNotNull:!0}))}dropNotNull(){return new qi(Yr.cloneWith(this.alterColumnNode,{dropNotNull:!0}))}};n(Ci,"AlterColumnBuilder");var qi=class extends Ci{toOperationNode(){return this.alterColumnNode}};n(qi,"AlteredColumnBuilder");var Qr=class{#e;constructor(e){this.#e=d(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n(Qr,"AlterTableExecutor");R(Qr,"don't await AlterTableExecutor instances directly. To execute the query you need to call `execute`");var Xr=class{#e;constructor(e){this.#e=d(e)}onDelete(e){return new Xr({...this.#e,constraintBuilder:this.#e.constraintBuilder.onDelete(e)})}onUpdate(e){return new Xr({...this.#e,constraintBuilder:this.#e.constraintBuilder.onUpdate(e)})}toOperationNode(){return this.#e.executor.transformQuery(ce.cloneWithTableProps(this.#e.node,{addConstraint:Ja.create(this.#e.constraintBuilder.toOperationNode())}),this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n(Xr,"AlterTableAddForeignKeyConstraintBuilder");R(Xr,"don't await AlterTableAddForeignKeyConstraintBuilder instances directly. To execute the query you need to call `execute`");var ur=class{#e;constructor(e){this.#e=d(e)}ifExists(){return new ur({...this.#e,node:ce.cloneWithTableProps(this.#e.node,{dropConstraint:Ss.cloneWith(this.#e.node.dropConstraint,{ifExists:!0})})})}cascade(){return new ur({...this.#e,node:ce.cloneWithTableProps(this.#e.node,{dropConstraint:Ss.cloneWith(this.#e.node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new ur({...this.#e,node:ce.cloneWithTableProps(this.#e.node,{dropConstraint:Ss.cloneWith(this.#e.node.dropConstraint,{modifier:"restrict"})})})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n(ur,"AlterTableDropConstraintBuilder");R(ur,"don't await AlterTableDropConstraintBuilder instances directly. To execute the query you need to call `execute`");var Ns=class{#e;constructor(e){this.#e=d(e)}renameTo(e){return new Qr({...this.#e,node:ce.cloneWithTableProps(this.#e.node,{renameTo:ve(e)})})}setSchema(e){return new Qr({...this.#e,node:ce.cloneWithTableProps(this.#e.node,{setSchema:F.create(e)})})}alterColumn(e,r){let i=r(new Ci(Yr.create(e)));return new Ze({...this.#e,node:ce.cloneWithColumnAlteration(this.#e.node,i.toOperationNode())})}dropColumn(e){return new Ze({...this.#e,node:ce.cloneWithColumnAlteration(this.#e.node,j_.create(e))})}renameColumn(e,r){return new Ze({...this.#e,node:ce.cloneWithColumnAlteration(this.#e.node,V_.create(e,r))})}addColumn(e,r,i=Ai){let s=i(new X(le.create(e,Pn(r))));return new Ze({...this.#e,node:ce.cloneWithColumnAlteration(this.#e.node,W_.create(s.toOperationNode()))})}modifyColumn(e,r,i=Ai){let s=i(new X(le.create(e,Pn(r))));return new Ze({...this.#e,node:ce.cloneWithColumnAlteration(this.#e.node,$_.create(s.toOperationNode()))})}addUniqueConstraint(e,r){return new Qr({...this.#e,node:ce.cloneWithTableProps(this.#e.node,{addConstraint:Ja.create(ou.create(r,e))})})}addCheckConstraint(e,r){return new Qr({...this.#e,node:ce.cloneWithTableProps(this.#e.node,{addConstraint:Ja.create(ws.create(r.toOperationNode(),e))})})}addForeignKeyConstraint(e,r,i,s){return new Xr({...this.#e,constraintBuilder:new Yt(Rn.create(r.map(W.create),ve(i),s.map(W.create),e))})}dropConstraint(e){return new ur({...this.#e,node:ce.cloneWithTableProps(this.#e.node,{dropConstraint:Ss.create(e)})})}$call(e){return e(this)}call(e){return this.$call(e)}};n(Ns,"AlterTableBuilder");var Ze=class{#e;constructor(e){this.#e=d(e)}alterColumn(e,r){let i=r(new Ci(Yr.create(e)));return new Ze({...this.#e,node:ce.cloneWithColumnAlteration(this.#e.node,i.toOperationNode())})}dropColumn(e){return new Ze({...this.#e,node:ce.cloneWithColumnAlteration(this.#e.node,j_.create(e))})}renameColumn(e,r){return new Ze({...this.#e,node:ce.cloneWithColumnAlteration(this.#e.node,V_.create(e,r))})}addColumn(e,r,i=Ai){let s=i(new X(le.create(e,Pn(r))));return new Ze({...this.#e,node:ce.cloneWithColumnAlteration(this.#e.node,W_.create(s.toOperationNode()))})}modifyColumn(e,r,i=Ai){let s=i(new X(le.create(e,Pn(r))));return new Ze({...this.#e,node:ce.cloneWithColumnAlteration(this.#e.node,$_.create(s.toOperationNode()))})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n(Ze,"AlterTableColumnAlteringBuilder");R(Ns,"don't await AlterTableBuilder instances");R(Ci,"don't await AlterColumnBuilder instances");R(Ze,"don't await AlterTableColumnAlteringBuilder instances directly. To execute the query you need to call `execute`");var gv=d({is(t){return t.kind==="ListNode"},create(t){return d({kind:"ListNode",items:d(t)})}});var ut=class{#e;constructor(e){this.#e=d(e)}ifNotExists(){return new ut({...this.#e,node:or.cloneWith(this.#e.node,{ifNotExists:!0})})}unique(){return new ut({...this.#e,node:or.cloneWith(this.#e.node,{unique:!0})})}on(e){return new ut({...this.#e,node:or.cloneWith(this.#e.node,{table:ve(e)})})}column(e){return new ut({...this.#e,node:or.cloneWith(this.#e.node,{expression:za(e)})})}columns(e){return new ut({...this.#e,node:or.cloneWith(this.#e.node,{expression:gv.create(e.map(za))})})}expression(e){return new ut({...this.#e,node:or.cloneWith(this.#e.node,{expression:e.toOperationNode()})})}using(e){return new ut({...this.#e,node:or.cloneWith(this.#e.node,{using:de.createWithSql(e)})})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n(ut,"CreateIndexBuilder");R(ut,"don't await CreateIndexBuilder instances directly. To execute the query you need to call `execute`");var ki=class{#e;constructor(e){this.#e=d(e)}ifNotExists(){return new ki({...this.#e,node:$d.cloneWith(this.#e.node,{ifNotExists:!0})})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n(ki,"CreateSchemaBuilder");R(ki,"don't await CreateSchemaBuilder instances directly. To execute the query you need to call `execute`");var wv=d({is(t){return t.kind==="PrimaryKeyConstraintNode"},create(t,e){return d({kind:"PrimaryKeyConstraintNode",columns:d(t.map(W.create)),name:e?F.create(e):void 0})}});function Ev(t){if(LE.includes(t))return t;throw new Error(`invalid OnCommitAction ${t}`)}n(Ev,"parseOnCommitAction");var Ue=class{#e;constructor(e){this.#e=d(e)}temporary(){return new Ue({...this.#e,node:gt.cloneWith(this.#e.node,{temporary:!0})})}onCommit(e){return new Ue({...this.#e,node:gt.cloneWith(this.#e.node,{onCommit:Ev(e)})})}ifNotExists(){return new Ue({...this.#e,node:gt.cloneWith(this.#e.node,{ifNotExists:!0})})}addColumn(e,r,i=Ai){let s=i(new X(le.create(e,Pn(r))));return new Ue({...this.#e,node:gt.cloneWithColumn(this.#e.node,s.toOperationNode())})}addPrimaryKeyConstraint(e,r){return new Ue({...this.#e,node:gt.cloneWithConstraint(this.#e.node,wv.create(r,e))})}addUniqueConstraint(e,r){return new Ue({...this.#e,node:gt.cloneWithConstraint(this.#e.node,ou.create(r,e))})}addCheckConstraint(e,r){return new Ue({...this.#e,node:gt.cloneWithConstraint(this.#e.node,ws.create(r.toOperationNode(),e))})}addForeignKeyConstraint(e,r,i,s,o=Ai){let a=o(new Yt(Rn.create(r.map(W.create),ve(i),s.map(W.create),e)));return new Ue({...this.#e,node:gt.cloneWithConstraint(this.#e.node,a.toOperationNode())})}modifyFront(e){return new Ue({...this.#e,node:gt.cloneWithFrontModifier(this.#e.node,e.toOperationNode())})}modifyEnd(e){return new Ue({...this.#e,node:gt.cloneWithEndModifier(this.#e.node,e.toOperationNode())})}$call(e){return e(this)}call(e){return this.$call(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n(Ue,"CreateTableBuilder");R(Ue,"don't await CreateTableBuilder instances directly. To execute the query you need to call `execute`");var lr=class{#e;constructor(e){this.#e=d(e)}on(e){return new lr({...this.#e,node:cs.cloneWith(this.#e.node,{table:ve(e)})})}ifExists(){return new lr({...this.#e,node:cs.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new lr({...this.#e,node:cs.cloneWith(this.#e.node,{cascade:!0})})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n(lr,"DropIndexBuilder");R(lr,"don't await DropIndexBuilder instances directly. To execute the query you need to call `execute`");var Zr=class{#e;constructor(e){this.#e=d(e)}ifExists(){return new Zr({...this.#e,node:Ma.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new Zr({...this.#e,node:Ma.cloneWith(this.#e.node,{cascade:!0})})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n(Zr,"DropSchemaBuilder");R(Zr,"don't await DropSchemaBuilder instances directly. To execute the query you need to call `execute`");var ei=class{#e;constructor(e){this.#e=d(e)}ifExists(){return new ei({...this.#e,node:Da.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new ei({...this.#e,node:Da.cloneWith(this.#e.node,{cascade:!0})})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n(ei,"DropTableBuilder");R(ei,"don't await DropTableBuilder instances directly. To execute the query you need to call `execute`");var Qt=d({is(t){return t.kind==="CreateViewNode"},create(t){return d({kind:"CreateViewNode",name:ot.create(t)})},cloneWith(t,e){return d({...t,...e})}});var Ka=class extends bn{transformValue(e){return{...super.transformValue(e),immediate:!0}}};n(Ka,"ImmediateValueTransformer");var Ya=class{#e=new Ka;transformQuery(e){return this.#e.transformNode(e.node)}transformResult(e){return Promise.resolve(e.result)}};n(Ya,"ImmediateValuePlugin");var Et=class{#e;constructor(e){this.#e=d(e)}temporary(){return new Et({...this.#e,node:Qt.cloneWith(this.#e.node,{temporary:!0})})}materialized(){return new Et({...this.#e,node:Qt.cloneWith(this.#e.node,{materialized:!0})})}ifNotExists(){return new Et({...this.#e,node:Qt.cloneWith(this.#e.node,{ifNotExists:!0})})}orReplace(){return new Et({...this.#e,node:Qt.cloneWith(this.#e.node,{orReplace:!0})})}columns(e){return new Et({...this.#e,node:Qt.cloneWith(this.#e.node,{columns:e.map(za)})})}as(e){let r=e.withPlugin(new Ya).toOperationNode();return new Et({...this.#e,node:Qt.cloneWith(this.#e.node,{as:r})})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n(Et,"CreateViewBuilder");R(Et,"don't await CreateViewBuilder instances directly. To execute the query you need to call `execute`");var bs=d({is(t){return t.kind==="DropViewNode"},create(t){return d({kind:"DropViewNode",name:ot.create(t)})},cloneWith(t,e){return d({...t,...e})}});var pr=class{#e;constructor(e){this.#e=d(e)}materialized(){return new pr({...this.#e,node:bs.cloneWith(this.#e.node,{materialized:!0})})}ifExists(){return new pr({...this.#e,node:bs.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new pr({...this.#e,node:bs.cloneWith(this.#e.node,{cascade:!0})})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n(pr,"DropViewBuilder");R(pr,"don't await DropViewBuilder instances directly. To execute the query you need to call `execute`");var au=d({is(t){return t.kind==="CreateTypeNode"},create(t){return d({kind:"CreateTypeNode",name:t})},cloneWithEnum(t,e){return d({...t,enum:ms.create(e.map(r=>dt.createImmediate(r)))})}});var Mi=class{#e;constructor(e){this.#e=d(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}asEnum(e){return new Mi({...this.#e,node:au.cloneWithEnum(this.#e.node,e)})}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n(Mi,"CreateTypeBuilder");R(Mi,"don't await CreateTypeBuilder instances directly. To execute the query you need to call `execute`");var cu=d({is(t){return t.kind==="DropTypeNode"},create(t){return d({kind:"DropTypeNode",name:t})},cloneWith(t,e){return d({...t,...e})}});var Di=class{#e;constructor(e){this.#e=d(e)}ifExists(){return new Di({...this.#e,node:cu.cloneWith(this.#e.node,{ifExists:!0})})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n(Di,"DropTypeBuilder");R(Di,"don't await DropTypeBuilder instances directly. To execute the query you need to call `execute`");function H_(t){let e=".";if(t.includes(e)){let r=t.split(e).map(_q);if(r.length===2)return ot.createWithSchema(r[0],r[1]);throw new Error(`invalid schemable identifier ${t}`)}else return ot.create(t)}n(H_,"parseSchemableIdentifier");function _q(t){return t.trim()}n(_q,"trim");var ti=class{#e;constructor(e){this.#e=e}createTable(e){return new Ue({queryId:j(),executor:this.#e,node:gt.create(ve(e))})}dropTable(e){return new ei({queryId:j(),executor:this.#e,node:Da.create(ve(e))})}createIndex(e){return new ut({queryId:j(),executor:this.#e,node:or.create(e)})}dropIndex(e){return new lr({queryId:j(),executor:this.#e,node:cs.create(e)})}createSchema(e){return new ki({queryId:j(),executor:this.#e,node:$d.create(e)})}dropSchema(e){return new Zr({queryId:j(),executor:this.#e,node:Ma.create(e)})}alterTable(e){return new Ns({queryId:j(),executor:this.#e,node:ce.create(e)})}createView(e){return new Et({queryId:j(),executor:this.#e,node:Qt.create(e)})}dropView(e){return new pr({queryId:j(),executor:this.#e,node:bs.create(e)})}createType(e){return new Mi({queryId:j(),executor:this.#e,node:au.create(H_(e))})}dropType(e){return new Di({queryId:j(),executor:this.#e,node:cu.create(H_(e))})}withPlugin(e){return new ti(this.#e.withPlugin(e))}withoutPlugins(){return new ti(this.#e.withoutPlugins())}withSchema(e){return new ti(this.#e.withPluginAtFront(new Jt(e)))}};n(ti,"SchemaModule");var Qa=class{ref(e){return new Ua(e)}};n(Qa,"DynamicModule");var Xa=class{#e;constructor(e){this.#e=e}async provideConnection(e){let r=await this.#e.acquireConnection();try{return await e(r)}finally{await this.#e.releaseConnection(r)}}};n(Xa,"DefaultConnectionProvider");var Xt=class extends xn{#e;#t;#r;constructor(e,r,i,s=[]){super(s),this.#e=e,this.#t=r,this.#r=i}get adapter(){return this.#t}compileQuery(e){return this.#e.compileQuery(e)}provideConnection(e){return this.#r.provideConnection(e)}withPlugins(e){return new Xt(this.#e,this.#t,this.#r,[...this.plugins,...e])}withPlugin(e){return new Xt(this.#e,this.#t,this.#r,[...this.plugins,e])}withPluginAtFront(e){return new Xt(this.#e,this.#t,this.#r,[e,...this.plugins])}withConnectionProvider(e){return new Xt(this.#e,this.#t,e,[...this.plugins])}withoutPlugins(){return new Xt(this.#e,this.#t,this.#r,[])}};n(Xt,"DefaultQueryExecutor");function G_(){return typeof performance<"u"&&yt(performance.now)?performance.now():Date.now()}n(G_,"performanceNow");var Za=class{#e;#t;#r;#i;#n=new WeakSet;constructor(e,r){this.#e=e,this.#t=r}async init(){this.#r||(this.#r=this.#e.init().catch(e=>(this.#r=void 0,Promise.reject(e)))),await this.#r}async acquireConnection(){await this.init();let e=await this.#e.acquireConnection();return this.#n.has(e)||(this.#s()&&this.#o(e),this.#n.add(e)),e}async releaseConnection(e){await this.#e.releaseConnection(e)}beginTransaction(e,r){return this.#e.beginTransaction(e,r)}commitTransaction(e){return this.#e.commitTransaction(e)}rollbackTransaction(e){return this.#e.rollbackTransaction(e)}async destroy(){this.#r&&(await this.#r,this.#i||(this.#i=this.#e.destroy().catch(e=>(this.#i=void 0,Promise.reject(e)))),await this.#i)}#s(){return this.#t.isLevelEnabled("query")||this.#t.isLevelEnabled("error")}#o(e){let r=e.executeQuery;e.executeQuery=async i=>{let s=G_();try{return await r.call(e,i)}catch(o){throw this.#c(o),o}finally{this.#d(i,s)}}}#c(e){this.#t.error(()=>({level:"error",error:e}))}#d(e,r){this.#t.query(()=>({level:"query",query:e,queryDurationMillis:this.#u(r)}))}#u(e){return G_()-e}};n(Za,"RuntimeDriver");var xs=class{#e;#t;constructor(e){this.#e=e}async provideConnection(e){for(;this.#t;)await this.#t;let r=this.#r(e);return this.#t=r.then(()=>{this.#t=void 0}).catch(()=>{this.#t=void 0}),r}async#r(e){return await e(this.#e)}};n(xs,"SingleConnectionProvider");var vv=["read uncommitted","read committed","repeatable read","serializable"];var Rse=d(["query","error"]),ec=class{#e;#t;constructor(e){yt(e)?(this.#t=e,this.#e=d({query:!0,error:!0})):(this.#t=yq,this.#e=d({query:e.includes("query"),error:e.includes("error")}))}isLevelEnabled(e){return this.#e[e]}query(e){this.#e.query&&this.#t(e())}error(e){this.#e.error&&this.#t(e())}};n(ec,"Log");function yq(t){t.level==="query"?(console.log(`kysely:query: ${t.query.sql}`),console.log(`kysely:query: duration: ${t.queryDurationMillis.toFixed(1)}ms`)):t.level==="error"&&(t.error instanceof Error?console.error(`kysely:error: ${t.error.stack??t.error.message}`):console.error(`kysely:error: ${t}`))}n(yq,"defaultLogger");var Zt=class extends wt{#e;constructor(e){let r,i;if(gq(e))r={executor:e.executor},i={...e};else{let s=e.dialect,o=s.createDriver(),a=s.createQueryCompiler(),c=s.createAdapter(),l=new ec(e.log??[]),p=new Za(o,l),f=new Xa(p),m=new Xt(a,c,f,e.plugins??[]);r={executor:m},i={config:e,executor:m,dialect:s,driver:p}}super(r),this.#e=d(i)}get schema(){return new ti(this.#e.executor)}get dynamic(){return new Qa}get introspection(){return this.#e.dialect.createIntrospector(this.withoutPlugins())}get fn(){return new Tn}transaction(){return new In({...this.#e})}connection(){return new tc({...this.#e})}withPlugin(e){return new Zt({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new Zt({...this.#e,executor:this.#e.executor.withoutPlugins()})}withTables(){return new Zt({...this.#e})}async destroy(){await this.#e.driver.destroy()}get isTransaction(){return!1}getExecutor(){return this.#e.executor}};n(Zt,"Kysely");var Fi=class extends Zt{#e;constructor(e){super(e),this.#e=e}get isTransaction(){return!0}transaction(){throw new Error("calling the transaction method for a Transaction is not supported")}connection(){throw new Error("calling the connection method for a Transaction is not supported")}async destroy(){throw new Error("calling the destroy method for a Transaction is not supported")}withPlugin(e){return new Fi({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new Fi({...this.#e,executor:this.#e.executor.withoutPlugins()})}withTables(){return new Fi({...this.#e})}};n(Fi,"Transaction");function gq(t){return st(t)&&st(t.config)&&st(t.driver)&&st(t.executor)&&st(t.dialect)}n(gq,"isKyselyProps");var tc=class{#e;constructor(e){this.#e=d(e)}async execute(e){return this.#e.executor.provideConnection(async r=>{let i=this.#e.executor.withConnectionProvider(new xs(r)),s=new Zt({...this.#e,executor:i});return await e(s)})}};n(tc,"ConnectionBuilder");R(tc,"don't await ConnectionBuilder instances directly. To execute the query you need to call the `execute` method");var In=class{#e;constructor(e){this.#e=d(e)}setIsolationLevel(e){return new In({...this.#e,isolationLevel:e})}async execute(e){let{isolationLevel:r,...i}=this.#e,s={isolationLevel:r};return wq(s),this.#e.executor.provideConnection(async o=>{let a=this.#e.executor.withConnectionProvider(new xs(o)),c=new Fi({...i,executor:a});try{await this.#e.driver.beginTransaction(o,s);let l=await e(c);return await this.#e.driver.commitTransaction(o),l}catch(l){throw await this.#e.driver.rollbackTransaction(o),l}})}};n(In,"TransactionBuilder");R(In,"don't await TransactionBuilder instances directly. To execute the transaction you need to call the `execute` method");function wq(t){if(t.isolationLevel&&!vv.includes(t.isolationLevel))throw new Error(`invalid transaction isolation level ${t.isolationLevel}`)}n(wq,"validateTransactionSettings");var et=Object.assign((t,...e)=>new be({queryId:j(),rawNode:de.create(t,e?.map(cr)??[])}),{ref(t){return new be({queryId:j(),rawNode:de.createWithChild(Hr(t))})},value(t){return new be({queryId:j(),rawNode:de.createWithChild(cr(t))})},table(t){return new be({queryId:j(),rawNode:de.createWithChild(ve(t))})},id(...t){let e=new Array(t.length+1).fill(".");return e[0]="",e[e.length-1]="",new be({queryId:j(),rawNode:de.create(e,t.map(F.create))})},literal(t){return new be({queryId:j(),rawNode:de.createWithChild(dt.createImmediate(t))})},raw(t){return new be({queryId:j(),rawNode:de.createWithSql(t)})},join(t,e=et`, `){let r=new Array(2*t.length-1),i=e.toOperationNode();for(let s=0;s<t.length;++s)r[2*s]=cr(t[s]),s!==t.length-1&&(r[2*s+1]=i);return new be({queryId:j(),rawNode:de.createWithChildren(r)})}});var rc=class{nodeStack=[];get parentNode(){return this.nodeStack[this.nodeStack.length-2]}#e=d({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this)});visitNode=e=>{this.nodeStack.push(e),this.#e[e.kind](e),this.nodeStack.pop()}};n(rc,"OperationNodeVisitor");var qn=class extends rc{#e="";#t=[];get numParameters(){return this.#t.length}compileQuery(e){return this.#e="",this.#t=[],this.visitNode(e),d({query:e,sql:this.getSql(),parameters:[...this.#t]})}getSql(){return this.#e}visitSelectQuery(e){let r=this.parentNode!==void 0&&!Qe.is(this.parentNode)&&!Qt.is(this.parentNode)&&!Zd.is(this.parentNode);this.parentNode===void 0&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("select "),e.distinctOn&&(this.compileDistinctOn(e.distinctOn),this.append(" ")),e.frontModifiers&&e.frontModifiers.length>0&&(this.compileList(e.frontModifiers," "),this.append(" ")),e.selections&&(this.compileList(e.selections),this.append(" ")),this.visitNode(e.from),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.groupBy&&(this.append(" "),this.visitNode(e.groupBy)),e.having&&(this.append(" "),this.visitNode(e.having)),e.setOperations&&(this.append(" "),this.compileList(e.setOperations," ")),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.offset&&(this.append(" "),this.visitNode(e.offset)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," ")),r&&this.append(")")}visitFrom(e){this.append("from "),this.compileList(e.froms)}visitSelection(e){this.visitNode(e.selection)}visitColumn(e){this.visitNode(e.column)}compileDistinctOn(e){this.append("distinct on ("),this.compileList(e),this.append(")")}compileList(e,r=", "){let i=e.length-1;for(let s=0;s<=i;s++)this.visitNode(e[s]),s<i&&this.append(r)}visitWhere(e){this.append("where "),this.visitNode(e.where)}visitHaving(e){this.append("having "),this.visitNode(e.having)}visitInsertQuery(e){let r=this.nodeStack.find(q.is)!==e;!r&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append(e.replace?"replace":"insert"),e.ignore&&this.append(" ignore"),this.append(" into "),this.visitNode(e.into),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.values&&(this.append(" "),this.visitNode(e.values)),e.onConflict&&(this.append(" "),this.visitNode(e.onConflict)),e.onDuplicateKey&&(this.append(" "),this.visitNode(e.onDuplicateKey)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&this.append(")")}visitValues(e){this.append("values "),this.compileList(e.values)}visitDeleteQuery(e){let r=this.nodeStack.find(q.is)!==e;!r&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("delete "),this.visitNode(e.from),e.using&&(this.append(" "),this.visitNode(e.using)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&this.append(")")}visitReturning(e){this.append("returning "),this.compileList(e.selections)}visitAlias(e){this.visitNode(e.node),this.append(" as "),this.visitNode(e.alias)}visitReference(e){this.visitNode(e.table),this.append("."),this.visitNode(e.column)}visitSelectAll(e){this.append("*")}visitIdentifier(e){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(e),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(e){if(!Ge(e.name))throw new Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(e.name))}visitAnd(e){this.visitNode(e.left),this.append(" and "),this.visitNode(e.right)}visitOr(e){this.visitNode(e.left),this.append(" or "),this.visitNode(e.right)}visitValue(e){e.immediate?this.appendImmediateValue(e.value):this.appendValue(e.value)}visitValueList(e){this.append("("),this.compileList(e.values),this.append(")")}visitPrimitiveValueList(e){this.append("(");let{values:r}=e;for(let i=0;i<r.length;++i)this.appendValue(r[i]),i!==r.length-1&&this.append(", ");this.append(")")}visitParens(e){this.append("("),this.visitNode(e.node),this.append(")")}visitJoin(e){this.append(vq[e.joinType]),this.append(" "),this.visitNode(e.table),e.on&&(this.append(" "),this.visitNode(e.on))}visitOn(e){this.append("on "),this.visitNode(e.on)}visitRaw(e){let{sqlFragments:r,parameters:i}=e;for(let s=0;s<r.length;++s)this.append(r[s]),i.length>s&&this.visitNode(i[s])}visitOperator(e){this.append(e.operator)}visitTable(e){this.visitNode(e.table)}visitSchemableIdentifier(e){e.schema&&(this.visitNode(e.schema),this.append(".")),this.visitNode(e.identifier)}visitCreateTable(e){this.append("create "),e.frontModifiers&&e.frontModifiers.length>0&&(this.compileList(e.frontModifiers," "),this.append(" ")),e.temporary&&this.append("temporary "),this.append("table "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.table),this.append(" ("),this.compileList([...e.columns,...e.constraints??[]]),this.append(")"),e.onCommit&&(this.append(" on commit "),this.append(e.onCommit)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," "))}visitColumnDefinition(e){this.visitNode(e.column),this.append(" "),this.visitNode(e.dataType),e.unsigned&&this.append(" unsigned"),e.frontModifiers&&e.frontModifiers.length>0&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.generated&&(this.append(" "),this.visitNode(e.generated)),e.defaultTo&&(this.append(" "),this.visitNode(e.defaultTo)),e.notNull&&this.append(" not null"),e.unique&&this.append(" unique"),e.primaryKey&&this.append(" primary key"),e.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),e.references&&(this.append(" "),this.visitNode(e.references)),e.check&&(this.append(" "),this.visitNode(e.check)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(e){this.append("references "),this.visitNode(e.table),this.append(" ("),this.compileList(e.columns),this.append(")"),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitDropTable(e){this.append("drop table "),e.ifExists&&this.append("if exists "),this.visitNode(e.table),e.cascade&&this.append(" cascade")}visitDataType(e){this.append(e.dataType)}visitOrderBy(e){this.append("order by "),this.compileList(e.items)}visitOrderByItem(e){this.visitNode(e.orderBy),e.direction&&(this.append(" "),this.visitNode(e.direction))}visitGroupBy(e){this.append("group by "),this.compileList(e.items)}visitGroupByItem(e){this.visitNode(e.groupBy)}visitUpdateQuery(e){let r=this.nodeStack.find(q.is)!==e;!r&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("update "),this.visitNode(e.table),this.append(" set "),e.updates&&this.compileList(e.updates),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&this.append(")")}visitColumnUpdate(e){this.visitNode(e.column),this.append(" = "),this.visitNode(e.value)}visitLimit(e){this.append("limit "),this.visitNode(e.limit)}visitOffset(e){this.append("offset "),this.visitNode(e.offset)}visitOnConflict(e){this.append("on conflict"),e.columns?(this.append(" ("),this.compileList(e.columns),this.append(")")):e.constraint?(this.append(" on constraint "),this.visitNode(e.constraint)):e.indexExpression&&(this.append(" ("),this.visitNode(e.indexExpression),this.append(")")),e.indexWhere&&(this.append(" "),this.visitNode(e.indexWhere)),e.doNothing===!0?this.append(" do nothing"):e.updates&&(this.append(" do update set "),this.compileList(e.updates),e.updateWhere&&(this.append(" "),this.visitNode(e.updateWhere)))}visitOnDuplicateKey(e){this.append("on duplicate key update "),this.compileList(e.updates)}visitCreateIndex(e){this.append("create "),e.unique&&this.append("unique "),this.append("index "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.using&&(this.append(" using "),this.visitNode(e.using)),e.expression&&(this.append(" ("),this.visitNode(e.expression),this.append(")"))}visitDropIndex(e){this.append("drop index "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.cascade&&this.append(" cascade")}visitCreateSchema(e){this.append("create schema "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.schema)}visitDropSchema(e){this.append("drop schema "),e.ifExists&&this.append("if exists "),this.visitNode(e.schema),e.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("primary key ("),this.compileList(e.columns),this.append(")")}visitUniqueConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("unique ("),this.compileList(e.columns),this.append(")")}visitCheckConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("check ("),this.visitNode(e.expression),this.append(")")}visitForeignKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("foreign key ("),this.compileList(e.columns),this.append(") "),this.visitNode(e.references),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitList(e){this.compileList(e.items)}visitWith(e){this.append("with "),e.recursive&&this.append("recursive "),this.compileList(e.expressions)}visitCommonTableExpression(e){this.visitNode(e.name),this.append(" as "),this.visitNode(e.expression)}visitCommonTableExpressionName(e){this.visitNode(e.table),e.columns&&(this.append("("),this.compileList(e.columns),this.append(")"))}visitAlterTable(e){this.append("alter table "),this.visitNode(e.table),this.append(" "),e.renameTo&&(this.append("rename to "),this.visitNode(e.renameTo)),e.setSchema&&(this.append("set schema "),this.visitNode(e.setSchema)),e.addConstraint&&this.visitNode(e.addConstraint),e.dropConstraint&&this.visitNode(e.dropConstraint),e.columnAlterations&&this.compileList(e.columnAlterations)}visitAddColumn(e){this.append("add column "),this.visitNode(e.column)}visitRenameColumn(e){this.append("rename column "),this.visitNode(e.column),this.append(" to "),this.visitNode(e.renameTo)}visitDropColumn(e){this.append("drop column "),this.visitNode(e.column)}visitAlterColumn(e){this.append("alter column "),this.visitNode(e.column),this.append(" "),e.dataType&&(this.append("type "),this.visitNode(e.dataType),e.dataTypeExpression&&(this.append("using "),this.visitNode(e.dataTypeExpression))),e.setDefault&&(this.append("set default "),this.visitNode(e.setDefault)),e.dropDefault&&this.append("drop default"),e.setNotNull&&this.append("set not null"),e.dropNotNull&&this.append("drop not null")}visitModifyColumn(e){this.append("modify column "),this.visitNode(e.column)}visitAddConstraint(e){this.append("add "),this.visitNode(e.constraint)}visitDropConstraint(e){this.append("drop constraint "),e.ifExists&&this.append("if exists "),this.visitNode(e.constraintName),e.modifier==="cascade"?this.append(" cascade"):e.modifier==="restrict"&&this.append(" restrict")}visitSetOperation(e){this.append(e.operator),this.append(" "),e.all&&this.append("all "),this.visitNode(e.expression)}visitCreateView(e){this.append("create "),e.orReplace&&this.append("or replace "),e.materialized&&this.append("materialized "),e.temporary&&this.append("temporary "),this.append("view "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),this.append(" "),e.columns&&(this.append("("),this.compileList(e.columns),this.append(") ")),e.as&&(this.append("as "),this.visitNode(e.as))}visitDropView(e){this.append("drop "),e.materialized&&this.append("materialized "),this.append("view "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.cascade&&this.append(" cascade")}visitGenerated(e){this.append("generated "),e.always&&this.append("always "),e.byDefault&&this.append("by default "),this.append("as "),e.identity&&this.append("identity"),e.expression&&(this.append("("),this.visitNode(e.expression),this.append(")")),e.stored&&this.append(" stored")}visitDefaultValue(e){this.append("default "),this.visitNode(e.defaultValue)}visitSelectModifier(e){e.rawModifier?this.visitNode(e.rawModifier):this.append(Eq[e.modifier])}visitCreateType(e){this.append("create type "),this.visitNode(e.name),e.enum&&(this.append(" as enum "),this.visitNode(e.enum))}visitDropType(e){this.append("drop type "),e.ifExists&&this.append("if exists "),this.visitNode(e.name)}visitExplain(e){this.append("explain"),(e.options||e.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),e.options&&(this.visitNode(e.options),e.format&&this.append(this.getExplainOptionsDelimiter())),e.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(e.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(e){this.append("default")}visitAggregateFunction(e){this.append(e.func),this.append("("),e.distinct&&this.append("distinct "),this.visitNode(e.aggregated),this.append(")"),e.filter&&(this.append(" filter("),this.visitNode(e.filter),this.append(")")),e.over&&(this.append(" "),this.visitNode(e.over))}visitOver(e){this.append("over("),e.partitionBy&&(this.visitNode(e.partitionBy),e.orderBy&&this.append(" ")),e.orderBy&&this.visitNode(e.orderBy),this.append(")")}visitPartitionBy(e){this.append("partition by "),this.compileList(e.items)}visitPartitionByItem(e){this.visitNode(e.partitionBy)}visitBinaryOperation(e){this.visitNode(e.leftOperand),this.append(" "),this.visitNode(e.operator),this.append(" "),this.visitNode(e.rightOperand)}visitUnaryOperation(e){this.visitNode(e.operator),this.append(" "),this.visitNode(e.operand)}visitUsing(e){this.append("using "),this.compileList(e.tables)}append(e){this.#e+=e}appendValue(e){this.addParameter(e),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(e){let r=this.getLeftIdentifierWrapper(),i=this.getRightIdentifierWrapper(),s="";for(let o of e)s+=o,o===r?s+=r:o===i&&(s+=i);return s}addParameter(e){this.#t.push(e)}appendImmediateValue(e){if(Ge(e))this.append(`'${e}'`);else if(kE(e)||jd(e))this.append(e.toString());else if(Vd(e))this.append("null");else if(ME(e))this.appendImmediateValue(e.toISOString());else if(DE(e))this.appendImmediateValue(e.toString());else throw new Error(`invalid immediate value ${e}`)}};n(qn,"DefaultQueryCompiler");var Eq=d({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),vq=d({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral"});var Cn=class{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}};n(Cn,"DialectAdapterBase");var ic=class{transformQuery(e){return e.node}async transformResult(e){return e.result}};n(ic,"NoopPlugin");var sc="kysely_migration",Ts="kysely_migration_lock",B_="migration_lock",J_=d({__noMigrations__:!0}),nc=class{#e;constructor(e){this.#e=d(e)}async getMigrations(){let e=await this.#a(this.#i)?await this.#e.db.withPlugin(this.#s).selectFrom(this.#i).select(["name","timestamp"]).execute():[];return(await this.#f()).map(({name:i,...s})=>{let o=e.find(a=>a.name===i);return{name:i,migration:s,executedAt:o?new Date(o.timestamp):void 0}})}async migrateToLatest(){return this.#t(({migrations:e})=>e.length-1)}async migrateTo(e){return this.#t(({migrations:r})=>{if(e===J_)return-1;let i=r.findIndex(s=>s.name===e);if(i===-1)throw new Error(`migration "${e}" doesn't exist`);return i})}async migrateUp(){return this.#t(({currentIndex:e,migrations:r})=>Math.min(e+1,r.length-1))}async migrateDown(){return this.#t(({currentIndex:e})=>Math.max(e-1,-1))}async#t(e){try{return await this.#o(),await this.#h(e)}catch(r){return r instanceof As?r.resultSet:{error:r}}}get#r(){return this.#e.migrationTableSchema}get#i(){return this.#e.migrationTableName??sc}get#n(){return this.#e.migrationLockTableName??Ts}get#s(){return this.#r?new Jt(this.#r):new ic}async#o(){await this.#c(),await this.#d(),await this.#u(),await this.#m()}async#c(){if(this.#r&&!await this.#l())try{await this.#e.db.schema.createSchema(this.#r).ifNotExists().execute()}catch(e){if(!await this.#l())throw e}}async#d(){if(!await this.#a(this.#i))try{this.#r&&await this.#e.db.schema.createSchema(this.#r).ifNotExists().execute(),await this.#e.db.schema.withPlugin(this.#s).createTable(this.#i).ifNotExists().addColumn("name","varchar(255)",e=>e.notNull().primaryKey()).addColumn("timestamp","varchar(255)",e=>e.notNull()).execute()}catch(e){if(!await this.#a(this.#i))throw e}}async#u(){if(!await this.#a(this.#n))try{await this.#e.db.schema.withPlugin(this.#s).createTable(this.#n).ifNotExists().addColumn("id","varchar(255)",e=>e.notNull().primaryKey()).addColumn("is_locked","integer",e=>e.notNull().defaultTo(0)).execute()}catch(e){if(!await this.#a(this.#n))throw e}}async#m(){if(!await this.#p())try{await this.#e.db.withPlugin(this.#s).insertInto(this.#n).values({id:B_,is_locked:0}).execute()}catch(e){if(!await this.#p())throw e}}async#l(){return(await this.#e.db.introspection.getSchemas()).some(r=>r.name===this.#r)}async#a(e){let r=this.#r;return(await this.#e.db.introspection.getTables({withInternalKyselyTables:!0})).some(s=>s.name===e&&(!r||s.schema===r))}async#p(){return!!await this.#e.db.withPlugin(this.#s).selectFrom(this.#n).where("id","=",B_).select("id").executeTakeFirst()}async#h(e){let r=this.#e.db.getExecutor().adapter,i=d({lockTable:this.#e.migrationLockTableName??Ts,lockRowId:B_,lockTableSchema:this.#e.migrationTableSchema}),s=n(async o=>{try{await r.acquireMigrationLock(o,i);let a=await this.#_(o);if(a.migrations.length===0)return{results:[]};let c=e(a);return c===void 0?{results:[]}:c<a.currentIndex?await this.#w(o,a,c):c>a.currentIndex?await this.#E(o,a,c):{results:[]}}finally{await r.releaseMigrationLock(o,i)}},"run");return r.supportsTransactionalDdl?this.#e.db.transaction().execute(s):this.#e.db.connection().execute(s)}async#_(e){let r=await this.#f(),i=await this.#y(e);return this.#g(r,i),d({migrations:r,currentIndex:r.findIndex(s=>s.name===FE(i))})}async#f(){let e=await this.#e.provider.getMigrations();return Object.keys(e).sort().map(r=>({...e[r],name:r}))}async#y(e){return(await e.withPlugin(this.#s).selectFrom(this.#i).select("name").orderBy("name").execute()).map(i=>i.name)}#g(e,r){for(let i of r)if(!e.some(s=>s.name===i))throw new Error(`corrupted migrations: previously executed migration ${i} is missing`);for(let i=0;i<r.length;++i)if(e[i].name!==r[i])throw new Error(`corrupted migrations: expected previously executed migration ${r[i]} to be at index ${i} but ${e[i].name} was found in its place. New migrations must always have a name that comes alphabetically after the last executed migration.`)}async#w(e,r,i){let s=[];for(let o=r.currentIndex;o>i;--o)s.push({migrationName:r.migrations[o].name,direction:"Down",status:"NotExecuted"});for(let o=0;o<s.length;++o){let a=r.migrations.find(c=>c.name===s[o].migrationName);try{a.down&&(await a.down(e),await e.withPlugin(this.#s).deleteFrom(this.#i).where("name","=",a.name).execute(),s[o]={migrationName:a.name,direction:"Down",status:"Success"})}catch(c){throw s[o]={migrationName:a.name,direction:"Down",status:"Error"},new As({error:c,results:s})}}return{results:s}}async#E(e,r,i){let s=[];for(let o=r.currentIndex+1;o<=i;++o)s.push({migrationName:r.migrations[o].name,direction:"Up",status:"NotExecuted"});for(let o=0;o<s.length;++o){let a=r.migrations.find(c=>c.name===s[o].migrationName);try{await a.up(e),await e.withPlugin(this.#s).insertInto(this.#i).values({name:a.name,timestamp:new Date().toISOString()}).execute(),s[o]={migrationName:a.name,direction:"Up",status:"Success"}}catch(c){throw s[o]={migrationName:a.name,direction:"Up",status:"Error"},new As({error:c,results:s})}}return{results:s}}};n(nc,"Migrator");var As=class extends Error{#e;constructor(e){super(),this.#e=e}get resultSet(){return this.#e}};n(As,"MigrationResultSetError");var Sq=/"/g,oc=class extends qn{sanitizeIdentifier(e){return e.replace(Sq,'""')}};n(oc,"PostgresQueryCompiler");var Nq=BigInt("3853314791062309107"),ac=class extends Cn{get supportsTransactionalDdl(){return!0}get supportsReturning(){return!0}async acquireMigrationLock(e){await et`select pg_advisory_xact_lock(${et.literal(Nq)})`.execute(e)}async releaseMigrationLock(){}};n(ac,"PostgresAdapter");var bq=/`/g,cc=class extends qn{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getExplainOptionAssignment(){return"="}getExplainOptionsDelimiter(){return" "}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return"`"}getRightIdentifierWrapper(){return"`"}sanitizeIdentifier(e){return e.replace(bq,"``")}};n(cc,"MysqlQueryCompiler");var dc=class{#e;constructor(e){this.#e=e}async getSchemas(){return(await this.#e.selectFrom("information_schema.schemata").select("schema_name").$castTo().execute()).map(r=>({name:r.SCHEMA_NAME}))}async getTables(e={withInternalKyselyTables:!1}){let r=this.#e.selectFrom("information_schema.columns as columns").innerJoin("information_schema.tables as tables",s=>s.onRef("columns.TABLE_CATALOG","=","tables.TABLE_CATALOG").onRef("columns.TABLE_SCHEMA","=","tables.TABLE_SCHEMA").onRef("columns.TABLE_NAME","=","tables.TABLE_NAME")).select(["columns.COLUMN_NAME","columns.COLUMN_DEFAULT","columns.TABLE_NAME","columns.TABLE_SCHEMA","tables.TABLE_TYPE","columns.IS_NULLABLE","columns.DATA_TYPE","columns.EXTRA"]).where("columns.TABLE_SCHEMA","=",et`database()`).orderBy("columns.TABLE_NAME").orderBy("columns.ORDINAL_POSITION").$castTo();e.withInternalKyselyTables||(r=r.where("columns.TABLE_NAME","!=",sc).where("columns.TABLE_NAME","!=",Ts));let i=await r.execute();return this.#t(i)}async getMetadata(e){return{tables:await this.getTables(e)}}#t(e){return e.reduce((r,i)=>{let s=r.find(o=>o.name===i.TABLE_NAME);return s||(s=d({name:i.TABLE_NAME,isView:i.TABLE_TYPE==="VIEW",schema:i.TABLE_SCHEMA,columns:[]}),r.push(s)),s.columns.push(d({name:i.COLUMN_NAME,dataType:i.DATA_TYPE,isNullable:i.IS_NULLABLE==="YES",isAutoIncrementing:i.EXTRA.toLowerCase().includes("auto_increment"),hasDefaultValue:i.COLUMN_DEFAULT!==null})),r},[])}};n(dc,"MysqlIntrospector");var Sv="ea586330-2c93-47c8-908d-981d9d270f9d",xq=60*60,uc=class extends Cn{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}async acquireMigrationLock(e){await et`select get_lock(${et.literal(Sv)}, ${et.literal(xq)})`.execute(e)}async releaseMigrationLock(e){await et`select release_lock(${et.literal(Sv)})`.execute(e)}};n(uc,"MysqlAdapter");var lc=class{#e;constructor(e){this.#e=e}async init(){}async acquireConnection(){return new du(this.#e)}async beginTransaction(e){await e.beginTransaction()}async commitTransaction(e){await e.commitTransaction()}async rollbackTransaction(e){await e.rollbackTransaction()}async releaseConnection(e){}async destroy(){}};n(lc,"DataApiDriver");var du=class{#e;#t;constructor(e){this.#e=e}async beginTransaction(){let e=await this.#e.client.beginTransaction({secretArn:this.#e.secretArn,resourceArn:this.#e.resourceArn,database:this.#e.database});this.#t=e.transactionId}async commitTransaction(){if(!this.#t)throw new Error("Cannot commit a transaction before creating it");await this.#e.client.commitTransaction({secretArn:this.#e.secretArn,resourceArn:this.#e.resourceArn,transactionId:this.#t})}async rollbackTransaction(){if(!this.#t)throw new Error("Cannot rollback a transaction before creating it");await this.#e.client.rollbackTransaction({secretArn:this.#e.secretArn,resourceArn:this.#e.resourceArn,transactionId:this.#t})}async executeQuery(e){let r=await this.#e.client.executeStatement({transactionId:this.#t,secretArn:this.#e.secretArn,resourceArn:this.#e.resourceArn,sql:e.sql,parameters:e.parameters,database:this.#e.database,includeResultMetadata:!0});if(!r.columnMetadata){let o=BigInt(r.numberOfRecordsUpdated||0);return{numAffectedRows:o,numUpdatedOrDeletedRows:o,insertId:r.generatedFields&&r.generatedFields.length>0?BigInt(r.generatedFields[0].longValue):void 0,rows:[]}}return{rows:r.records?.filter(o=>o.length!==0).map(o=>Object.fromEntries(o.map((a,c)=>[r.columnMetadata[c].label||r.columnMetadata[c].name,a.isNull?null:a.stringValue??a.doubleValue??a.longValue??a.booleanValue??this.#r(a.arrayValue)??a.blobValue??null])))||[]}}async*streamQuery(e,r){throw new Error("Data API does not support streaming")}#r(e){if(e)return e.stringValues??e.doubleValues??e.longValues??e.booleanValues??e.arrayValues?.map(this.#r)}};n(du,"DataApiConnection");var pc=class extends oc{appendValue(e){let r=this.numParameters;this.append(this.getCurrentParameterPlaceholder()),this.addParameter({name:r.toString(),...Nv(e)})}getCurrentParameterPlaceholder(){return":"+this.numParameters}};n(pc,"PostgresDataApiQueryCompiler");var fc=class extends cc{appendValue(e){let r=this.numParameters;this.append(this.getCurrentParameterPlaceholder()),this.addParameter({name:r.toString(),...Nv(e)})}getCurrentParameterPlaceholder(){return":"+this.numParameters}};n(fc,"MysqlDataApiQueryCompiler");function Nv(t){switch(typeof t){case"bigint":return{value:{doubleValue:Number(t)}};case"boolean":return{value:{booleanValue:t}};case"number":return Number.isInteger(t)?{value:{longValue:t}}:{value:{doubleValue:t}};case"object":if(t==null)return{value:{isNull:!0}};if(Buffer.isBuffer(t))return{value:{blobValue:t}};if(t instanceof Date)return{typeHint:"TIMESTAMP",value:{stringValue:bv(t.toISOString())}};if(t?.value&&Oq(t.value))return t.typeHint&&t.value.stringValue&&typeof t.value.stringValue=="string"&&(t.value.stringValue=Aq(t.typeHint,t.value.stringValue)),t;break;case"string":return{value:{stringValue:t}}}throw new Os("Could not serialize value")}n(Nv,"serialize");function Aq(t,e){switch(t){case"DATE":return K_(e).slice(0,10);case"TIME":return e.match(/^\d{4}-\d{2}-\d{2}/)?K_(e).slice(11,23):Tq(e);case"TIMESTAMP":return bv(K_(e))}return e}n(Aq,"fixStringValue");function Tq(t){let e=(t||"00:00:00").split(":");for(;e.length<3;)e.push("00");return e.join(":").slice(0,12)}n(Tq,"fixTimeString");function bv(t){return t.replace("T"," ").slice(0,23)}n(bv,"fixISOString");function K_(t){return new Date(Date.parse(t)).toISOString()}n(K_,"parseToISOString");function Oq(t){for(let e of Rq)if(t[e])return!0;if(t.arrayValue){for(let e of Pq)if(t.arrayValue?.[e])return!0}return!1}n(Oq,"isValueObject");var Os=class extends Error{constructor(e){super(e),this.name=Os.name}};n(Os,"QueryCompilerError");var Pq=["booleanValues","doubleValues","longValues","stringValues"],Rq=["blobValue","booleanValue","doubleValue","isNull","longValue","stringValue"];var mc=class{#e;constructor(e){this.#e=e}async getSchemas(){return(await this.#e.selectFrom("pg_catalog.pg_namespace").select("nspname").$castTo().execute()).map(r=>({name:r.nspname}))}async getTables(e={withInternalKyselyTables:!1}){let r=this.#e.selectFrom("pg_catalog.pg_attribute as a").innerJoin("pg_catalog.pg_class as c","a.attrelid","c.oid").innerJoin("pg_catalog.pg_namespace as ns","c.relnamespace","ns.oid").innerJoin("pg_catalog.pg_type as typ","a.atttypid","typ.oid").innerJoin("pg_catalog.pg_namespace as dtns","typ.typnamespace","dtns.oid").select(["a.attname as column","a.attnotnull as not_null","a.atthasdef as has_default","c.relname as table","c.relkind as table_type","ns.nspname as schema","typ.typname as type","dtns.nspname as type_schema",this.#e.selectFrom("pg_class").select(et`true`.as("auto_incrementing")).whereRef("relnamespace","=","c.relnamespace").where("relkind","=","S").where("relname","=",et`c.relname || '_' || a.attname || '_seq'`).as("auto_incrementing")]).where(s=>s.where("c.relkind","=","r").orWhere("c.relkind","=","v")).where("ns.nspname","!~","^pg_").where("ns.nspname","!=","information_schema").where("a.attnum",">=",0).where("a.attisdropped","!=",!0).orderBy("ns.nspname").orderBy("c.relname").orderBy("a.attnum").$castTo();e.withInternalKyselyTables||(r=r.where("c.relname","!=",sc).where("c.relname","!=",Ts));let i=await r.execute();return this.#t(i)}async getMetadata(e){return{tables:await this.getTables(e)}}#t(e){return e.reduce((r,i)=>{let s=r.find(o=>o.name===i.table&&o.schema===i.schema);return s||(s=Object.freeze({name:i.table,isView:i.table_type==="v",schema:i.schema,columns:[]}),r.push(s)),s.columns.push(Object.freeze({name:i.column,dataType:i.type,dataTypeSchema:i.type_schema,isNullable:!i.not_null,isAutoIncrementing:!!i.auto_incrementing,hasDefaultValue:i.has_default})),r},[])}};n(mc,"PostgresIntrospector");var hc=class{#e;constructor(e){this.#e=e}createAdapter(){if(this.#e.mode==="postgres")return new ac;if(this.#e.mode==="mysql")return new uc;throw new Error("Unknown mode "+this.#e.mode)}createDriver(){return new lc(this.#e.driver)}createQueryCompiler(){if(this.#e.mode==="postgres")return new pc;if(this.#e.mode==="mysql")return new fc;throw new Error("Unknown mode "+this.#e.mode)}createIntrospector(e){if(this.#e.mode==="postgres")return new mc(e);if(this.#e.mode==="mysql")return new dc(e);throw new Error("Unknown mode "+this.#e.mode)}};n(hc,"DataApiDialect");var WI=KI(UI(),1);import Q6 from"url";async function Tve(t){console.log("initializing db");let e=new Zt({dialect:new hc({mode:process.env.RDS_ENGINE_MODE,driver:{client:new WI.RDSData({}),database:t?.database||process.env.RDS_DATABASE,secretArn:process.env.RDS_SECRET,resourceArn:process.env.RDS_ARN}})});console.log("creating migrator");let r=new nc({db:e,provider:new A_(Y6.resolve(process.env.RDS_MIGRATIONS_PATH))});if(console.log("processing event",t),!t.type||t.type==="latest"){console.log("migrating to latest");let i=await r.migrateToLatest(),s=i.error||i.results?.find(o=>o.status==="Error");if(s)throw s;return i}if(t.type==="to"){if(console.log("migrating to",t.data.name),!t.data.name)return await r.migrateTo(J_);let i=await r.migrateTo(t.data.name),s=i.error||i.results?.find(o=>o.status==="Error");if(s)throw s;return i}if(t.type==="list")return console.log("listing migrations"),await r.getMigrations()}n(Tve,"handler");var A_=class{#e;constructor(e){this.#e=e}async getMigrations(){let e=await import("fs/promises"),r=await import("path"),i={},s=await e.readdir(this.#e);for(let o of s)if(o.endsWith(".js")||o.endsWith(".cjs")||o.endsWith(".mjs")){let[a]=r.basename(o).split("."),c=r.join(this.#e,o);if(process.env.LAMBDA_TASK_ROOT){let p=await import(c);i[a]=p;continue}let l=c.replace(/(mjs|cjs|js)$/g,`${Date.now()}.$1`);try{await e.copyFile(c,l);let p=await import(Q6.pathToFileURL(l).href);i[a]=p}catch(p){console.error(p)}await e.rm(l)}return i}};n(A_,"DynamicFileMigrationProvider");export{Tve as handler};
